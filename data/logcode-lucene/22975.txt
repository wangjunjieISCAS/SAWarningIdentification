GitDiffStart: 6ac106867158249f63f601ee24fbc59a3c930146 | Sun Feb 18 18:37:34 2007 +0000
diff --git a/client/ruby/solr-ruby/CHANGES.txt b/client/ruby/solr-ruby/CHANGES.txt
new file mode 100644
index 0000000..5ab2180
--- /dev/null
+++ b/client/ruby/solr-ruby/CHANGES.txt
@@ -0,0 +1,3 @@
+v0.0.1  <real soon now>
+- initial release
+
diff --git a/client/ruby/solr-ruby/LICENSE.txt b/client/ruby/solr-ruby/LICENSE.txt
new file mode 100644
index 0000000..261eeb9
--- /dev/null
+++ b/client/ruby/solr-ruby/LICENSE.txt
@@ -0,0 +1,201 @@
+                                 Apache License
+                           Version 2.0, January 2004
+                        http://www.apache.org/licenses/
+
+   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
+
+   1. Definitions.
+
+      "License" shall mean the terms and conditions for use, reproduction,
+      and distribution as defined by Sections 1 through 9 of this document.
+
+      "Licensor" shall mean the copyright owner or entity authorized by
+      the copyright owner that is granting the License.
+
+      "Legal Entity" shall mean the union of the acting entity and all
+      other entities that control, are controlled by, or are under common
+      control with that entity. For the purposes of this definition,
+      "control" means (i) the power, direct or indirect, to cause the
+      direction or management of such entity, whether by contract or
+      otherwise, or (ii) ownership of fifty percent (50%) or more of the
+      outstanding shares, or (iii) beneficial ownership of such entity.
+
+      "You" (or "Your") shall mean an individual or Legal Entity
+      exercising permissions granted by this License.
+
+      "Source" form shall mean the preferred form for making modifications,
+      including but not limited to software source code, documentation
+      source, and configuration files.
+
+      "Object" form shall mean any form resulting from mechanical
+      transformation or translation of a Source form, including but
+      not limited to compiled object code, generated documentation,
+      and conversions to other media types.
+
+      "Work" shall mean the work of authorship, whether in Source or
+      Object form, made available under the License, as indicated by a
+      copyright notice that is included in or attached to the work
+      (an example is provided in the Appendix below).
+
+      "Derivative Works" shall mean any work, whether in Source or Object
+      form, that is based on (or derived from) the Work and for which the
+      editorial revisions, annotations, elaborations, or other modifications
+      represent, as a whole, an original work of authorship. For the purposes
+      of this License, Derivative Works shall not include works that remain
+      separable from, or merely link (or bind by name) to the interfaces of,
+      the Work and Derivative Works thereof.
+
+      "Contribution" shall mean any work of authorship, including
+      the original version of the Work and any modifications or additions
+      to that Work or Derivative Works thereof, that is intentionally
+      submitted to Licensor for inclusion in the Work by the copyright owner
+      or by an individual or Legal Entity authorized to submit on behalf of
+      the copyright owner. For the purposes of this definition, "submitted"
+      means any form of electronic, verbal, or written communication sent
+      to the Licensor or its representatives, including but not limited to
+      communication on electronic mailing lists, source code control systems,
+      and issue tracking systems that are managed by, or on behalf of, the
+      Licensor for the purpose of discussing and improving the Work, but
+      excluding communication that is conspicuously marked or otherwise
+      designated in writing by the copyright owner as "Not a Contribution."
+
+      "Contributor" shall mean Licensor and any individual or Legal Entity
+      on behalf of whom a Contribution has been received by Licensor and
+      subsequently incorporated within the Work.
+
+   2. Grant of Copyright License. Subject to the terms and conditions of
+      this License, each Contributor hereby grants to You a perpetual,
+      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+      copyright license to reproduce, prepare Derivative Works of,
+      publicly display, publicly perform, sublicense, and distribute the
+      Work and such Derivative Works in Source or Object form.
+
+   3. Grant of Patent License. Subject to the terms and conditions of
+      this License, each Contributor hereby grants to You a perpetual,
+      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
+      (except as stated in this section) patent license to make, have made,
+      use, offer to sell, sell, import, and otherwise transfer the Work,
+      where such license applies only to those patent claims licensable
+      by such Contributor that are necessarily infringed by their
+      Contribution(s) alone or by combination of their Contribution(s)
+      with the Work to which such Contribution(s) was submitted. If You
+      institute patent litigation against any entity (including a
+      cross-claim or counterclaim in a lawsuit) alleging that the Work
+      or a Contribution incorporated within the Work constitutes direct
+      or contributory patent infringement, then any patent licenses
+      granted to You under this License for that Work shall terminate
+      as of the date such litigation is filed.
+
+   4. Redistribution. You may reproduce and distribute copies of the
+      Work or Derivative Works thereof in any medium, with or without
+      modifications, and in Source or Object form, provided that You
+      meet the following conditions:
+
+      (a) You must give any other recipients of the Work or
+          Derivative Works a copy of this License; and
+
+      (b) You must cause any modified files to carry prominent notices
+          stating that You changed the files; and
+
+      (c) You must retain, in the Source form of any Derivative Works
+          that You distribute, all copyright, patent, trademark, and
+          attribution notices from the Source form of the Work,
+          excluding those notices that do not pertain to any part of
+          the Derivative Works; and
+
+      (d) If the Work includes a "NOTICE" text file as part of its
+          distribution, then any Derivative Works that You distribute must
+          include a readable copy of the attribution notices contained
+          within such NOTICE file, excluding those notices that do not
+          pertain to any part of the Derivative Works, in at least one
+          of the following places: within a NOTICE text file distributed
+          as part of the Derivative Works; within the Source form or
+          documentation, if provided along with the Derivative Works; or,
+          within a display generated by the Derivative Works, if and
+          wherever such third-party notices normally appear. The contents
+          of the NOTICE file are for informational purposes only and
+          do not modify the License. You may add Your own attribution
+          notices within Derivative Works that You distribute, alongside
+          or as an addendum to the NOTICE text from the Work, provided
+          that such additional attribution notices cannot be construed
+          as modifying the License.
+
+      You may add Your own copyright statement to Your modifications and
+      may provide additional or different license terms and conditions
+      for use, reproduction, or distribution of Your modifications, or
+      for any such Derivative Works as a whole, provided Your use,
+      reproduction, and distribution of the Work otherwise complies with
+      the conditions stated in this License.
+
+   5. Submission of Contributions. Unless You explicitly state otherwise,
+      any Contribution intentionally submitted for inclusion in the Work
+      by You to the Licensor shall be under the terms and conditions of
+      this License, without any additional terms or conditions.
+      Notwithstanding the above, nothing herein shall supersede or modify
+      the terms of any separate license agreement you may have executed
+      with Licensor regarding such Contributions.
+
+   6. Trademarks. This License does not grant permission to use the trade
+      names, trademarks, service marks, or product names of the Licensor,
+      except as required for reasonable and customary use in describing the
+      origin of the Work and reproducing the content of the NOTICE file.
+
+   7. Disclaimer of Warranty. Unless required by applicable law or
+      agreed to in writing, Licensor provides the Work (and each
+      Contributor provides its Contributions) on an "AS IS" BASIS,
+      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
+      implied, including, without limitation, any warranties or conditions
+      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
+      PARTICULAR PURPOSE. You are solely responsible for determining the
+      appropriateness of using or redistributing the Work and assume any
+      risks associated with Your exercise of permissions under this License.
+
+   8. Limitation of Liability. In no event and under no legal theory,
+      whether in tort (including negligence), contract, or otherwise,
+      unless required by applicable law (such as deliberate and grossly
+      negligent acts) or agreed to in writing, shall any Contributor be
+      liable to You for damages, including any direct, indirect, special,
+      incidental, or consequential damages of any character arising as a
+      result of this License or out of the use or inability to use the
+      Work (including but not limited to damages for loss of goodwill,
+      work stoppage, computer failure or malfunction, or any and all
+      other commercial damages or losses), even if such Contributor
+      has been advised of the possibility of such damages.
+
+   9. Accepting Warranty or Additional Liability. While redistributing
+      the Work or Derivative Works thereof, You may choose to offer,
+      and charge a fee for, acceptance of support, warranty, indemnity,
+      or other liability obligations and/or rights consistent with this
+      License. However, in accepting such obligations, You may act only
+      on Your own behalf and on Your sole responsibility, not on behalf
+      of any other Contributor, and only if You agree to indemnify,
+      defend, and hold each Contributor harmless for any liability
+      incurred by, or claims asserted against, such Contributor by reason
+      of your accepting any such warranty or additional liability.
+
+   END OF TERMS AND CONDITIONS
+
+   APPENDIX: How to apply the Apache License to your work.
+
+      To apply the Apache License to your work, attach the following
+      boilerplate notice, with the fields enclosed by brackets "[]"
+      replaced with your own identifying information. (Don't include
+      the brackets!)  The text should be enclosed in the appropriate
+      comment syntax for the file format. We also recommend that a
+      file or class name and description of purpose be included on the
+      same "printed page" as the copyright notice for easier
+      identification within third-party archives.
+
+   Copyright [yyyy] [name of copyright owner]
+
+   Licensed under the Apache License, Version 2.0 (the "License");
+   you may not use this file except in compliance with the License.
+   You may obtain a copy of the License at
+
+       http://www.apache.org/licenses/LICENSE-2.0
+
+   Unless required by applicable law or agreed to in writing, software
+   distributed under the License is distributed on an "AS IS" BASIS,
+   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+   See the License for the specific language governing permissions and
+   limitations under the License.
diff --git a/client/ruby/solr-ruby/README b/client/ruby/solr-ruby/README
new file mode 100644
index 0000000..eb73606
--- /dev/null
+++ b/client/ruby/solr-ruby/README
@@ -0,0 +1,56 @@
+solrb exposes the power of Solr as a Ruby  DSL (domain specific language).
+
+  Visit the solrb wiki for more information: http://wiki.apache.org/solr/solrb
+
+USAGE 
+
+First launch Solr:
+
+  cd solr
+  java -jar start.jar
+
+In a separate shell, launch {{{irb -Ilib}}}:
+
+  require 'solr'  # load the library
+  include Solr    # Allow Solr:: to be omitted from class/module references
+
+  # connect to the solr instance
+  conn = Connection.new('http://localhost:8983/solr', :autocommit => :on)
+
+  # add a document to the index
+  conn.add(:id => 123, :title_text => 'Lucene in Action')
+
+  # update the document
+  conn.update(:id => 123, :title_text => 'Solr in Action')
+
+  # print out the first hit in a query for 'action'
+  response = conn.query('action')
+  print response.hits[0]
+
+  # iterate through all the hits for 'action'
+  conn.query('action') do |hit|
+    puts hit.inspect
+  end
+
+  # delete document by id
+  conn.delete(123)
+
+INSTALLATION
+
+First run the tests:
+
+  rake
+  
+then build the gem:
+
+  rake package
+
+and install the versioned gem:
+
+  gem install pkg/solr-x.x.x.gem 
+
+LICENSE
+
+This package is licensed using the Apache Software License 2.0.
+
+<http://www.apache.org/licenses/LICENSE-2.0>
diff --git a/client/ruby/solr-ruby/Rakefile b/client/ruby/solr-ruby/Rakefile
new file mode 100644
index 0000000..fe09ac6
--- /dev/null
+++ b/client/ruby/solr-ruby/Rakefile
@@ -0,0 +1,181 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+
+# the default task is to run both the unit and functional tests
+# functional tests require that a solr test server is running
+# but this Rakefil should take care of starting and stopping it 
+# for you
+# 
+# if you just want to run unit tests:
+#
+#    rake test_units
+#
+# and if you just want to run functional tests
+#
+#    rake test_functionals
+#
+# if you would like to see solr startup messages on STDERR
+# when starting solr test server during functional tests use:
+# 
+#    rake SOLR_CONSOLE=true
+
+SOLRB_VERSION = '0.0.1'
+
+require 'rubygems'
+require 'rake'
+require 'rake/testtask'
+require 'rake/rdoctask'
+require 'rake/packagetask'
+require 'rake/gempackagetask'
+require 'test/functional/test_solr_server'
+
+task :default => [:test_units]
+
+spec = Gem::Specification.new do |s|
+  s.name = 'solrb'
+  s.version = SOLRB_VERSION
+  s.author = 'Apache Solr'
+  s.email = 'solr-user@lucene.apache.org'
+  s.homepage = 'http://wiki.apache.org/solr/Flare'
+  s.platform = Gem::Platform::RUBY
+  s.summary = 'Ruby library for working with Apache Solr'
+  
+  # Omit functional tests from gem for now, as that requires a Solr instance
+  s.files = Dir.glob("lib/**/*").concat(Dir.glob("test/unit/**/*"))
+  s.require_path = 'lib'
+  s.autorequire = 'solr'
+  s.has_rdoc = true
+end
+
+namespace :gem do
+  Rake::GemPackageTask.new(spec) do |pkg|
+    pkg.need_zip = true
+    pkg.need_tar = true
+    pkg.package_dir = "pkg/gem"
+  end
+end
+
+namespace :rails do
+  desc "Creates rails plugin structure and distributable packages. init.rb is created and removed on the fly."
+  task :package => "init.rb" do
+    File.rm_f("init.rb")
+  end
+  Rake::PackageTask.new("solrb-rails", SOLRB_VERSION) do |pkg|
+    pkg.need_zip = true
+    pkg.need_tar = true
+    pkg.package_dir = "pkg/rails"
+    pkg.package_files.include("lib/**/*.rb", "test/unit/**/*.rb", "init.rb", "LICENSE.txt", "README")
+  end
+  
+  file "init.rb" do
+    open("init.rb", "w") do |file|
+      file.puts LICENSE
+      file.puts "require 'solr.rb'"
+    end
+  end
+  
+  desc "Install the Rails plugin version into the vendor/plugins dir. Need to set PLUGINS_DIR environment variable."
+  task :install_solrb => :package do
+    plugins_dir = ENV["PLUGINS_DIR"] or raise "You must set PLUGINS_DIR"
+    File.cp_r(File.join("pkg","rails", "solrb-rails-#{SOLRB_VERSION}/"), File.join(plugins_dir, "solrb-rails-#{SOLRB_VERSION}/"))
+  end
+end
+
+task :package => ["rails:package", "gem:package"]
+task :repackage => [:clobber_package, :package]
+task :clobber_package => ["rails:clobber_package", "gem:clobber_package"] do rm_r "pkg" rescue nil end
+task :clobber => [:clobber_package]
+
+desc "Generate rdoc documentation"
+Rake::RDocTask.new('doc') do |rd|
+  rd.rdoc_files.include("lib/**/*.rb")
+  rd.rdoc_files.include('README', 'CHANGES.txt', 'LICENSE.txt')
+  rd.main = 'README'
+  rd.rdoc_dir = 'doc'
+end
+
+desc "Run unit tests"
+Rake::TestTask.new(:test_units) do |t|
+  t.pattern = 'test/unit/*_test.rb'
+  t.verbose = true
+  t.ruby_opts = ['-r solr', '-r test/unit', '-Itest/unit']
+end
+
+# NOTE: test_functionals does not work standalone currently.  It needs the TestSolrServer wrapper in the :test task
+Rake::TestTask.new(:test_functionals) do |t|
+  t.pattern = 'test/functional/*_test.rb'
+  t.verbose = true
+  t.ruby_opts = ['-r solr', '-r test/unit', '-Itest/functional']
+end
+
+desc "Run unit and functional tests"
+task :test => [:test_units] do
+  rm_rf "test/data"  # remove functional test temp data directory
+  
+  # wrap functional tests with a test-specific Solr server
+  got_error = TestSolrServer.wrap(:quiet => ENV['SOLR_CONSOLE'] ? false : true) do
+    Rake::Task[:test_functionals].invoke 
+  end
+
+  raise "test failures" if got_error
+end
+
+# TODO: consider replacing system() to rcov with the included
+#       Rake task: http://eigenclass.org/hiki.rb?cmd=view&p=rcov+FAQ&key=rake
+namespace :test do
+  desc 'Measures test coverage'
+  # borrowed from here: http://clarkware.com/cgi/blosxom/2007/01/05#RcovRakeTask
+  task :coverage do
+    rm_rf "coverage"
+    rm_rf "coverage.data"
+    TestSolrServer.wrap(:quiet => ENV['SOLR_CONSOLE'] ? false : true) do
+      system("rcov --aggregate coverage.data --text-summary -Ilib:test/functional test/functional/*_test.rb")
+    end
+    system("rcov --aggregate coverage.data --text-summary -Ilib:test/unit test/unit/*_test.rb")
+    system("open coverage/index.html") if PLATFORM['darwin']
+  end
+end
+
+
+def egrep(pattern)
+  Dir['**/*.rb'].each do |fn|
+    count = 0
+    open(fn) do |f|
+      while line = f.gets
+	count += 1
+	if line =~ pattern
+	  puts "#{fn}:#{count}:#{line}"
+	end
+      end
+    end
+  end
+end
+
+desc "Report TODO/FIXME/TBD tags in the code"
+task :todo do
+  egrep /#.*(FIXME|TODO|TBD)/
+end
+
+LICENSE = <<STR
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+STR
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/admin-extra.html b/client/ruby/solr-ruby/examples/delicious_library/conf/admin-extra.html
new file mode 100644
index 0000000..aa739da
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/admin-extra.html
@@ -0,0 +1,31 @@
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- The content of this page will be statically included into the top
+of the admin page.  Uncomment this as an example to see there the content
+will show up.
+
+<hr>
+<i>This line will appear before the first table</i>
+<tr>
+<td colspan="2">
+This row will be appended to the end of the first table
+</td>
+</tr>
+<hr>
+
+-->
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/protwords.txt b/client/ruby/solr-ruby/examples/delicious_library/conf/protwords.txt
new file mode 100644
index 0000000..1dfc0ab
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/protwords.txt
@@ -0,0 +1,21 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# Use a protected word file to protect against the stemmer reducing two
+# unrelated words to the same base word.
+
+# Some non-words that normally won't be encountered,
+# just to test that they won't be stemmed.
+dontstems
+zwhacky
+
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/schema.xml b/client/ruby/solr-ruby/examples/delicious_library/conf/schema.xml
new file mode 100755
index 0000000..74d39c4
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/schema.xml
@@ -0,0 +1,236 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- This is the Solr schema file. This file should be named "schema.xml" and
+ should be in the conf directory under the solr home
+ (i.e. ./solr/conf/schema.xml by default) 
+ or located where the classloader for the Solr webapp can find it.
+
+ For more information, on how to customize this file, please see
+ http://wiki.apache.org/solr/SchemaXml
+-->
+
+<schema name="flare" version="1.1">
+  <!-- attribute "name" is the name of this schema and is only used for display purposes.
+       Applications should change this to reflect the nature of the search collection.
+       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
+       not normally be changed by applications.
+       1.0: multiValued attribute did not exist, all fields are multiValued by nature
+       1.1: multiValued attribute introduced, false by default -->
+
+  <types>
+    <!-- field type definitions. The "name" attribute is
+       just a label to be used by field definitions.  The "class"
+       attribute and any other attributes determine the real
+       behavior of the fieldtype.
+         Class names starting with "solr" refer to java classes in the
+       org.apache.solr.analysis package.
+    -->
+
+    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
+       - StrField and TextField support an optional compressThreshold which
+       limits compression (if enabled in the derived fields) to values which
+       exceed a certain size (in characters).
+    -->
+    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- boolean type: "true" or "false" -->
+    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- The optional sortMissingLast and sortMissingFirst attributes are
+         currently supported on types that are sorted internally as strings.
+       - If sortMissingLast="true", then a sort on this field will cause documents
+         without the field to come after documents with the field,
+         regardless of the requested sort order (asc or desc).
+       - If sortMissingFirst="true", then a sort on this field will cause documents
+         without the field to come before documents with the field,
+         regardless of the requested sort order.
+       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
+         then default lucene sorting will be used which places docs without the
+         field first in an ascending sort and last in a descending sort.
+    -->    
+
+
+    <!-- numeric field types that store and index the text
+         value verbatim (and hence don't support range queries, since the
+         lexicographic ordering isn't equal to the numeric ordering) -->
+    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
+    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
+    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
+    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
+
+
+    <!-- Numeric field types that manipulate the value into
+         a string value that isn't human-readable in its internal form,
+         but with a lexicographic ordering the same as the numeric ordering,
+         so that range queries work correctly. -->
+    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
+
+
+    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
+         is a more restricted form of the canonical representation of dateTime
+         http://www.w3.org/TR/xmlschema-2/#dateTime    
+         The trailing "Z" designates UTC time and is mandatory.
+         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
+         All other components are mandatory.
+
+         Expressions can also be used to denote calculations that should be
+         performed relative to "NOW" to determine the value, ie...
+
+               NOW/HOUR
+                  ... Round to the start of the current hour
+               NOW-1DAY
+                  ... Exactly 1 day prior to now
+               NOW/DAY+6MONTHS+3DAYS
+                  ... 6 months and 3 days in the future from the start of
+                      the current day
+                      
+         Consult the DateField javadocs for more information.
+      -->
+    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- solr.TextField allows the specification of custom text analyzers
+         specified as a tokenizer and a list of token filters. Different
+         analyzers may be specified for indexing and querying.
+
+         The optional positionIncrementGap puts space between multiple fields of
+         this type on the same document, with the purpose of preventing false phrase
+         matching across fields.
+
+         For more info on customizing your analyzer chain, please see
+         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
+     -->
+
+    <!-- One can also specify an existing Analyzer class that has a
+         default constructor via the class attribute on the analyzer element
+    <fieldtype name="text_greek" class="solr.TextField">
+      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
+    </fieldType>
+    -->
+
+    <!-- A text field that only splits on whitespace for exact matching of words -->
+    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+      </analyzer>
+    </fieldtype>
+
+    <!-- A text field that uses WordDelimiterFilter to enable splitting and matching of
+        words on case-change, alpha numeric boundaries, and non-alphanumeric chars,
+        so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".
+        Synonyms and stopwords are customized by external files, and stemming is enabled.
+        Duplicate tokens at the same position (which may result from Stemmed Synonyms or
+        WordDelim parts) are removed.
+        -->
+    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
+      <analyzer type="index">
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <!-- in this example, we will only use synonyms at query time
+        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
+        -->
+        <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/> -->
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <!-- <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/> -->
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+      <analyzer type="query">
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <!-- <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/> -->
+        <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/> -->
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <!-- <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/> -->
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+
+    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
+         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
+    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
+        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+ </types>
+
+
+ <fields>
+   <!-- Valid attributes for fields:
+     name: mandatory - the name for the field
+     type: mandatory - the name of a previously defined type from the <types> section
+     indexed: true if this field should be indexed (searchable or sortable)
+     stored: true if this field should be retrievable
+     compressed: [false] if this field should be stored using gzip compression
+       (this will only apply if the field type is compressable; among
+       the standard field types, only TextField and StrField are)
+     multiValued: true if this field may contain multiple values per document
+     omitNorms: (expert) set to true to omit the norms associated with
+       this field (this disables length normalization and index-time
+       boosting for the field, and saves some memory).  Only full-text
+       fields or fields that need an index-time boost need norms.
+   -->
+
+   <field name="id" type="string" indexed="true" stored="true"/>
+
+   <!-- catchall field, containing all other searchable text fields (implemented
+        via copyField further on in this schema  -->
+   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
+
+   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
+        will be used if the name matches any of the patterns.
+        RESTRICTION: the glob-like pattern in the name attribute must have
+        a "*" only at the start or the end.
+        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
+        Longer patterns will be matched first.  if equal size patterns
+        both match, the first appearing in the schema will be used.  -->
+   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true" multiValued="true"/>
+   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true" multiValued="true"/>
+ </fields>
+
+ <!-- field to use to determine and enforce document uniqueness. -->
+ <uniqueKey>id</uniqueKey>
+
+ <!-- field for the QueryParser to use when an explicit fieldname is absent -->
+ <defaultSearchField>text</defaultSearchField>
+
+ <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
+ <solrQueryParser defaultOperator="AND"/>
+
+  <!-- copyField commands copy one field to another at the time a document
+        is added to the index.  It's used either to index the same field differently,
+        or to add multiple fields to the same field for easier/faster searching.  -->
+ <copyField source="*_text" dest="text"/>
+
+ <!-- Similarity is the scoring routine for each document vs. a query.
+      A custom similarity may be specified here, but the default is fine
+      for most applications.  -->
+ <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
+
+</schema>
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/scripts.conf b/client/ruby/solr-ruby/examples/delicious_library/conf/scripts.conf
new file mode 100644
index 0000000..e993bbf
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/scripts.conf
@@ -0,0 +1,24 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+user=
+solr_hostname=localhost
+solr_port=8983
+rsyncd_port=18983
+data_dir=
+webapp_name=solr
+master_host=
+master_data_dir=
+master_status_dir=
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/solrconfig.xml b/client/ruby/solr-ruby/examples/delicious_library/conf/solrconfig.xml
new file mode 100755
index 0000000..ac3416b
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/solrconfig.xml
@@ -0,0 +1,278 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<config>
+
+  <!-- Used to specify an alternate directory to hold all index data
+       other than the default ./data under the Solr home.
+       If replication is in use, this should match the replication configuration. -->
+  <!--
+  <dataDir>./solr/data</dataDir>
+  -->
+
+  <indexDefaults>
+   <!-- Values here affect all index writers and act as a default unless overridden. -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+    <writeLockTimeout>1000</writeLockTimeout>
+    <commitLockTimeout>10000</commitLockTimeout>
+  </indexDefaults>
+
+  <mainIndex>
+    <!-- options specific to the main on-disk lucene index -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+
+    <!-- If true, unlock any held write or commit locks on startup. 
+         This defeats the locking mechanism that allows multiple
+         processes to safely access a lucene index, and should be
+         used with care. -->
+    <unlockOnStartup>false</unlockOnStartup>
+  </mainIndex>
+
+  <!-- the default high-performance update handler -->
+  <updateHandler class="solr.DirectUpdateHandler2">
+
+    <!-- A prefix of "solr." for class names is an alias that
+         causes solr to search appropriate packages, including
+         org.apache.solr.(search|update|request|core|analysis)
+     -->
+
+    <!-- autocommit pending docs if certain criteria are met 
+    <autoCommit> 
+      <maxDocs>10000</maxDocs>
+    </autoCommit>
+    -->
+
+    <!-- The RunExecutableListener executes an external command.
+         exe - the name of the executable to run
+         dir - dir to use as the current working directory. default="."
+         wait - the calling thread waits until the executable returns. default="true"
+         args - the arguments to pass to the program.  default=nothing
+         env - environment variables to set.  default=nothing
+      -->
+    <!-- A postCommit event is fired after every commit or optimize command
+    <listener event="postCommit" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
+      <arr name="env"> <str>MYVAR=val1</str> </arr>
+    </listener>
+    -->
+    <!-- A postOptimize event is fired only after every optimize command, useful
+         in conjunction with index distribution to only distribute optimized indicies 
+    <listener event="postOptimize" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+    </listener>
+    -->
+
+  </updateHandler>
+
+
+  <query>
+    <!-- Maximum number of clauses in a boolean query... can affect
+        range or prefix queries that expand to big boolean
+        queries.  An exception is thrown if exceeded.  -->
+    <maxBooleanClauses>1024</maxBooleanClauses>
+
+    
+    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
+         unordered sets of *all* documents that match a query.
+         When a new searcher is opened, its caches may be prepopulated
+         or "autowarmed" using data from caches in the old searcher.
+         autowarmCount is the number of items to prepopulate.  For LRUCache,
+         the autowarmed items will be the most recently accessed items.
+       Parameters:
+         class - the SolrCache implementation (currently only LRUCache)
+         size - the maximum number of entries in the cache
+         initialSize - the initial capacity (number of entries) of
+           the cache.  (seel java.util.HashMap)
+         autowarmCount - the number of entries to prepopulate from
+           and old cache.
+         -->
+    <filterCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="256"/>
+
+   <!-- queryResultCache caches results of searches - ordered lists of
+         document ids (DocList) based on a query, a sort, and the range
+         of documents requested.  -->
+    <queryResultCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="256"/>
+
+  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
+       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
+    <documentCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="0"/>
+
+    <!-- If true, stored fields that are not requested will be loaded lazily.
+    -->
+    <enableLazyFieldLoading>false</enableLazyFieldLoading>
+
+    <!-- Example of a generic cache.  These caches may be accessed by name
+         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
+         The purpose is to enable easy caching of user/application level data.
+         The regenerator argument should be specified as an implementation
+         of solr.search.CacheRegenerator if autowarming is desired.  -->
+    <!--
+    <cache name="myUserCache"
+      class="solr.LRUCache"
+      size="4096"
+      initialSize="1024"
+      autowarmCount="1024"
+      regenerator="org.mycompany.mypackage.MyRegenerator"
+      />
+    -->
+
+   <!-- An optimization that attempts to use a filter to satisfy a search.
+         If the requested sort does not include score, then the filterCache
+         will be checked for a filter matching the query. If found, the filter
+         will be used as the source of document ids, and then the sort will be
+         applied to that.
+    <useFilterForSortedQuery>true</useFilterForSortedQuery>
+   -->
+
+   <!-- An optimization for use with the queryResultCache.  When a search
+         is requested, a superset of the requested number of document ids
+         are collected.  For example, if a search for a particular query
+         requests matching documents 10 through 19, and queryWindowSize is 50,
+         then documents 0 through 50 will be collected and cached.  Any further
+         requests in that range can be satisfied via the cache.  -->
+    <queryResultWindowSize>10</queryResultWindowSize>
+
+    <!-- This entry enables an int hash representation for filters (DocSets)
+         when the number of items in the set is less than maxSize.  For smaller
+         sets, this representation is more memory efficient, more efficient to
+         iterate over, and faster to take intersections.  -->
+    <HashDocSet maxSize="3000" loadFactor="0.75"/>
+
+
+    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
+         into cached filters if the number of docs selected by the clause exceeds
+         the threshold (represented as a fraction of the total index) -->
+    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
+
+
+    <!-- a newSearcher event is fired whenever a new searcher is being prepared
+         and there is a current searcher handling requests (aka registered). -->
+    <!-- QuerySenderListener takes an array of NamedList and executes a
+         local query request for each NamedList in sequence. -->
+    <!--
+    <listener event="newSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- a firstSearcher event is fired whenever a new searcher is being
+         prepared but there is no current registered searcher to handle
+         requests or to gain autowarming data from. -->
+    <!--
+    <listener event="firstSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- If a search request comes in and there is no current registered searcher,
+         then immediately register the still warming searcher and use it.  If
+         "false" then all requests will block until the first searcher is done
+         warming. -->
+    <useColdSearcher>false</useColdSearcher>
+
+  </query>
+
+
+  <!-- requestHandler plugins... incoming queries will be dispatched to the
+     correct handler based on the qt (query type) param matching the
+     name of registered handlers.
+     The "standard" request handler is the default and will be used if qt
+     is not specified in the request.
+  -->
+  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
+  <requestHandler name="standard" class="solr.StandardRequestHandler">
+    <!-- default values for query parameters -->
+     <lst name="defaults">
+       <str name="echoParams">explicit</str>
+       <!-- 
+       <int name="rows">10</int>
+       <str name="fl">*</str>
+       <str name="version">2.1</str>
+        -->
+     </lst>
+  </requestHandler>
+
+  <!-- queryResponseWriter plugins... query responses will be written using the
+    writer specified by the 'wt' request parameter matching the name of a registered
+    writer.
+    The "standard" writer is the default and will be used if 'wt' is not specified 
+    in the request. XMLResponseWriter will be used if nothing is specified here.
+    The json, python, and ruby writers are also available by default.
+
+    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
+    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
+    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
+    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
+
+    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
+  -->
+
+  <!-- XSLT response writer transforms the XML output by any xslt file found
+       in Solr's conf/xslt directory.  Changes to xslt files are checked for
+       every xsltCacheLifetimeSeconds.  
+   -->
+  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
+    <int name="xsltCacheLifetimeSeconds">5</int>
+  </queryResponseWriter> 
+    
+  <!-- config for the admin interface --> 
+  <admin>
+    <defaultQuery>solr</defaultQuery>
+    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
+    <!-- pingQuery should be "URLish" ...
+         &amp; separated key=val pairs ... but there shouldn't be any
+         URL escaping of the values -->
+    <pingQuery>
+     q=solr
+    </pingQuery>
+    <!-- configure a healthcheck file for servers behind a loadbalancer
+    <healthcheck type="file">server-enabled</healthcheck>
+    -->
+  </admin>
+
+</config>
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/stopwords.txt b/client/ruby/solr-ruby/examples/delicious_library/conf/stopwords.txt
new file mode 100644
index 0000000..8433c83
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/stopwords.txt
@@ -0,0 +1,57 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# a couple of test stopwords to test that the words are really being
+# configured from this file:
+stopworda
+stopwordb
+
+#Standard english stop words taken from Lucene's StopAnalyzer
+an
+and
+are
+as
+at
+be
+but
+by
+for
+if
+in
+into
+is
+it
+no
+not
+of
+on
+or
+s
+such
+t
+that
+the
+their
+then
+there
+these
+they
+this
+to
+was
+will
+with
+
diff --git a/client/ruby/solr-ruby/examples/delicious_library/conf/synonyms.txt b/client/ruby/solr-ruby/examples/delicious_library/conf/synonyms.txt
new file mode 100644
index 0000000..b0e31cb
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/conf/synonyms.txt
@@ -0,0 +1,31 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+#some test synonym mappings unlikely to appear in real input text
+aaa => aaaa
+bbb => bbbb1 bbbb2
+ccc => cccc1,cccc2
+a\=>a => b\=>b
+a\,a => b\,b
+fooaaa,baraaa,bazaaa
+
+# Some synonym groups specific to this example
+GB,gib,gigabyte,gigabytes
+MB,mib,megabyte,megabytes
+Television, Televisions, TV, TVs
+#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
+#after us won't split it into two words.
+
+# Synonym mappings can be used for spelling correction too
+pixima => pixma
+
diff --git a/client/ruby/solr-ruby/examples/delicious_library/dl_importer.rb b/client/ruby/solr-ruby/examples/delicious_library/dl_importer.rb
new file mode 100755
index 0000000..e7aeffb
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/dl_importer.rb
@@ -0,0 +1,78 @@
+#!/usr/bin/env ruby
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# TODO: distill common shell script needs into common file for parsing parameters for Solr URL, input filename, -debug, etc
+#       script/runner or script/console-like, from Rails.  A data mapper would be a great generalizable piece.
+
+require 'solr'
+
+solr_url = ENV["SOLR_URL"] || "http://localhost:8983/solr"
+dl_filename = ARGV[0]
+debug = ARGV[1] == "-debug"
+
+solr = Solr::Connection.new(solr_url)
+
+lines = IO.readlines(dl_filename)
+headers = lines[0].split("\t").collect{|h| h.chomp}
+puts headers.join(','),"-----" if debug
+
+# Exported column names
+# medium,associatedURL,boxHeightInInches,boxLengthInInches,boxWeightInPounds,boxWidthInInches,
+# scannednumber,upc,asin,country,title,fullTitle,series,numberInSeries,edition,aspect,mediacount,
+# genre,price,currentValue,language,netrating,description,owner,publisher,published,rare,purchaseDate,rating,
+# used,signed,hasExperienced,notes,location,paid,condition,notowned,author,illustrator,pages
+mapping = {
+  :id => :upc,
+  :medium_facet => :medium,
+  :country_facet => :country,
+  :signed_facet => :signed,
+  :rating_facet => :netrating,
+  :language_facet => :language,
+  :genre_facet => Proc.new {|data| data.genre.split('/').map {|s| s.strip}},
+  :title_text => :title,
+  :full_title_text => :fullTitle,
+  :asin_text => :asin,  # TODO: schema needs a field for non-tokenized text which is not a facet
+  :notes_text => :notes,
+  :publisher_facet => :publisher,
+  :description_text => :description,
+  :author_text => :author,
+  :pages_text => :pages,
+  :published_year_facet => Proc.new {|data| data.published.scan(/\d\d\d\d/)[0]}
+}
+
+lines[1..-1].each do |line|
+  data = headers.zip(line.split("\t").collect{|s| s.chomp})
+  def data.method_missing(key)
+    self.assoc(key.to_s)[1]
+  end
+  
+  # puts data.inspect if debug
+
+  doc = {}
+  mapping.each do |solr_name, data_column_or_proc|
+    if data_column_or_proc.is_a? Proc
+      value = data_column_or_proc.call(data)
+    else
+      value = data.send(data_column_or_proc)
+    end  
+    doc[solr_name] = value if value
+  end
+  
+  puts data.title
+  puts doc.inspect if debug
+  solr.add doc unless debug
+
+end
+
+solr.commit unless debug
+solr.optimize unless debug
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/examples/delicious_library/sample_export.txt b/client/ruby/solr-ruby/examples/delicious_library/sample_export.txt
new file mode 100644
index 0000000..938d5a0
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/delicious_library/sample_export.txt
@@ -0,0 +1,13 @@
+medium	associatedURL	boxHeightInInches	boxLengthInInches	boxWeightInPounds	boxWidthInInches	scannednumber	upc	asin	country	title	fullTitle	series	numberInSeries	edition	aspect	mediacount	genre	price	currentValue	language	netrating	description	owner	publisher	published	rare	purchaseDate	rating	used	signed	hasExperienced	notes	location	paid	condition	notowned	author	illustrator	pages
+book							9780865681743	0865681740	us	Xing Yi Nei Gong: Xing Yi Health Maintenance and Internal Strength Development	Xing Yi Nei Gong: Xing Yi Health Maintenance and Internal Strength Development				Paperback			$21.95	$14.05		4.5	This is the most complete book on the art of xing yi (hsing Yi) available. It includes the complete xing yi history and lineage going back eight generations; manuscripts handed down from famous practitioners Dai Long Bang and Li Neng Ran; 16 health maintenance and power development exercises; qigong (chi kung) exerices; xing yi long spear power training exercises; and more.		Unique Publications	1998-02-10 12:00:00 +0000		2007-02-03 02:22:25 -0500										Dan Miller/ Tim Cartmell		200
+book							0752064712459	073571245X	us	Eric Meyer on CSS: Mastering the Language of Web Design	Eric Meyer on CSS: Mastering the Language of Web Design				Paperback		Web Site Design/ Internet Publishing/ HTML - General/ jp-unknown1/ Qualifying Textbooks - Winter 2007	$45.00	$9.99		4.5	There are several other books on the market that serve as in-depth technical guides or reference books for CSS. None, however, take a more hands-on approach and use practical examples to teach readers how to solve the problems they face in designing with CSS - until now. Eric Meyer provides a variety of carefully crafted projects that teach how to use CSS and why particular methods were chosen. The web site includes all of the files needed to complete the tutorials in the book. In addition, bonus information is be posted.		New Riders Press	2002-06-28 12:00:00 +0000		2007-02-03 02:21:00 -0500										Eric A. Meyer		352
+book							9780961454739	0961454733	us	Art & Fear	Art & Fear				Paperback		Study & Teaching/ Criticism	$12.95	$7.25		4.5	"This is a book about making art. Ordinary art. Ordinary art means something like: all art not made by Mozart. After all, art is rarely made by Mozart-like people; essentially-statistically speaking-there aren't any people like that. Geniuses get made once-a-century or so, yet good art gets made all the time, so to equate the making of art with the workings of genius removes this intimately human activity to a strangely unreachable and unknowable place. For all practical purposes making art can be examined in great detail without ever getting entangled in the very remote problems of genius."&#x2028;--from the Introduction/ Art & Fear explores the way art gets made, the reasons it often doesn't get made, and the nature of the difficulties that cause so many artists to give up along the way. The book's co-authors, David Bayles and Ted Orland, are themselves both working artists, grappling daily with the problems of making art in the real world. Their insights and observations, drawn from personal experience, provide an incisive view into the world of art as it is expeienced by artmakers themselves./ This is not your typical self-help book. This is a book written by artists, for artists -- it's about what it feels like when artists sit down at their easel or keyboard, in their studio or performance space, trying to do the work they need to do. First published in 1994, Art & Fear quickly became an underground classic. Word-of-mouth response alone-now enhanced by internet posting-has placed it among the best-selling books on artmaking and creativity nationally./ Art & Fear has attracted a remarkably diverse audience, ranging from beginning to accomplished artists in every medium, and including an exceptional concentration among students and teachers. The original Capra Press edition of Art & Fear sold 80,000 copies./ An excerpt:/ Today, more than it was however many years ago, art is hard because you have to keep after it so consistently. On so many different fronts. For so little external reward. Artists become veteran artists only by making peace not just with themselves, but with a huge range of issues. You have to find your work.../ 		Image Continuum Press	2001-04-01 12:00:00 +0000		2007-02-03 02:20:32 -0500										David Bayles/ Ted Orland		122
+book							9780135974445	0135974445	us	Agile Software Development, Principles, Patterns, and Practices	Agile Software Development, Principles, Patterns, and Practices				Hardcover		C & C++ Windows Programming/ Object-Oriented Design/ Software Development/ Qualifying Textbooks - Winter 2007	$68.20	$38.50		4.5			Prentice Hall	2002-10-15 12:00:00 +0000		2007-02-03 02:20:25 -0500										Robert C. Martin		552
+book							9780312275631	0312275633	us	Awareness: The Key to Living in Balance	Awareness: The Key to Living in Balance				Paperback		Meditation/ Mysticism/ Self-Help/ Spiritualism/ Osho/ Personal Transformation	$11.95	$7.61		4.5	Underlying all meditation techniques, including martial arts-and in fact underlying all great athletic performances-is a quality of being awake and present to the moment, a quality that Osho calls awareness. Once we can identify and understand what this quality of awareness is, we have the key to self-mastery in virtually every area of our lives.According to great masters like Lao Tzu or Buddha, most of us move through our lives like sleepwalkers. Never really present in what we are doing, never fully alert to our environment, and not even aware of what motivates us to do and say the things we do.At the same time, all of us have experienced moments of awareness-or awakening, to use another-in extraordinary circumstances. On the road, in a sudden and unexpected accident, time seems to stop and one is suddenly aware of every movement, every sound, every thought. Or in moments that touch us deeply-welcoming a new baby into the world for the first time, or being with someone at the moment of death.Awareness, says Osho, is the key to being self-directed, centered, and free in every aspect of our lives. In this book, Osho teaches how to live life more attentively, mindfully, and meditatively, with love, caring and consciousness.OSHO challenges readers to examine and break free of the conditioned belief systems and prejudices that limit their capacity to life in all its richness. He has been described by the Sunday Times of London as one of the "1000 Makers of the 20th Century" and by Sunday Mid-Day (India) as one of the ten people-along with Gandhi, Nehru, and Buddha-who have changed the destiny of India. More than a decade after his death in 1990, the influence of his teachings continues to expand, reaching seekers of all ages in virtually every country of the world.		St. Martin's Griffin	2001-12-10 12:00:00 +0000		2007-02-03 02:20:16 -0500										Osho		192
+book							9780690012903	069001290X	us	Flower, Moon, Snow: A Book of Haiku	Flower, Moon, Snow: A Book of Haiku				Library Binding		20th Century/ Japanese & Haiku/ United States	$12.89	$4.40					Crowell	1977-02-04 12:00:00 +0000		2007-02-03 02:19:27 -0500										Kazue Mizumura		48
+book							9780060958404	0060958405	us	Words and Rules: The Ingredients of Language	Words and Rules: The Ingredients of Language				Paperback		Logic & Language/ Grammar/ Linguistics/ Neuroscience/ Cognitive	$15.00	$3.50		4	Human languages are capable of expressing a literally endless number of different ideas. How do we manage it--so effortlessly that we scarcely ever stop to think about it? In Words and Rules: The Ingredients of Language, a look at the simple concepts that we use to devise works as complex as love sonnets and tax laws, renowned neuroscientist and linguist Steven Pinker shows us how. The latest linguistic research suggests that each of us stores a limited (though large) number of words and word-parts in memory and manipulates them with a much smaller number of rules to produce every writing and utterance, and Pinker explains every step of the way with engaging good humor./ Pinker's enthusiasm for the subject infects the reader, particularly as he emphasizes the relation between how we communicate and how we think. What does it mean that a small child who has never heard the word wug can tell a researcher that when one wug meets another, there are two wugs? Some rule must be telling the child that English plurals end in -s, which also explains mistakes like mouses. Is our communication linked inextricably with our thinking? Pinker says yes, and it's hard to disagree. Words and Rules is an excellent introduction to and overview of current thinking about language, and will greatly reward the careful reader with new ways of thinking about how we think, talk, and write. --Rob Lightner/ 		Harper Perennial	2000-01-15 12:00:00 +0000		2007-02-03 02:18:58 -0500										Steven Pinker		368
+book							9781592400874	1592400876	us	Eats, Shoots & Leaves: The Zero Tolerance Approach to Punctuation	Eats, Shoots & Leaves: The Zero Tolerance Approach to Punctuation				Hardcover		Essays/ Grammar/ Reference/ Writing Skills	$19.95	$1.84		4	A bona fide publishing phenomenon, Lynne Truss's now classic #1 New York Times bestseller Eats, Shoots & Leaves makes its paperback debut after selling over 3 million copies worldwide in hardcover./ We all know the basics of punctuation. Or do we? A look at most neighborhood signage tells a different story. Through sloppy usage and low standards on the Internet, in e-mail, and now text messages, we have made proper punctuation an endangered species./ In Eats, Shoots & Leaves, former editor Truss dares to say, in her delightfully urbane, witty, and very English way, that it is time to look at our commas and semicolons and see them as the wonderful and necessary things they are. This is a book for people who love punctuation and get upset when it is mishandled. From the invention of the question mark in the time of Charlemagne to George Orwell shunning the semicolon, this lively history makes a powerful case for the preservation of a system of printing conventions that is much too subtle to be mucked about with. BACKCOVER: Praise for Lynne Truss and Eats, Shoots & Leaves:&#x2028;&#x2028;Eats, Shoots & Leaves&#x201c;makes correct usage so cool that you have to admire Ms. Truss.&#x201d;&#x2028;&#x2014;Janet Maslin, The New York Times&#x2028;&#x2028;&#x201c;Witty, smart, passionate.&#x201d;&#x2028;&#x2014;Los Angeles Times Book Review, Best Books Of 2004: Nonfiction &#x2028;&#x2028;&#x201c;Who knew grammar could be so much fun?&#x201d;&#x2028;&#x2014;Newsweek&#x2028;&#x2028;&#x201c;Witty and instructive. . . . Truss is an entertaining, well-read scold in a culture that could use more scolding.&#x201d;&#x2028;&#x2014;USA Today&#x201c;Truss is William Safire crossed with John Cleese's Basil Fawlty.&#x201d;&#x2028;&#x2014;Entertainment Weekly&#x2028;&#x2028;&#x201c;Lynne Truss has done the English-speaking world a huge service.&#x201d;&#x2028;&#x2014;The Christian Science Monitor&#x2028;&#x2028;&#x201c;This book changed my life in small, perfect ways like learning how to make better coffee or fold an omelet. It's the perfect gift for anyone who cares about grammar and a gentle introduction for those who don't care enough.&#x201d;&#x2028;&#x2014;The Boston Sunday Globe&#x2028;&#x2028;&#x201c;Lynne Truss makes [punctuation] a joy to contemplate.&#x201d;&#x2028;&#x2014;Elle&#x2028;&#x2028;&#x201c;If Lynne Truss were Roman Catholic I'd nominate her for sainthood.&#x201d; &#x2014;Frank McCourt, author of Angela's Ashes&#x2028;&#x2028;&#x201c;Truss's scholarship is impressive and never dry.&#x201d;&#x2028;&#x2014;Edmund Morris, The New York Times Book Review/ 		Gotham	2004-04-12 12:00:00 +0000		2007-02-03 02:18:24 -0500										Lynne Truss		209
+book							9780142000281	0142000280	us	Getting Things Done: The Art of Stress-Free Productivity	Getting Things Done: The Art of Stress-Free Productivity				Paperback		Health & Stress/ Time Management/ Guides/ Labor & Industrial Relations/ Motivational/ Office Skills/ Creativity/ Self-Esteem/ Stress Management	$15.00	$7.01		4.5	With first-chapter allusions to martial arts, "flow," "mind like water," and other concepts borrowed from the East (and usually mangled), you'd almost think this self-helper from David Allen should have been called Zen and the Art of Schedule Maintenance./ Not quite. Yes, Getting Things Done offers a complete system for downloading all those free-floating gotta-do's clogging your brain into a sophisticated framework of files and action lists--all purportedly to free your mind to focus on whatever you're working on. However, it still operates from the decidedly Western notion that if we could just get really, really organized, we could turn ourselves into 24//7 productivity machines. (To wit, Allen, whom the New Economy bible Fast Company has dubbed "the personal productivity guru," suggests that instead of meditating on crouching tigers and hidden dragons while you wait for a plane, you should unsheathe that high-tech saber known as the cell phone and attack that list of calls you need to return.)/ As whole-life-organizing systems go, Allen's is pretty good, even fun and therapeutic. It starts with the exhortation to take every unaccounted-for scrap of paper in your workstation that you can't junk, The next step is to write down every unaccounted-for gotta-do cramming your head onto its own scrap of paper. Finally, throw the whole stew into a giant "in-basket"/ That's where the processing and prioritizing begin; in Allen's system, it get a little convoluted at times, rife as it is with fancy terms, subterms, and sub-subterms for even the simplest concepts. Thank goodness the spine of his system is captured on a straightforward, one-page flowchart that you can pin over your desk and repeatedly consult without having to refer back to the book. That alone is worth the purchase price. Also of value is Allen's ingenious Two-Minute Rule: if there's anything you absolutely must do that you can do right now in two minutes or less, then do it now, thus freeing up your time and mind tenfold over the long term. It's commonsense advice so obvious that most of us completely overlook it, much to our detriment; Allen excels at dispensing such wisdom in this useful, if somewhat belabored, self-improver aimed at everyone from CEOs to soccer moms (who we all know are more organized than most CEOs to start with). --Timothy Murphy/ 		Penguin (Non-Classics)	2002-12-31 12:00:00 +0000		2007-02-03 02:16:57 -0500										David Allen		267
+book							9780140195682	0140195688	us	Sitting: A Guide to Buddhist Meditation	Sitting: A Guide to Buddhist Meditation				Paperback		Rituals & Practice	$12.00	$2.90		4.5			Penguin (Non-Classics)	1998-05-01 12:00:00 +0000		2007-02-03 00:20:13 -0500										Diana St. Ruth		96
+book							9780060922245	0060922249	us	Care of the Soul : A Guide for Cultivating Depth and Sacredness in Everyday Life	Care of the Soul : A Guide for Cultivating Depth and Sacredness in Everyday Life				Paperback		Personal Transformation/ New Age/ Spiritual/ Pastoral Theology	$14.00	$0.01		4	Care of the Soul is considered to be one of the best primers for soul work ever written. Thomas Moore, an internationally renowned theologian and former Catholic monk, offers a philosophy for living that involves accepting our humanity rather than struggling to transcend it. By nurturing the soul in everyday life, Moore shows how to cultivate dignity, peace, and depth of character. For example, in addressing the importance of daily rituals he writes, "Ritual maintains the world's holiness. As in a dream a small object may assume significance, so in a life that is animated by ritual there are no insignificant things." This is the eloquence that helped reintroduce the sacred into everyday language and contemporary values.		Harper Paperbacks	1994-01-26 12:00:00 +0000		2007-02-03 00:19:54 -0500										Thomas Moore		336
+book							9780977616602	0977616606	us	Rails Recipes (Pragmatic Programmers)	Rails Recipes (Pragmatic Programmers)				Paperback		Object-Oriented Design/ Internet	$32.95	$22.46		4.5	Rails is large, powerful, and new. How do you use it effectively? How do you harness the power? And, most important, how do you get high quality, real-world applications written?/ From the latest Ajax effects to time-saving automation tips for your development process, Rails Recipes will show you how the experts have already solved the problems you have./  &#x2022; Use generators to automate repetitive coding tasks./  &#x2022; Create sophisticated role-based authentication schemes./  &#x2022; Add live search and live preview to your site./  &#x2022; Run tests when anyone checks code in./  &#x2022; How to create tagged data the right way./  &#x2022; and many, many more.../ Owning Rails Recipes is like having the best Rails programmers sitting next to you while you code./ 		Pragmatic Bookshelf	01-06-2006		01-02-2007	3									Chad Fowler		332
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/examples/marc/marc_importer.rb b/client/ruby/solr-ruby/examples/marc/marc_importer.rb
new file mode 100755
index 0000000..f4f7376
--- /dev/null
+++ b/client/ruby/solr-ruby/examples/marc/marc_importer.rb
@@ -0,0 +1,106 @@
+#!/usr/bin/env ruby
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'marc'
+require 'solr'
+
+solr_url = ENV["SOLR_URL"] || "http://localhost:8983/solr"
+marc_filename = ARGV[0]
+file_number = marc_filename.scan(/\d\d/)
+debug = ARGV[1] == "-debug"
+
+$KCODE = 'UTF8'
+
+mapping = {
+  # :solr_field_name => String
+  # :solr_field_name => Array of Strings
+  # :solr_field_name => Proc  [Proc operates on record]
+  #    String = 3 digit control field number or 3 digit data field number + subfield letter
+  
+  :id => '001',
+  :subject_genre_facet => ['600v', '610v', '611v', '650v', '651v', '655a'], 
+  :subject_era_facet => ['650d', '650y', '651y', '655y'],
+  :subject_topic_facet => ['650a', '650b', '650x'],
+  :subject_geographic_facet => ['650c', '650z', '651a', '651x', '651z', '655z'],
+  :year_facet => Proc.new do |r|
+    extract_record_data(r,'260c').collect {|f| f.scan(/\d\d\d\d/)}.flatten
+  end,
+  :title_text => '245a',
+  :author_text => '100a',
+  :call_number_text => '050a',
+  :isbn_text => '010a',
+  :filename_facet => Proc.new {|r| file_number},
+}
+
+connection = Solr::Connection.new(solr_url)
+
+if marc_filename =~ /.gz$/
+  puts "Unzipping data file..."
+  temp_filename = "/tmp/marc_data_#{file_number}.mrc"
+  system("cp #{marc_filename} #{temp_filename}.gz")
+  system("gunzip #{temp_filename}")
+  marc_filename = temp_filename
+end
+
+reader = MARC::Reader.new(marc_filename)
+count = 0
+
+def extract_record_data(record, fields)
+  extracted_data = []
+
+  fields.each do |field|
+    tag = field[0,3]
+    
+    extracted_fields = record.find_all {|f| f.tag === tag}
+
+    extracted_fields.each do |field_instance|    
+      if tag < '010' # control field
+        extracted_data << field_instance.value rescue nil
+      else # data field
+        subfield = field[3].chr
+        extracted_data << field_instance[subfield] rescue nil
+      end
+    end
+  end
+  
+  extracted_data.compact.uniq
+end
+
+puts "Indexing #{marc_filename}..."
+for record in reader
+  doc = {}
+  mapping.each do |key,value|
+    data = nil
+    case value
+      when Proc
+        data = value.call(record)
+        
+      when String, Array
+        data = extract_record_data(record, value)
+        data = nil if data.empty?
+    end
+    
+    doc[key] = data if data
+  end
+  
+  puts doc.inspect,"------" if debug
+
+  connection.send(Solr::Request::AddDocument.new(doc)) unless debug
+  
+  count += 1
+  
+  puts count if count % 100 == 0
+end
+
+connection.send(Solr::Request::Commit.new) unless debug
+puts "Done"
diff --git a/client/ruby/solr-ruby/lib/solr.rb b/client/ruby/solr-ruby/lib/solr.rb
new file mode 100755
index 0000000..4f39679
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr.rb
@@ -0,0 +1,18 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+module Solr; end
+require 'solr/exception'
+require 'solr/request'
+require 'solr/connection'
+require 'solr/response'
+require 'solr/xml'
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/connection.rb b/client/ruby/solr-ruby/lib/solr/connection.rb
new file mode 100755
index 0000000..f62f09b
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/connection.rb
@@ -0,0 +1,160 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'net/http'
+
+# TODO: add a convenience method to POST a Solr .xml file, like Solr's example post.sh
+
+class Solr::Connection
+  attr_reader :url, :autocommit, :connection
+
+  # create a connection to a solr instance using the url for the solr
+  # application context:
+  #
+  #   conn = Solr::Connection.new("http://example.com:8080/solr")
+  #
+  # if you would prefer to have all adds/updates autocommitted, 
+  # use :autocommit => :on
+  #
+  #   conn = Solr::Connection.new('http://example.com:8080/solr', 
+  #     :autocommit => :on)
+
+  def initialize(url, opts={})
+    @url = URI.parse(url)
+    unless @url.kind_of? URI::HTTP
+      raise "invalid http url: #{url}"
+    end
+  
+    # TODO: Autocommit seems nice at one level, but it currently is confusing because
+    # only calls to Connection#add/#update/#delete, though a Connection#send(AddDocument.new(...))
+    # does not autocommit.  Maybe #send should check for the request types that require a commit and
+    # commit in #send instead of the individual methods?
+    @autocommit = opts[:autocommit] == :on
+  
+    # Not actually opening the connection yet, just setting up the persistent connection.
+    @connection = Net::HTTP.new(@url.host, @url.port)
+  end
+
+  # add a document to the index. you can pass in either a hash
+  #
+  #   conn.add(:id => 123, :title => 'Tlon, Uqbar, Orbis Tertius')
+  #
+  # or a Solr::Document
+  #
+  #   conn.add(Solr::Document.new(:id => 123, :title = 'On Writing')
+  #
+  # true/false will be returned to designate success/failure
+
+  def add(doc)
+    request = Solr::Request::AddDocument.new(doc)
+    response = send(request)
+    commit if @autocommit
+    return response.ok?
+  end
+
+  # update a document in the index (really just an alias to add)
+
+  def update(doc)
+    return add(doc)
+  end
+
+  # performs a standard query and returns a Solr::Response::Standard
+  #
+  #   response = conn.query('borges')
+  # 
+  # alternative you can pass in a block and iterate over hits
+  #
+  #   conn.query('borges') do |hit|
+  #     puts hit
+  #   end
+
+  def query(query, options={}, &action)
+    # TODO: Shouldn't this return an exception if the Solr status is not ok?  (rather than true/false).
+    create_and_send_query(Solr::Request::Standard, options.update(:query => query), &action)
+  end
+  
+  def search(query, options={}, &action)
+    create_and_send_query(Solr::Request::Dismax, options.update(:query => query), &action)
+  end
+
+  # sends a commit message to the server
+  def commit
+    response = send(Solr::Request::Commit.new)
+    return response.ok?
+  end
+
+  # sends an optimize message to the server
+  def optimize
+    response = send(Solr::Request::Optimize.new)
+    return response.ok?
+  end
+  
+  # pings the connection and returns true/false if it is alive or not
+  def ping
+    begin
+      response = send(Solr::Request::Ping.new)
+      return response.ok?
+    rescue
+      return false
+    end
+  end
+
+  # delete a document from the index using the document id
+  def delete(document_id)
+    response = send(Solr::Request::Delete.new(:id => document_id))
+    commit if @autocommit
+    response.ok?
+  end
+
+  # delete using a query
+  def delete_by_query(query)
+    response = send(Solr::Request::Delete.new(:query => query))
+    commit if @autocommit
+    response.ok?
+  end
+  
+  def info
+    send(Solr::Request::IndexInfo.new)
+  end
+  
+  # send a given Solr::Request and return a RubyResponse or XmlResponse
+  # depending on the type of request
+  def send(request)
+    data = post(request)
+    Solr::Response::Base.make_response(request, data)
+  end
+
+  # send the http post request to solr; for convenience there are shortcuts
+  # to some requests: add(), query(), commit(), delete() or send()
+  def post(request)
+    response = @connection.post(@url.path + "/" + request.handler,
+                                request.to_s,
+                                { "Content-Type" => "application/x-www-form-urlencoded; charset=utf-8" })
+  
+    case response
+    when Net::HTTPSuccess then response.body
+    else
+      response.error!
+    end
+  
+  end
+  
+private
+  
+  def create_and_send_query(klass, options = {}, &action)
+    request = klass.new(options)
+    response = send(request)
+    return response unless action
+    response.each {|hit| action.call(hit)}
+  end
+  
+end
diff --git a/client/ruby/solr-ruby/lib/solr/document.rb b/client/ruby/solr-ruby/lib/solr/document.rb
new file mode 100644
index 0000000..4f037d6
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/document.rb
@@ -0,0 +1,71 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+require 'solr/field'
+
+class Solr::Document
+  include Enumerable
+
+  # Create a new Solr::Document, optionally passing in a hash of 
+  # key/value pairs for the fields
+  #
+  #   doc = Solr::Document.new(:creator => 'Jorge Luis Borges')
+  def initialize(hash={})
+    @fields = []
+    self << hash
+  end
+
+  # Append a Solr::Field
+  #
+  #   doc << Solr::Field.new(:creator => 'Jorge Luis Borges')
+  #
+  # If you are truly lazy you can simply pass in a hash:
+  #
+  #   doc << {:creator => 'Jorge Luis Borges'}
+  def <<(fields)
+    case fields
+    when Hash
+      fields.each_pair do |name,value|
+        if value.respond_to?(:each)
+          value.each {|v| @fields << Solr::Field.new(name => v)}
+        else
+          @fields << Solr::Field.new(name => value)
+        end
+      end
+    when Solr::Field
+      @fields << fields
+    else
+      raise "must pass in Solr::Field or Hash"
+    end
+  end
+
+  # shorthand to allow hash lookups
+  #   doc['name']
+  def [](name)
+    field = @fields.find {|f| f.name == name.to_s}
+    return field.value if field
+    return nil
+  end
+
+  # shorthand to assign as a hash
+  def []=(name,value)
+    @fields << Solr::Field.new(name => value)
+  end
+
+  # convert the Document to a REXML::Element 
+  def to_xml
+    e = Solr::XML::Element.new 'doc'
+    @fields.each {|f| e.add_element(f.to_xml)}
+    return e
+  end
+end
diff --git a/client/ruby/solr-ruby/lib/solr/exception.rb b/client/ruby/solr-ruby/lib/solr/exception.rb
new file mode 100644
index 0000000..a439e67
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/exception.rb
@@ -0,0 +1,13 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Exception < Exception; end
diff --git a/client/ruby/solr-ruby/lib/solr/field.rb b/client/ruby/solr-ruby/lib/solr/field.rb
new file mode 100644
index 0000000..b252ad7
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/field.rb
@@ -0,0 +1,35 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+require 'time'
+
+class Solr::Field
+  attr_accessor :name
+  attr_accessor :value
+
+  def initialize(key_val, opts={})
+    raise "first argument must be a hash" unless key_val.kind_of? Hash
+    @name = key_val.keys[0].to_s
+    @value = key_val.values[0]
+    # Convert any Time values into UTC/XML schema format (which Solr requires).
+    @value = @value.respond_to?(:utc) ? @value.utc.xmlschema : @value.to_s
+  end
+
+  def to_xml
+    e = Solr::XML::Element.new 'field'
+    e.attributes['name'] = @name
+    e.text = @value
+    return e
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request.rb b/client/ruby/solr-ruby/lib/solr/request.rb
new file mode 100755
index 0000000..a25aaf4
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request.rb
@@ -0,0 +1,24 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+module Solr; module Request; end; end
+require 'solr/request/add_document'
+require 'solr/request/base'
+require 'solr/request/commit'
+require 'solr/request/delete'
+require 'solr/request/ping'
+require 'solr/request/select'
+require 'solr/request/standard'
+require 'solr/request/dismax'
+require 'solr/request/update'
+require 'solr/request/index_info'
+require 'solr/request/optimize'
diff --git a/client/ruby/solr-ruby/lib/solr/request/add_document.rb b/client/ruby/solr-ruby/lib/solr/request/add_document.rb
new file mode 100644
index 0000000..82835bc
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/add_document.rb
@@ -0,0 +1,63 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+require 'solr/request/base'
+require 'solr/document'
+require 'solr/request/update'
+
+class Solr::Request::AddDocument < Solr::Request::Update
+
+  # create the request, optionally passing in a Solr::Document
+  #
+  #   request = Solr::Request::AddDocument.new doc
+  #
+  # as a short cut you can pass in a Hash instead:
+  #
+  #   request = Solr::Request.new :creator => 'Jorge Luis Borges'
+  # 
+  # or an array, to add multiple documents at the same time:
+  # 
+  #   request = Solr::Request::AddDocument.new([doc1, doc2, doc3])
+    
+  def initialize(doc={})
+    @docs = []
+    if doc.is_a?(Array)
+      doc.each { |d| add_doc(d) }
+    else
+      add_doc(doc)
+    end
+  end
+
+  # returns the request as a string suitable for posting
+  
+  def to_s
+    e = Solr::XML::Element.new 'add'
+    for doc in @docs
+      e.add_element doc.to_xml
+    end
+    return e.to_s
+  end
+  
+  private
+  def add_doc(doc)
+    case doc
+    when Hash
+      @docs << Solr::Document.new(doc)
+    when Solr::Document
+      @docs << doc
+    else
+      raise "must pass in Solr::Document or Hash"
+    end
+  end
+  
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/base.rb b/client/ruby/solr-ruby/lib/solr/request/base.rb
new file mode 100644
index 0000000..2c449fe
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/base.rb
@@ -0,0 +1,29 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Request::Base
+
+  # returns either :xml or :ruby depending on what the
+  # response type is for a given request
+  
+  def response_format
+    raise "unknown request type: #{self.class}"
+  end
+
+  # returns the solr handler or url fragment that can 
+  # respond to this type of request
+  
+  def handler
+    raise "unkown request type: #{self.class}"
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/commit.rb b/client/ruby/solr-ruby/lib/solr/request/commit.rb
new file mode 100644
index 0000000..1d53076
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/commit.rb
@@ -0,0 +1,21 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+
+class Solr::Request::Commit < Solr::Request::Update
+
+  def to_s
+    Solr::XML::Element.new('commit').to_s
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/delete.rb b/client/ruby/solr-ruby/lib/solr/request/delete.rb
new file mode 100644
index 0000000..916b44a
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/delete.rb
@@ -0,0 +1,50 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+
+class Solr::Request::Delete < Solr::Request::Update
+
+  # A delete request can be for a specific document id
+  #
+  #   request = Solr::Request::Delete.new(:id => 1234)
+  #
+  # or by query:
+  #
+  #   request = Solr::Request::Delete.new(:query =>
+  #
+  def initialize(options)
+    unless options.kind_of?(Hash) and (options[:id] or options[:query])
+      raise Solr::Exception.new("must pass in :id or :query")
+    end
+    if options[:id] and options[:query]
+      raise Solr::Exception.new("can't pass in both :id and :query")
+    end
+    @document_id = options[:id]
+    @query = options[:query]
+  end
+
+  def to_s
+    delete_element = Solr::XML::Element.new('delete')
+    if @document_id
+      id_element = Solr::XML::Element.new('id')
+      id_element.text = @document_id
+      delete_element.add_element(id_element)
+    elsif @query
+      query = Solr::XML::Element.new('query')
+      query.text = @query 
+      delete_element.add_element(query)
+    end
+    delete_element.to_s
+  end
+end
+
diff --git a/client/ruby/solr-ruby/lib/solr/request/dismax.rb b/client/ruby/solr-ruby/lib/solr/request/dismax.rb
new file mode 100644
index 0000000..8b64288
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/dismax.rb
@@ -0,0 +1,43 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Request::Dismax < Solr::Request::Standard
+
+  VALID_PARAMS.replace(VALID_PARAMS + [:tie_breaker, :query_fields, :minimum_match, :phrase_fields, :phrase_slop,
+                                       :boost_query, :boost_functions])
+
+  def initialize(params)
+    super(params)
+    @sort_values = @params[:sort]
+    @params.delete(:sort)
+    @query_type = "dismax"
+  end
+  
+  def to_hash
+    hash = super
+    hash[:tie] = @params[:tie_breaker]
+    hash[:mm]  = @params[:minimum_match]
+    hash[:qf]  = @params[:query_fields]
+    hash[:pf]  = @params[:phrase_fields]
+    hash[:ps]  = @params[:phrase_slop]
+    hash[:bq]  = @params[:boost_query]
+    hash[:bf]  = @params[:boost_functions]
+    # FIXME: 2007-02-13 <coda.hale@gmail.com> --  This code is duplicated in
+    # Solr::Request::Standard. It should be refactored into a single location.
+    hash[:sort] = @sort_values.collect do |sort|
+      key = sort.keys[0]
+      "#{key.to_s} #{sort[key] == :descending ? 'desc' : 'asc'}"
+    end.join(',') if @sort_values
+    return hash
+  end
+
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/request/index_info.rb b/client/ruby/solr-ruby/lib/solr/request/index_info.rb
new file mode 100755
index 0000000..4e736c7
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/index_info.rb
@@ -0,0 +1,17 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Request::IndexInfo < Solr::Request::Select
+  def initialize
+    super('indexinfo')
+  end
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/optimize.rb b/client/ruby/solr-ruby/lib/solr/request/optimize.rb
new file mode 100755
index 0000000..3bd1fc4
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/optimize.rb
@@ -0,0 +1,21 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr/xml'
+
+class Solr::Request::Optimize < Solr::Request::Update
+
+  def to_s
+    Solr::XML::Element.new('optimize').to_s
+  end
+
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/request/ping.rb b/client/ruby/solr-ruby/lib/solr/request/ping.rb
new file mode 100644
index 0000000..6b420be
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/ping.rb
@@ -0,0 +1,36 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# TODO: Consider something lazy like this?
+# Solr::Request::Ping = Solr::Request.simple_request :format=>:xml, :handler=>'admin/ping'
+# class Solr::Request
+#   def self.simple_request(options)
+#     Class.new do 
+#       def response_format
+#         options[:format]
+#       end
+#       def handler
+#         options[:handler]
+#       end
+#     end
+#   end
+# end
+
+class Solr::Request::Ping < Solr::Request::Base
+  def response_format
+    :xml
+  end
+  
+  def handler
+    'admin/ping'
+  end
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/select.rb b/client/ruby/solr-ruby/lib/solr/request/select.rb
new file mode 100644
index 0000000..b594a52
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/select.rb
@@ -0,0 +1,54 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'erb'
+
+# "Abstract" base class, only useful with subclasses that add parameters
+class Solr::Request::Select < Solr::Request::Base
+      
+  # TODO add a constant for the all-docs query, which currently is [* TO *]
+  #      (caveat, that is all docs that have a value in the default field)
+  #      When the Lucene JAR is upgraded in Solr, the all-docs query becomes simply *
+  attr_reader :query_type
+  
+  def initialize(qt=nil)
+    @query_type = qt
+  end
+  
+  def response_format
+    :ruby
+  end
+  
+  def handler
+    'select'
+  end
+
+  def to_hash
+    return {:qt => query_type, :wt => 'ruby'}
+  end
+  
+  def to_s
+    raw_params = self.to_hash
+
+    http_params = []
+    raw_params.each do |key,value|
+      if value.respond_to? :each
+        value.each { |v| http_params << "#{key}=#{ERB::Util::url_encode(v)}" unless v.nil?}
+      else
+        http_params << "#{key}=#{ERB::Util::url_encode(value)}" unless value.nil?
+      end
+    end
+
+    http_params.join("&")
+  end
+  
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/standard.rb b/client/ruby/solr-ruby/lib/solr/request/standard.rb
new file mode 100755
index 0000000..e990cf3
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/standard.rb
@@ -0,0 +1,105 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Request::Standard < Solr::Request::Select
+
+  VALID_PARAMS = [:query, :sort, :default_field, :operator, :start, :rows,
+    :filter_queries, :field_list, :debug_query, :explain_other, :facets, :highlighting]
+  
+  def initialize(params)
+    super('standard')
+    
+    raise "Invalid parameters: #{(params.keys - VALID_PARAMS).join(',')}" unless 
+      (params.keys - VALID_PARAMS).empty?
+    
+    raise ":query parameter required" unless params[:query]
+    
+    @params = params.dup
+    
+    # Validate operator
+    if params[:operator]
+      raise "Only :and/:or operators allowed" unless 
+        [:and, :or].include?(params[:operator])
+        
+      @params[:operator] = params[:operator].to_s.upcase
+    end
+
+    # Validate start, rows can be transformed to ints
+    @params[:start] = params[:start].to_i if params[:start]
+    @params[:rows] = params[:rows].to_i if params[:rows]
+    
+    @params[:field_list] ||= ["*","score"]
+  end
+  
+  def to_hash
+    hash = {}
+    
+    # standard request param processing
+    sort = @params[:sort].collect do |sort|
+      key = sort.keys[0]
+      "#{key.to_s} #{sort[key] == :descending ? 'desc' : 'asc'}"
+    end.join(',') if @params[:sort]
+    hash[:q] = sort ? "#{@params[:query]};#{sort}" : @params[:query]
+    hash["q.op"] = @params[:operator]
+    hash[:df] = @params[:default_field]
+
+    # common parameter processing
+    hash[:start] = @params[:start]
+    hash[:rows] = @params[:rows]
+    hash[:fq] = @params[:filter_queries]
+    hash[:fl] = @params[:field_list].join(',')
+    hash[:debugQuery] = @params[:debug_query]
+    hash[:explainOther] = @params[:explain_other]
+    
+    # facet parameter processing
+    if @params[:facets]
+      # TODO need validation of all that is under the :facets Hash too
+      hash[:facet] = true
+      hash["facet.field"] = []
+      hash["facet.query"] = @params[:facets][:queries]
+      hash["facet.sort"] = (@params[:facets][:sort] == :count) if @params[:facets][:sort]
+      hash["facet.limit"] = @params[:facets][:limit]
+      hash["facet.missing"] = @params[:facets][:missing]
+      hash["facet.mincount"] = @params[:facets][:mincount]
+      hash["facet.prefix"] = @params[:facets][:prefix]
+      @params[:facets][:fields].each do |f|
+        if f.kind_of? Hash
+          key = f.keys[0]
+          value = f[key]
+          hash["facet.field"] << key
+          hash["f.#{key}.facet.sort"] = (value[:sort] == :count) if value[:sort]
+          hash["f.#{key}.facet.limit"] = value[:limit]
+          hash["f.#{key}.facet.missing"] = value[:missing]
+          hash["f.#{key}.facet.mincount"] = value[:mincount]
+          hash["f.#{key}.facet.prefix"] = value[:prefix]
+        else
+          hash["facet.field"] << f
+        end
+      end
+    end
+    
+    # highlighting parameter processing - http://wiki.apache.org/solr/HighlightingParameters
+    #TODO need to add per-field overriding to snippets, fragsize, requiredFieldMatch, formatting, and simple.pre/post
+    if @params[:highlighting]
+      hash[:hl] = true
+      hash["hl.fl"] = @params[:highlighting][:field_list].join(',') if @params[:highlighting][:field_list]
+      hash["hl.snippets"] = @params[:highlighting][:max_snippets]
+      hash["hl.requireFieldMatch"] = @params[:highlighting][:require_field_match]
+      hash["hl.simple.pre"] = @params[:highlighting][:prefix]
+      hash["hl.simple.post"] = @params[:highlighting][:suffix]
+    end
+    
+    
+    hash.merge(super.to_hash)
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/request/update.rb b/client/ruby/solr-ruby/lib/solr/request/update.rb
new file mode 100644
index 0000000..0eba1b4
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/request/update.rb
@@ -0,0 +1,22 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# a parent class for all requests that go through the solr update handler
+class Solr::Request::Update < Solr::Request::Base
+  def response_format
+    :xml
+  end
+
+  def handler
+    'update'
+  end
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response.rb b/client/ruby/solr-ruby/lib/solr/response.rb
new file mode 100755
index 0000000..b14b2c2
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response.rb
@@ -0,0 +1,24 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+module Solr; module Response; end; end
+require 'solr/response/base'
+require 'solr/response/xml'
+require 'solr/response/ruby'
+require 'solr/response/ping'
+require 'solr/response/add_document'
+require 'solr/response/standard'
+require 'solr/response/dismax'
+require 'solr/response/commit'
+require 'solr/response/delete'
+require 'solr/response/index_info'
+require 'solr/response/optimize'
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/response/add_document.rb b/client/ruby/solr-ruby/lib/solr/response/add_document.rb
new file mode 100644
index 0000000..275a879
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/add_document.rb
@@ -0,0 +1,17 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::AddDocument < Solr::Response::Xml
+  def initialize(xml)
+    super(xml)
+  end
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/base.rb b/client/ruby/solr-ruby/lib/solr/response/base.rb
new file mode 100644
index 0000000..a66d2a4
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/base.rb
@@ -0,0 +1,42 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::Base
+  attr_reader :raw_response
+
+  def initialize(raw_response)
+    @raw_response = raw_response
+  end
+
+  # factory method for creating a Solr::Response::* from 
+  # a request and the raw response content
+  def self.make_response(request, raw)
+
+    # make sure response format seems sane
+    unless [:xml, :ruby].include?(request.response_format)
+      raise Solr::Exception.new("unknown response format: #{request.response_format}" )
+    end
+
+    # TODO: Factor out this case... perhaps the request object should provide the response class instead?  Or dynamically align by class name?
+    #       Maybe the request itself could have the response handling features that get mixed in with a single general purpose response object?
+    
+    begin
+      klass = eval(request.class.name.sub(/Request/,'Response'))
+    rescue NameError
+      raise Solr::Exception.new("unknown request type: #{request.class}")
+    else
+      klass.new(raw)
+    end
+    
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/commit.rb b/client/ruby/solr-ruby/lib/solr/response/commit.rb
new file mode 100644
index 0000000..13f5268
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/commit.rb
@@ -0,0 +1,32 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'rexml/xpath'
+
+class Solr::Response::Commit < Solr::Response::Xml
+  attr_reader :ok
+
+  def initialize(xml)
+    super(xml)
+    e = REXML::XPath.first(@doc, './result')
+    if e and e.attributes['status'] == '0'
+      @ok = true
+    else
+      @ok = false
+    end
+  end
+
+  def ok?
+    @ok
+  end
+end
+
diff --git a/client/ruby/solr-ruby/lib/solr/response/delete.rb b/client/ruby/solr-ruby/lib/solr/response/delete.rb
new file mode 100644
index 0000000..0836128
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/delete.rb
@@ -0,0 +1,13 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::Delete < Solr::Response::Xml; end
diff --git a/client/ruby/solr-ruby/lib/solr/response/dismax.rb b/client/ruby/solr-ruby/lib/solr/response/dismax.rb
new file mode 100644
index 0000000..d495843
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/dismax.rb
@@ -0,0 +1,8 @@
+class Solr::Response::Dismax < Solr::Response::Standard
+  # no need for special processing
+  
+  # FIXME: 2007-02-07 <coda.hale@gmail.com> --  The existence of this class indicates that
+  # the Request/Response pair architecture is a little hinky. Perhaps we could refactor
+  # out some of the most common functionality -- Common Query Parameters, Highlighting Parameters,
+  # Simple Facet Parameters, etc. -- into modules?
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/response/index_info.rb b/client/ruby/solr-ruby/lib/solr/response/index_info.rb
new file mode 100755
index 0000000..1c5be5d
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/index_info.rb
@@ -0,0 +1,26 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::IndexInfo < Solr::Response::Ruby
+  def initialize(ruby_code)
+    super(ruby_code)
+  end
+
+  def num_docs
+    return @data['index']['numDocs']
+  end
+  
+  def field_names
+    return @data['fields'].keys
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/optimize.rb b/client/ruby/solr-ruby/lib/solr/response/optimize.rb
new file mode 100755
index 0000000..4594d90
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/optimize.rb
@@ -0,0 +1,14 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::Optimize < Solr::Response::Commit
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/lib/solr/response/ping.rb b/client/ruby/solr-ruby/lib/solr/response/ping.rb
new file mode 100644
index 0000000..92fd893
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/ping.rb
@@ -0,0 +1,28 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'rexml/xpath'
+
+class Solr::Response::Ping < Solr::Response::Xml
+
+  def initialize(xml)
+    super(xml)
+    @ok = REXML::XPath.first(@doc, './solr/ping') ? true : false
+  end
+
+  # returns true or false depending on whether the ping
+  # was successful or not
+  def ok?
+    @ok
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/ruby.rb b/client/ruby/solr-ruby/lib/solr/response/ruby.rb
new file mode 100644
index 0000000..f423aa6
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/ruby.rb
@@ -0,0 +1,42 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::Ruby < Solr::Response::Base
+  attr_reader :data
+
+  def initialize(ruby_code)
+    super(ruby_code)
+    begin
+      #TODO: what about pulling up data/header/response to ResponseBase,
+      #      or maybe a new middle class like SelectResponseBase since
+      #      all Select queries return this same sort of stuff??
+      #      XML (&wt=xml) and Ruby (&wt=ruby) responses contain exactly the same structure.
+      #      a goal of solrb is to make it irrelevant which gets used under the hood, 
+      #      but favor Ruby responses.
+      @data = eval(ruby_code)
+      @header = @data['responseHeader']
+      raise "response should be a hash" unless @data.kind_of? Hash
+      raise "response header missing" unless @header.kind_of? Hash
+    rescue SyntaxError => e
+      raise Solr::Exception.new("invalid ruby code: #{e}")
+    end
+  end
+
+  def ok?
+    @header['status'] == 0
+  end
+
+  def query_time
+    @header['QTime']
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/standard.rb b/client/ruby/solr-ruby/lib/solr/response/standard.rb
new file mode 100644
index 0000000..5f1cb7e
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/standard.rb
@@ -0,0 +1,60 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+class Solr::Response::Standard < Solr::Response::Ruby
+  FacetValue = Struct.new(:name, :value)
+  include Enumerable
+  
+  def initialize(ruby_code)
+    super(ruby_code)
+    @response = @data['response']
+    raise "response section missing" unless @response.kind_of? Hash
+  end
+
+  def total_hits
+    @response['numFound']
+  end
+
+  def start
+    @response['start']
+  end
+
+  def hits
+    @response['docs']
+  end
+
+  def max_score
+    @response['maxScore']
+  end
+  
+  def field_facets(field)
+    facets = []
+    values = @data['facet_counts']['facet_fields'][field]
+    0.upto(values.size / 2 - 1) do |i|
+      n = i * 2
+      facets << FacetValue.new(values[n], values[n+1])
+    end
+    
+    facets
+  end
+  
+  def highlighted(id, field)
+    @data['highlighting'][id.to_s][field.to_s]
+  end
+  
+  # supports enumeration of hits
+  # TODO revisit - should this iterate through *all* hits by re-requesting more?
+  def each
+    @response['docs'].each {|hit| yield hit}
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/response/xml.rb b/client/ruby/solr-ruby/lib/solr/response/xml.rb
new file mode 100644
index 0000000..df404bc
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/response/xml.rb
@@ -0,0 +1,37 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'rexml/document'
+require 'solr/exception'
+
+class Solr::Response::Xml < Solr::Response::Base
+  attr_reader :doc, :status_code, :status_message
+
+  def initialize(xml)
+    super(xml)
+    # parse the xml
+    @doc = REXML::Document.new(xml)
+    # look for the result code and string 
+    result = REXML::XPath.first(@doc, './result')
+    if result
+      @status_code =  result.attributes['status']
+      @status_message = result.text
+    end
+  rescue REXML::ParseException => e
+    raise Solr::Exception.new("invalid response xml: #{e}")
+  end
+
+  def ok?
+    return @status_code == '0'
+  end
+
+end
diff --git a/client/ruby/solr-ruby/lib/solr/xml.rb b/client/ruby/solr-ruby/lib/solr/xml.rb
new file mode 100644
index 0000000..626ecd2
--- /dev/null
+++ b/client/ruby/solr-ruby/lib/solr/xml.rb
@@ -0,0 +1,47 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+module Solr::XML
+end
+
+begin
+  
+  # If we can load rubygems and libxml-ruby...
+  require 'rubygems'
+  require 'xml/libxml'
+  
+  # then make a few modifications to XML::Node so it can stand in for REXML::Element
+  class XML::Node
+    # element.add_element(another_element) should work
+    alias_method :add_element, :<<
+
+    # element.attributes['blah'] should work
+    def attributes
+      self
+    end
+
+    # element.text = "blah" should work
+    def text=(x)
+      self << x.to_s
+    end
+  end
+  
+  # And use XML::Node for our XML generation
+  Solr::XML::Element = XML::Node
+  
+rescue LoadError => e # If we can't load either rubygems or libxml-ruby
+  
+  # Just use REXML.
+  require 'rexml/document'
+  Solr::XML::Element = REXML::Element
+  
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/script/setup.rb b/client/ruby/solr-ruby/script/setup.rb
new file mode 100755
index 0000000..b7256c9
--- /dev/null
+++ b/client/ruby/solr-ruby/script/setup.rb
@@ -0,0 +1,14 @@
+#!/usr/bin/env ruby
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+include Solr
diff --git a/client/ruby/solr-ruby/script/solrshell b/client/ruby/solr-ruby/script/solrshell
new file mode 100755
index 0000000..46938fa
--- /dev/null
+++ b/client/ruby/solr-ruby/script/solrshell
@@ -0,0 +1,18 @@
+#!/usr/bin/env ruby
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+solr_lib   = File.dirname(__FILE__) + '/../lib/solr'
+setup    = File.dirname(__FILE__) + '/setup'
+irb_name = RUBY_PLATFORM =~ /mswin32/ ? 'irb.bat' : 'irb'
+
+exec "#{irb_name} -r #{solr_lib} -r #{setup} --simple-prompt"
diff --git a/client/ruby/solr-ruby/solr/etc/LICENSE.javax.servlet.txt b/client/ruby/solr-ruby/solr/etc/LICENSE.javax.servlet.txt
new file mode 100644
index 0000000..322799e
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/LICENSE.javax.servlet.txt
@@ -0,0 +1,65 @@
+/*
+ * $Header: /cvsroot/jetty/Jetty/etc/LICENSE.javax.servlet.txt,v 1.2 2001/11/06 00:01:51 gregwilkins Exp $
+ * $Revision: 1.2 $
+ * $Date: 2001/11/06 00:01:51 $
+ *
+ * ====================================================================
+ * 
+ * The Apache Software License, Version 1.1
+ *
+ * Copyright (c) 1999-2001 The Apache Software Foundation.  All rights 
+ * reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ *
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer. 
+ *
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in
+ *    the documentation and/or other materials provided with the
+ *    distribution.
+ *
+ * 3. The end-user documentation included with the redistribution, if
+ *    any, must include the following acknowlegement:  
+ *       "This product includes software developed by the 
+ *        Apache Software Foundation (http://www.apache.org/)."
+ *    Alternately, this acknowlegement may appear in the software itself,
+ *    if and wherever such third-party acknowlegements normally appear.
+ *
+ * 4. The names "The Jakarta Project", "Tomcat", and "Apache Software
+ *    Foundation" must not be used to endorse or promote products derived
+ *    from this software without prior written permission. For written 
+ *    permission, please contact apache@apache.org.
+ *
+ * 5. Products derived from this software may not be called "Apache"
+ *    nor may "Apache" appear in their names without prior written
+ *    permission of the Apache Group.
+ *
+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+ * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
+ * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ * ====================================================================
+ *
+ * This software consists of voluntary contributions made by many
+ * individuals on behalf of the Apache Software Foundation.  For more
+ * information on the Apache Software Foundation, please see
+ * <http://www.apache.org/>.
+ *
+ */ 
+
+
+
+
+
diff --git a/client/ruby/solr-ruby/solr/etc/LICENSE.javax.xml.html b/client/ruby/solr-ruby/solr/etc/LICENSE.javax.xml.html
new file mode 100644
index 0000000..c833ff7
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/LICENSE.javax.xml.html
@@ -0,0 +1,200 @@
+<HTML>
+<HEAD>
+	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
+	<TITLE></TITLE>
+	<META NAME="GENERATOR" CONTENT="StarOffice/5.2 (Solaris Sparc)">
+	<META NAME="AUTHOR" CONTENT="douglass hall">
+	<META NAME="CREATED" CONTENT="20010109;9281200">
+	<META NAME="CHANGEDBY" CONTENT=" ">
+	<META NAME="CHANGED" CONTENT="20010112;13325200">
+</HEAD>
+<BODY>
+<P ALIGN=CENTER><FONT SIZE=4>Sun Microsystems, Inc.</FONT> <BR><FONT SIZE=4>Binary
+Code License Agreement</FONT></P>
+<P>READ THE TERMS OF THIS AGREEMENT AND ANY PROVIDED SUPPLEMENTAL
+LICENSE TERMS (COLLECTIVELY &quot;AGREEMENT&quot;) CAREFULLY BEFORE
+OPENING THE SOFTWARE MEDIA PACKAGE.&nbsp; BY OPENING THE SOFTWARE
+MEDIA PACKAGE, YOU AGREE TO THE TERMS OF THIS AGREEMENT.&nbsp; IF YOU
+ARE ACCESSING THE SOFTWARE ELECTRONICALLY, INDICATE YOUR ACCEPTANCE
+OF THESE TERMS BY SELECTING THE &quot;ACCEPT&quot; BUTTON AT THE END
+OF THIS AGREEMENT.&nbsp; IF YOU DO NOT AGREE TO ALL THESE TERMS,
+PROMPTLY RETURN THE UNUSED SOFTWARE TO YOUR PLACE OF PURCHASE FOR A
+REFUND OR, IF THE SOFTWARE IS ACCESSED ELECTRONICALLY, SELECT THE
+&quot;DECLINE&quot; BUTTON AT THE END OF THIS AGREEMENT. 
+</P>
+<P><B>1.&nbsp; LICENSE TO USE.</B>&nbsp; Sun grants you a
+non-exclusive and non-transferable license for the internal use only
+of the accompanying software and documentation and any error
+corrections provided by Sun (collectively &quot;Software&quot;), by
+the number of users and the class of computer hardware for which the
+corresponding fee has been paid. 
+</P>
+<P><B>2.&nbsp; RESTRICTIONS.&nbsp;</B> Software is confidential and
+copyrighted. Title to Software and all associated intellectual
+property rights is retained by Sun and/or its licensors.&nbsp; Except
+as specifically authorized in any Supplemental License Terms, you may
+not make copies of Software, other than a single copy of Software for
+archival purposes.&nbsp; Unless enforcement is prohibited by
+applicable law, you may not modify, decompile, or reverse engineer
+Software.&nbsp; You acknowledge that Software is not designed,
+licensed or intended for use in the design, construction, operation
+or maintenance of any nuclear facility.&nbsp; Sun disclaims any
+express or implied warranty of fitness for such uses.&nbsp; No right,
+title or interest in or to any trademark, service mark, logo or trade
+name of Sun or its licensors is granted under this Agreement. 
+</P>
+<P><B>3. LIMITED WARRANTY.</B>&nbsp; Sun warrants to you that for a
+period of ninety (90) days from the date of purchase, as evidenced by
+a copy of the receipt, the media on which Software is furnished (if
+any) will be free of defects in materials and workmanship under
+normal use.&nbsp; Except for the foregoing, Software is provided &quot;AS
+IS&quot;.&nbsp; Your exclusive remedy and Sun's entire liability
+under this limited warranty will be at Sun's option to replace
+Software media or refund the fee paid for Software. 
+</P>
+<P><B>4.&nbsp; DISCLAIMER OF WARRANTY.&nbsp;</B> UNLESS SPECIFIED IN
+THIS AGREEMENT, ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS
+AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY,
+FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE DISCLAIMED,
+EXCEPT TO THE EXTENT THAT THESE DISCLAIMERS ARE HELD TO BE LEGALLY
+INVALID. 
+</P>
+<P><B>5.&nbsp; LIMITATION OF LIABILITY.</B>&nbsp; TO THE EXTENT NOT
+PROHIBITED BY LAW, IN NO EVENT WILL SUN OR ITS LICENSORS BE LIABLE
+FOR ANY LOST REVENUE, PROFIT OR DATA, OR FOR SPECIAL, INDIRECT,
+CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED
+REGARDLESS OF THE THEORY OF LIABILITY, ARISING OUT OF OR RELATED TO
+THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF SUN HAS BEEN ADVISED
+OF THE POSSIBILITY OF SUCH DAMAGES.&nbsp; In no event will Sun's
+liability to you, whether in contract, tort (including negligence),
+or otherwise, exceed the amount paid by you for Software under this
+Agreement.&nbsp; The foregoing limitations will apply even if the
+above stated warranty fails of its essential purpose. 
+</P>
+<P><B>6.&nbsp; Termination.</B>&nbsp; This Agreement is effective
+until terminated.&nbsp; You may terminate this Agreement at any time
+by destroying all copies of Software.&nbsp; This Agreement will
+terminate immediately without notice from Sun if you fail to comply
+with any provision of this Agreement.&nbsp; Upon Termination, you
+must destroy all copies of Software. 
+</P>
+<P><B>7. Export Regulations.</B> All Software and technical data
+delivered under this Agreement are subject to US export control laws
+and may be subject to export or import regulations in other
+countries.&nbsp; You agree to comply strictly with all such laws and
+regulations and acknowledge that you have the responsibility to
+obtain such licenses to export, re-export, or import as may be
+required after delivery to you. 
+</P>
+<P><B>8.&nbsp;&nbsp; U.S. Government Restricted Rights.&nbsp;</B> If
+Software is being acquired by or on behalf of the U.S. Government or
+by a U.S. Government prime contractor or subcontractor (at any tier),
+then the Government's rights in Software and accompanying
+documentation will be only as set forth in this Agreement; this is in
+accordance with 48 CFR 227.7201 through 227.7202-4 (for Department of
+Defense (DOD) acquisitions) and with 48 CFR 2.101 and 12.212 (for
+non-DOD acquisitions). 
+</P>
+<P><B>9.&nbsp; Governing Law.</B>&nbsp; Any action related to this
+Agreement will be governed by California law and controlling U.S.
+federal law.&nbsp; No choice of law rules of any jurisdiction will
+apply. 
+</P>
+<P><B>10.&nbsp; Severability.</B> If any provision of this Agreement
+is held to be unenforceable, this Agreement will remain in effect
+with the provision omitted, unless omission would frustrate the
+intent of the parties, in which case this Agreement will immediately
+terminate. 
+</P>
+<P><B>11.&nbsp; Integration.</B>&nbsp; This Agreement is the entire
+agreement between you and Sun relating to its subject matter.&nbsp;
+It supersedes all prior or contemporaneous oral or written
+communications, proposals, representations and warranties and
+prevails over any conflicting or additional terms of any quote,
+order, acknowledgment, or other communication between the parties
+relating to its subject matter during the term of this Agreement.&nbsp;
+No modification of this Agreement will be binding, unless in writing
+and signed by an authorized representative of each party. 
+</P>
+<P ALIGN=CENTER>JAVA(TM) INTERFACE CLASSES <BR><BR>JAVA API FOR XML
+PROCESSING (JAXP), VERSION 1.1 <BR>SUPPLEMENTAL LICENSE TERMS</P>
+<P>These supplemental license terms (&quot;Supplemental Terms&quot;)
+add to or modify the terms of the Binary Code License Agreement
+(collectively, the &quot;Agreement&quot;). Capitalized terms not
+defined in these Supplemental Terms shall have the same meanings
+ascribed to them in the Agreement. These Supplemental Terms shall
+supersede any inconsistent or conflicting terms in the Agreement, or
+in any license contained within the Software. 
+</P>
+<P><B>1. Software Internal Use and Development License Grant.</B>
+Subject to the terms and conditions of this Agreement, including, but
+not limited to Section 3 (Java(TM) Technology Restrictions) of these
+Supplemental Terms, Sun grants you a non-exclusive, non-transferable,
+limited license to reproduce internally and use internally the binary
+ form of the Software, complete and unmodified, for the sole purpose
+of designing, developing and testing your Java applets and
+applications (&quot;Programs&quot;). 
+</P>
+<P><B>2. License to Distribute Software.</B>&nbsp; In addition to the
+license granted in Section 1 (Software Internal Use and Development
+License Grant) of these Supplemental Terms, subject to the terms and
+conditions of this Agreement, including but not limited to Section 3
+(Java Technology Restrictions), Sun grants you a non-exclusive,
+non-transferable, limited license to reproduce and distribute the
+Software in binary form, provided that you (i) distribute the
+Software complete and unmodified and only bundled as part of your
+Programs, (ii) do not distribute additional software intended to
+replace any component(s) of the Software, (iii) do not remove or
+alter any proprietary legends or notices contained in the Software,
+(iv) only distribute the Software subject to a license agreement that
+protects Sun's interests consistent with the terms contained in this
+Agreement, and (v) agree to defend and indemnify Sun and its
+licensors from and against any damages, costs, liabilities,
+settlement amounts and/or expenses (including attorneys' fees)
+incurred in connection with any claim, lawsuit or action by any third
+party that arises or results from the use or distribution of any and
+all Programs and/or Software. 
+</P>
+<P><B>3. Java Technology Restrictions.</B> You may not modify the
+Java Platform Interface (&quot;JPI&quot;, identified as classes
+contained within the &quot;java&quot; package or any subpackages of
+the &quot;java&quot; package), by creating additional classes within
+the JPI or otherwise causing the addition to or modification of the
+classes in the JPI.&nbsp; In the event that you create an additional
+class and associated API(s) which (i) extends the functionality of
+the Java platform, and (ii) is exposed to third party software
+developers for the purpose of developing additional software which
+invokes such additional API, you must promptly publish broadly an
+accurate specification for such API for free use by all developers.
+You may not create, or authorize your licensees to create additional
+classes, interfaces, or subpackages that are in any way identified as
+&quot;java&quot;, &quot;javax&quot;, &quot;sun&quot; or similar
+convention as specified by Sun in any naming convention designation.</P>
+<P><B>4. Trademarks and Logos.</B> You acknowledge and agree as
+between you and Sun that Sun owns the SUN, SOLARIS, JAVA, JINI,
+FORTE, STAROFFICE, STARPORTAL and iPLANET trademarks and all SUN,
+SOLARIS, JAVA, JINI, FORTE, STAROFFICE, STARPORTAL and
+iPLANET-related trademarks, service marks, logos and other brand
+designations (&quot;Sun Marks&quot;), and you agree to comply with
+the Sun Trademark and Logo Usage Requirements currently located at
+http://www.sun.com/policies/trademarks. Any use you make of the Sun
+Marks inures to Sun's benefit. 
+</P>
+<P><B>5. Source Code. </B>Software may contain source code that is
+provided for reference purposes pursuant to the terms of this
+Agreement.  Source code may not be redistributed unless expressly
+provided for in this Agreement.  <SPAN STYLE="font-weight: medium">Portions
+of this download are governed by the Apache Source Code License and
+are identified in the Readme file.  A copy of the Apache License is
+supplied with the Apache Source Code.</SPAN></P>
+<P><B>6. Termination for Infringement.&nbsp;</B> Either party may
+terminate this Agreement immediately should any Software become, or
+in either party's opinion be likely to become, the subject of a claim
+of infringement of any intellectual property right. 
+</P>
+<P>For inquiries please contact: Sun Microsystems, Inc.&nbsp; 901 San
+Antonio Road, Palo Alto, California 94303 <BR><I><FONT SIZE=2>(Form
+last modified 11-03-2000.)</FONT></I> 
+</P>
+</BODY>
+</HTML>
diff --git a/client/ruby/solr-ruby/solr/etc/LICENSE.jsse.txt b/client/ruby/solr-ruby/solr/etc/LICENSE.jsse.txt
new file mode 100644
index 0000000..1c305dc
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/LICENSE.jsse.txt
@@ -0,0 +1,200 @@
+Sun Microsystems, Inc.
+Binary Code License Agreement
+
+READ THE TERMS OF THIS AGREEMENT AND ANY PROVIDED 
+SUPPLEMENTAL LICENSE TERMS (COLLECTIVELY "AGREEMENT") 
+CAREFULLY BEFORE OPENING THE SOFTWARE MEDIA PACKAGE.  BY 
+OPENING THE SOFTWARE MEDIA PACKAGE, YOU AGREE TO THE TERMS 
+OF THIS AGREEMENT.  IF YOU ARE ACCESSING THE SOFTWARE 
+ELECTRONICALLY, INDICATE YOUR ACCEPTANCE OF THESE TERMS BY 
+SELECTING THE "ACCEPT" BUTTON AT THE END OF THIS AGREEMENT. 
+ IF YOU DO NOT AGREE TO ALL THESE TERMS, PROMPTLY RETURN 
+THE UNUSED SOFTWARE TO YOUR PLACE OF PURCHASE FOR A REFUND 
+OR, IF THE SOFTWARE IS ACCESSED ELECTRONICALLY, SELECT THE 
+"DECLINE" BUTTON AT THE END OF THIS AGREEMENT.
+
+1.  LICENSE TO USE.  Sun grants you a non-exclusive and 
+non-transferable license for the internal use only of the 
+accompanying software and documentation and any error 
+corrections provided by Sun (collectively "Software"), by 
+the number of users and the class of computer hardware for 
+which the corresponding fee has been paid.
+
+2.  RESTRICTIONS.  Software is confidential and 
+copyrighted. Title to Software and all associated 
+intellectual property rights is retained by Sun and/or its 
+licensors.  Except as specifically authorized in any 
+Supplemental License Terms, you may not make copies of 
+Software, other than a single copy of Software for archival 
+purposes.  Unless enforcement is prohibited by applicable 
+law, you may not modify, decompile, or reverse engineer 
+Software.  You acknowledge that Software is not designed, 
+licensed or intended for use in the design, construction, 
+operation or maintenance of any nuclear facility.  Sun 
+disclaims any express or implied warranty of fitness for 
+such uses.  No right, title or interest in or to any 
+trademark, service mark, logo or trade name of Sun or its 
+licensors is granted under this Agreement. 
+
+3. LIMITED WARRANTY.  Sun warrants to you that for a period 
+of ninety (90) days from the date of purchase, as evidenced 
+by a copy of the receipt, the media on which Software is 
+furnished (if any) will be free of defects in materials and 
+workmanship under normal use.  Except for the foregoing, 
+Software is provided "AS IS".  Your exclusive remedy and 
+Sun's entire liability under this limited warranty will be 
+at Sun's option to replace Software media or refund the fee 
+paid for Software.
+
+4.  DISCLAIMER OF WARRANTY.  UNLESS SPECIFIED IN THIS 
+AGREEMENT, ALL EXPRESS OR IMPLIED CONDITIONS, 
+REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED 
+WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
+PURPOSE OR NON-INFRINGEMENT ARE DISCLAIMED, EXCEPT TO THE 
+EXTENT THAT THESE DISCLAIMERS ARE HELD TO BE LEGALLY 
+INVALID.
+
+5.  LIMITATION OF LIABILITY.  TO THE EXTENT NOT PROHIBITED 
+BY LAW, IN NO EVENT WILL SUN OR ITS LICENSORS BE LIABLE FOR 
+ANY LOST REVENUE, PROFIT OR DATA, OR FOR SPECIAL, INDIRECT, 
+CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER 
+CAUSED REGARDLESS OF THE THEORY OF LIABILITY, ARISING OUT 
+OF OR RELATED TO THE USE OF OR INABILITY TO USE SOFTWARE, 
+EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH 
+DAMAGES.  In no event will Sun's liability to you, whether 
+in contract, tort (including negligence), or otherwise, 
+exceed the amount paid by you for Software under this 
+Agreement.  The foregoing limitations will apply even if 
+the above stated warranty fails of its essential purpose.  
+
+6.  Termination.  This Agreement is effective until 
+terminated.  You may terminate this Agreement at any time 
+by destroying all copies of Software.  This Agreement will 
+terminate immediately without notice from Sun if you fail 
+to comply with any provision of this Agreement.  Upon 
+Termination, you must destroy all copies of Software.
+
+7.  Export Regulations.  All Software and technical data 
+delivered under this Agreement are subject to US export 
+control laws and may be subject to export or import 
+regulations in other countries.  You agree to comply 
+strictly with all such laws and regulations and acknowledge 
+that you have the responsibility to obtain such licenses to 
+export, re-export, or import as may be required after 
+delivery to you.
+
+8.  U.S. Government Restricted Rights.  If Software is 
+being acquired by or on behalf of the U.S. Government or by 
+a U.S. Government prime contractor or subcontractor (at any 
+tier), then the Government's rights in Software and 
+accompanying documentation will be only as set forth in 
+this Agreement; this is in accordance with 48 CFR 227.7201 
+through 227.7202-4 (for Department of Defense (DOD) 
+acquisitions) and with 48 CFR 2.101 and 12.212 (for non-DOD 
+acquisitions).
+
+9.  Governing Law.  Any action related to this Agreement 
+will be governed by California law and controlling U.S. 
+federal law.  No choice of law rules of any jurisdiction 
+will apply.
+
+10.  Severability. If any provision of this Agreement is 
+held to be unenforceable, this Agreement will remain in 
+effect with the provision omitted, unless omission would 
+frustrate the intent of the parties, in which case this 
+Agreement will immediately terminate.  
+
+11.  Integration.  This Agreement is the entire agreement 
+between you and Sun relating to its subject matter.  It 
+supersedes all prior or contemporaneous oral or written 
+communications, proposals, representations and warranties 
+and prevails over any conflicting or additional terms of 
+any quote, order, acknowledgment, or other communication 
+between the parties relating to its subject matter during 
+the term of this Agreement.  No modification of this 
+Agreement will be binding, unless in writing and signed by 
+an authorized representative of each party.  
+
+For inquiries please contact: Sun Microsystems, Inc.  901 
+San Antonio Road, Palo Alto, California 94303
+
+JAVATM DEVELOPMENT OPTIONAL PACKAGES
+JAVATM SECURE SOCKET EXTENSION, VERSION 1.0.2
+
+SUPPLEMENTAL LICENSE TERMS
+
+These supplemental license terms ("Supplement") add to or 
+modify the terms of the Binary Code License Agreement 
+(collectively, the "Agreement"). Capitalized terms not 
+defined in this Supplement shall have the same meanings 
+ascribed to them in the Agreement. These Supplement terms 
+shall supersede any inconsistent or conflicting terms in 
+the Agreement, or in any license contained within the 
+Software.
+
+1. License to Distribute. Sun grants you a non-exclusive, 
+non-transferable, royalty-free, limited license to (a) use 
+the binary form of the Software for the sole purpose of 
+designing, developing and testing your JavaTM applets and 
+applications intended to run on a compatible Java 
+environment (the "Programs"), provided that the Programs 
+add significant and primary functionality to the Software, 
+and (b) reproduce and distribute the binary form of the 
+Software through multiple tiers of distribution provided
+that you: (i) distribute the Software complete and 
+unmodified; (ii) do not distribute additional software 
+intended to supersede any component(s) of the Software;
+(iii) do not remove or alter any proprietary 
+legends or notices contained in or on the Software; and 
+(iv) only distribute the Software pursuant to a license 
+agreement that protects Sun's interests consistent with the 
+terms contained in this Agreement, and provides that Sun is 
+a third party beneficiary to such license agreement. If you
+distribute the Software pursuant to this paragraph, you
+must include the following statement as part of product
+documentation (whether hard copy or electronic), as a 
+part of a copyright page or proprietary rights notice 
+page, in an "About" box or in any other form reasonably 
+designed to make the statement visible to users of the
+Software:  "This product includes code licensed from 
+RSA Data Security".
+
+2. Requirements. In exchange for the licenses granted in 
+Paragraph 1 above, you agree:
+
+a. not to create, or authorize your licensees to create, 
+additional classes, interfaces or subpackages that are 
+contained in the "java," "javax" or "sun" packages, or 
+similarly named package, as specified by Sun in any naming 
+convention;
+
+b. that, in the event that you create an API(s) which: (i) 
+extends the functionality of a Java platform; and (ii) is 
+distributed to third party software developers for the 
+purpose of developing software which invokes such 
+additional API, you must promptly and broadly publish an 
+accurate specification for such API for free use by all 
+developers; and
+
+c. to defend and indemnify Sun and its licensors from and 
+against any damages, costs, liabilities, settlement amounts 
+and/or expenses (including attorneys' fees) incurred in 
+connection with any claim, lawsuit or action by any third 
+party that arises or results from the use or distribution 
+of any and all Programs and/or Software. 
+
+3. Trademarks and Logos. You acknowledge and agree as 
+between you and Sun that Sun owns the Java trademark and 
+all Java-related trademarks, service marks, logos and other 
+brand designations including the Coffee Cup logo and Duke 
+logo ("Java Marks"), and you agree to comply with the Sun 
+Trademark and Logo Usage Requirements currently located at 
+http://www.sun.com/policies/trademarks. Any use you make of 
+the Java Marks inures to Sun's benefit.
+
+4. Source Code. Software may contain source code that is 
+provided solely for reference purposes pursuant to the 
+terms of this Agreement.
+
+
+
diff --git a/client/ruby/solr-ruby/solr/etc/admin.xml b/client/ruby/solr-ruby/solr/etc/admin.xml
new file mode 100644
index 0000000..18b364e
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/admin.xml
@@ -0,0 +1,82 @@
+<?xml version="1.0"  encoding="ISO-8859-1"?>
+<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
+
+<!--
+This is a Jetty HTTP admin server configuration file.  This configuration
+uses the generic org.mortbay.util.XmlConfiguration class to call
+the normal org.mortbay.http.HttpServer configuration API from
+within an XML script.
+
+The format of this file is described in the configure.dtd file.
+
+The API that can be called by this file is described in the
+Javadoc for Jetty.
+
+$Id: admin.xml,v 1.28 2005/01/16 00:22:20 gregwilkins Exp $
+-->
+
+<Configure class="org.mortbay.jetty.Server">
+  <Call name="addListener">
+    <Arg>
+      <New class="org.mortbay.http.SocketListener">
+        <Set name="Host">localhost</Set>
+        <Set name="Port">8081</Set>
+        <Set name="MinThreads">1</Set>
+        <Set name="MaxThreads">5</Set>
+        <Set name="MaxIdleTimeMs">30000</Set>      
+      </New>
+    </Arg>
+  </Call>
+
+  <Call name="addRealm">
+    <Arg>
+      <New class="org.mortbay.http.HashUserRealm">
+        <Arg>Admin Realm</Arg>
+	<Put name="admin">admin</Put>
+	<Call name="addUserToRole"><Arg>admin</Arg><Arg>server-administrator</Arg></Call>
+      </New>
+    </Arg>
+  </Call>
+
+  <Call name="addContext">
+    <Arg>/</Arg>   
+    <Set name="realmName">Admin Realm</Set>
+    <Set name="authenticator"><New class="org.mortbay.http.BasicAuthenticator"/></Set>
+   
+    <Call name="addHandler">
+      <Arg><New class="org.mortbay.http.handler.SecurityHandler"/></Arg>  
+    </Call>      
+    <Call name="addSecurityConstraint">
+       <Arg>/</Arg> 
+       <Arg><New class="org.mortbay.http.SecurityConstraint">
+              <Arg>Admin</Arg>
+              <Arg>server-administrator</Arg>
+       </New></Arg>
+    </Call>
+
+    <Call name="addServlet">
+      <Arg>Admin</Arg>
+      <Arg>/</Arg>
+      <Arg>org.mortbay.servlet.AdminServlet</Arg>
+    </Call>
+    
+    <Call name="addServlet">
+      <Arg>Debug</Arg>
+      <Arg>/debug/*</Arg>
+      <Arg>org.mortbay.servlet.Debug</Arg>
+    </Call>
+    
+    <Call name="setAttribute">
+      <Arg>org.mortbay.http.HttpServer</Arg>
+      <Arg><Call name="getHttpServer"/></Arg>
+    </Call>
+  </Call>
+
+  <Set name="anonymous">true</Set>
+  <Set name="requestsPerGC">1</Set>
+
+</Configure>
+
+
+
+
diff --git a/client/ruby/solr-ruby/solr/etc/jetty-jmx.xml b/client/ruby/solr-ruby/solr/etc/jetty-jmx.xml
new file mode 100644
index 0000000..3ab5e2f
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/jetty-jmx.xml
@@ -0,0 +1,37 @@
+<?xml version="1.0"?> 
+<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
+
+
+<!-- =============================================================== -->
+<!-- Configure the Jetty Server                                      -->
+<!-- =============================================================== -->
+<Configure>
+  
+  <Call id="jmxserver" class="javax.management.MBeanServerFactory" name="createMBeanServer">
+  
+     <Arg>org.mortbay</Arg>
+
+     <Call name="createMBean">
+       <Arg>org.mortbay.util.jmx.MX4JHttpAdaptor</Arg>
+       <Arg><New class="javax.management.ObjectName"><Arg>mx4j.tools:adaptor=http</Arg></New></Arg>
+       <Arg><Array type="java.lang.Object"><Item type="int">8082</Item><Item>localhost</Item></Array></Arg>
+       <Arg><Array type="java.lang.String"><Item>int</Item><Item>java.lang.String</Item></Array></Arg>
+     </Call>
+
+     <Call name="createMBean">
+       <Arg>org.mortbay.jetty.jmx.ServerMBean</Arg>
+       <Arg><New class="javax.management.ObjectName"><Arg>org.mortbay:jetty=admin</Arg></New></Arg>
+       <Arg><Array type="java.lang.Object"><Item>etc/admin.xml</Item></Array></Arg>
+       <Arg><Array type="java.lang.String"><Item>java.lang.String</Item></Array></Arg>
+     </Call>
+
+     <Call name="createMBean">
+       <Arg>org.mortbay.jetty.jmx.ServerMBean</Arg>
+       <Arg><New class="javax.management.ObjectName"><Arg>org.mortbay:jetty=default</Arg></New></Arg>
+       <Arg><Array type="java.lang.Object"><Item>etc/jetty.xml</Item></Array></Arg>
+       <Arg><Array type="java.lang.String"><Item>java.lang.String</Item></Array></Arg>
+     </Call>
+
+  </Call>
+
+</Configure>
diff --git a/client/ruby/solr-ruby/solr/etc/jetty.xml b/client/ruby/solr-ruby/solr/etc/jetty.xml
new file mode 100755
index 0000000..e2070b7
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/jetty.xml
@@ -0,0 +1,252 @@
+<?xml version="1.0"?> 
+<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
+
+
+
+<!-- =============================================================== -->
+<!-- Configure the Jetty Server                                      -->
+<!-- =============================================================== -->
+<Configure class="org.mortbay.jetty.Server">
+
+  <!-- =============================================================== -->
+  <!-- Configure Logging                                               -->
+  <!-- =============================================================== -->
+
+  
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Configure Jetty Logging.                                        -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Uncomment if using jetty logging.
+  <Call class="org.mortbay.log.LogFactory" name="getFactory">
+    <Call name="getInstance">
+      <Arg/>
+      <Call name="reset"/>
+      <Call name="add">
+        <Arg>
+          <New class="org.mortbay.log.OutputStreamLogSink">
+            <Set name="filename"><SystemProperty name="jetty.home" default="."/>/logs/yyyy_mm_dd.jetty.log</Set>
+            <Set name="retainDays">90</Set>
+            <Set name="append">true</Set>
+            <Set name="logLabels">true</Set>
+            <Set name="logStackSize">true</Set>
+            <Set name="logStackTrace">false</Set>
+            <Set name="logOneLine">false</Set>
+            <Set name="suppressStack">false</Set>
+            <Set name="logTimeZone">GMT</Set>
+          </New>
+        </Arg>
+      </Call>
+    </Call>
+  </Call>
+  -->
+  
+  <!-- =============================================================== -->
+  <!-- Configure the Request Listeners                                 -->
+  <!-- =============================================================== -->
+
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Add and configure a HTTP listener to port 8983                       -->
+  <!-- The default port can be changed using: java -Djetty.port=80     -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <Call name="addListener">
+    <Arg>
+      <New class="org.mortbay.http.SocketListener">
+        <Set name="Port"><SystemProperty name="jetty.port" default="8983"/></Set>
+	<Set name="PoolName">P1</Set>
+        <Set name="MinThreads">20</Set>
+        <Set name="MaxThreads">200</Set>
+        <Set name="lowResources">50</Set>
+        <Set name="MaxIdleTimeMs">30000</Set>
+        <Set name="LowResourcePersistTimeMs">2000</Set>
+        <Set name="acceptQueueSize">0</Set>
+        <Set name="ConfidentialPort">8443</Set>
+        <Set name="IntegralPort">8443</Set>
+      </New>
+    </Arg>
+  </Call>
+
+
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Add a HTTPS SSL listener on port 8443                           -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- UNCOMMENT TO ACTIVATE 
+  <Call name="addListener">
+    <Arg>
+      <New class="org.mortbay.http.SslListener">
+        <Set name="Port">8443</Set>
+	<Set name="PoolName">P1</Set>
+        <Set name="MaxIdleTimeMs">30000</Set>
+        <Set name="lowResources">30</Set>
+        <Set name="LowResourcePersistTimeMs">2000</Set>
+        <Set name="Keystore"><SystemProperty name="jetty.home" default="."/>/etc/demokeystore</Set>
+	<Set name="Password">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
+	<Set name="KeyPassword">OBF:1u2u1wml1z7s1z7a1wnl1u2g</Set>
+
+        <Set name="HttpHandler">
+          <New class="org.mortbay.http.handler.MsieSslHandler">
+	    <Set name="UserAgentSubString">MSIE 5</Set>
+	  </New>
+        </Set>
+      </New>
+    </Arg>
+  </Call>
+  -->
+
+
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Add a AJP13 listener on port 8009                               -->
+  <!-- This protocol can be used with mod_jk in apache, IIS etc.       -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!--
+  <Call name="addListener">
+    <Arg>
+      <New class="org.mortbay.http.ajp.AJP13Listener">
+        <Set name="Port">8009</Set>
+        <Set name="MinThreads">5</Set>
+        <Set name="MaxThreads">20</Set>
+        <Set name="MaxIdleTimeMs">0</Set>
+        <Set name="confidentialPort">443</Set>
+      </New>
+    </Arg>
+  </Call>
+  -->
+
+
+  <!-- =============================================================== -->
+  <!-- Set the default web application configuration mechanisms:       -->
+  <!--   XMLConfiguration       - handles WEB-INF/web.xml              -->
+  <!--   JettyWebConfiguration  - handles WEB-INF/jetty-web.xml        -->
+  <!--   jsr77.Configuration    - Adds jsr77 statistics to servlets    -->
+  <!--                                                                 -->
+  <!-- Order of these classes is significant. The defaults set here    -->
+  <!-- can be overridden by calling setConfigurationClassNames() on    -->
+  <!-- the webapp context.                                             -->
+  <!-- The TagLibconfiguration scans any tld files found for           -->
+  <!-- additional j2ee listener classes - needed for JSF               -->
+  <!-- The jsr77 configuration requires additional jars on the         -->
+  <!-- on the classpath and it needs jmx enabled.                      -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <Set name="WebApplicationConfigurationClassNames">
+    <Array type="java.lang.String">
+      <Item>org.mortbay.jetty.servlet.XMLConfiguration</Item>
+      <Item>org.mortbay.jetty.servlet.JettyWebConfiguration</Item>
+
+      <!--
+      <Item>org.mortbay.jetty.servlet.TagLibConfiguration</Item>
+      <Item>org.mortbay.jetty.servlet.jsr77.Configuration</Item>
+      -->
+    </Array>
+  </Set>
+
+
+  <!-- =============================================================== -->
+  <!-- Configure the Contexts                                          -->
+  <!-- =============================================================== -->
+
+
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Add a all web application within the webapps directory.         -->
+  <!-- + No virtual host specified                                     -->
+  <!-- + Look in the webapps directory relative to jetty.home or .     -->
+  <!-- + Use the webdefault.xml resource for the defaults descriptor   -->
+  <!-- + Upack the war file                                            -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <Set name="rootWebApp">root</Set>
+  
+  <Call name="addWebApplications">
+    <Arg></Arg>
+    <Arg><SystemProperty name="jetty.home" default="."/>/webapps/</Arg>
+    <Arg><SystemProperty name="jetty.home" default="."/>/etc/webdefault.xml</Arg>
+    <Arg type="boolean">true</Arg><!--extract WARs-->
+    <Arg type="boolean">false</Arg><!-- java 2 compliant class loader -->
+  </Call>
+
+
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- Add and configure a specific web application                    -->
+  <!-- + Set Unpack WAR files                                          -->
+  <!-- + Set Default Descriptor.  Resource, file or URL                -->
+  <!-- + Set java 2 complaint classloading                             -->
+  <!-- + Set Virtual Hosts. A Null host or empty array means all hosts -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+  <!-- UNCOMMENT TO ACTIVATE
+  <Call name="addWebApplication">
+    <Arg>/context</Arg>
+    <Arg>./webapps/root</Arg>
+
+    <Set name="extractWAR">false</Set> 
+    <Set name="defaultsDescriptor">org/mortbay/jetty/servlet/webdefault.xml</Set>
+    <Set name="classLoaderJava2Compliant">true</Set> 
+
+    <Set name="virtualHosts">
+      <Array type="java.lang.String">
+        <Item></Item>
+        <Item>127.0.0.1</Item>
+        <Item>localhost</Item>
+        <Item>www.acme.com</Item>
+      </Array>
+    </Set>
+  </Call>
+  -->
+
+  <!-- =============================================================== -->
+  <!-- Configure the Request Log                                       -->
+  <!-- =============================================================== -->
+  <!-- Uncomment for request logging.
+  <Set name="RequestLog">
+    <New class="org.mortbay.http.NCSARequestLog">
+      <Arg><SystemProperty name="jetty.home" default="."/>/logs/yyyy_mm_dd.request.log</Arg>
+      <Set name="retainDays">90</Set>
+      <Set name="append">true</Set>
+      <Set name="extended">false</Set>
+      <Set name="LogTimeZone">GMT</Set>
+    </New>
+  </Set>
+  -->
+
+  <!-- =============================================================== -->
+  <!-- Configure the Other Server Options                              -->
+  <!-- =============================================================== -->
+  <Set name="requestsPerGC">2000</Set>
+  <Set name="statsOn">false</Set>
+  <Set class="org.mortbay.util.FileResource" name="checkAliases" type="boolean">true</Set>
+
+  <!-- System classes cannot be overriden by a HttpContext or webapp 
+  <Set name="systemClasses">
+    <Array type="java.lang.String">
+      <Item>java.</Item>
+      <Item>javax.servlet.</Item>
+      <Item>javax.xml.</Item>
+      <Item>org.mortbay.</Item>
+      <Item>org.xml.</Item>
+      <Item>org.w3c.</Item>
+      <Item>org.apache.commons.logging.</Item>
+    </Array>
+  </Set>
+  -->
+
+  <!-- Server classes are hidden from a HttpContext or webapp
+  <Set name="serverClasses">
+    <Array type="java.lang.String">
+      <Item>-org.mortbay.http.PathMap</Item>
+      <Item>org.mortbay.http.</Item>
+      <Item>-org.mortbay.jetty.servlet.Default</Item>
+      <Item>-org.mortbay.jetty.servlet.Invoker</Item>
+      <Item>-org.mortbay.jetty.servlet.JSR154Filter</Item>
+      <Item>org.mortbay.jetty.</Item>
+      <Item>org.mortbay.start.</Item>
+      <Item>org.mortbay.stop.</Item>
+    </Array>
+  </Set>
+  -->
+
+</Configure>
+
+
+
+
+
+
+
+
+
diff --git a/client/ruby/solr-ruby/solr/etc/webdefault.xml b/client/ruby/solr-ruby/solr/etc/webdefault.xml
new file mode 100644
index 0000000..b7ba1ca
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/etc/webdefault.xml
@@ -0,0 +1,373 @@
+<?xml version="1.0" encoding="ISO-8859-1"?>
+
+<!-- ===================================================================== -->
+<!-- This file contains the default descriptor for web applications.       -->
+<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
+<!-- The intent of this descriptor is to include jetty specific or common  -->
+<!-- configuration for all webapps.   If a context has a webdefault.xml    -->
+<!-- descriptor, it is applied before the contexts own web.xml file        -->
+<!--                                                                       -->
+<!-- A context may be assigned a default descriptor by:                    -->
+<!--  + Allowing the default defaultweb.xml to be applied                  -->
+<!--  + Calling WebApplicationContext.setDefaultsDescriptor                -->
+<!--  + Passed an arg to addWebApplications                                -->
+<!--                                                                       -->
+<!-- If a defaults descriptor is set, it is first looked for as a system   -->
+<!-- resource. The jetty jar contains a webdefault.xml file as a resource  -->
+<!-- at "org/mortbay/jetty/servlet/webdefault.xml".   If a system resource -->
+<!-- is not found, then a normal resource is tried, thus a filename or URL -->
+<!-- may be used to specify an arbitrary file.                             -->
+<!--                                                                       -->
+<!-- ===================================================================== -->
+<web-app 
+   xmlns="http://java.sun.com/xml/ns/j2ee" 
+   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
+   version="2.4"> 
+
+  <description>
+    Default web.xml file.  
+    This file is applied to a Web application before it's own WEB_INF/web.xml file
+  </description>
+
+
+
+  <!-- ==================================================================== -->
+  <!-- Context params to control Session Cookies                            -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <!-- UNCOMMENT TO ACTIVATE
+  <context-param>
+    <param-name>org.mortbay.jetty.servlet.SessionDomain</param-name>
+    <param-value>127.0.0.1</param-value>
+  </context-param>
+
+  <context-param>
+    <param-name>org.mortbay.jetty.servlet.SessionPath</param-name>
+    <param-value>/</param-value>
+  </context-param>
+
+  <context-param>
+    <param-name>org.mortbay.jetty.servlet.MaxAge</param-name>
+    <param-value>-1</param-value>
+  </context-param>
+  -->
+
+
+
+  <!-- ==================================================================== -->
+  <!-- The default servlet.                                                 -->
+  <!-- This servlet, normally mapped to /, provides the handling for static -->
+  <!-- content, OPTIONS and TRACE methods for the context.                  -->
+  <!-- The following initParameters are supported:                          -->
+  <!--                                                                      -->
+  <!--   acceptRanges     If true, range requests and responses are         -->
+  <!--                    supported                                         -->
+  <!--                                                                      -->
+  <!--   dirAllowed       If true, directory listings are returned if no    -->
+  <!--                    welcome file is found. Else 403 Forbidden.        -->
+  <!--                                                                      -->
+  <!--   putAllowed       If true, the PUT method is allowed                -->
+  <!--                                                                      -->
+  <!--   delAllowed       If true, the DELETE method is allowed             -->
+  <!--                                                                      -->
+  <!--   redirectWelcome  If true, redirect welcome file requests           -->
+  <!--                    else use request dispatcher forwards              -->
+  <!--                                                                      -->
+  <!--   minGzipLength    If set to a positive integer, then static content -->
+  <!--                    larger than this will be served as gzip content   -->
+  <!--                    encoded if a matching resource is found ending    -->
+  <!--                    with ".gz"                                        -->
+  <!--                                                                      -->
+  <!--   resoureBase      Can be set to replace the context resource base   -->
+  <!--                                                                      -->
+  <!--   relativeResourceBase                                               -->
+  <!--                    Set with a pathname relative to the base of the   -->
+  <!--                    servlet context root. Useful for only serving     -->
+  <!--                    static content from only specific subdirectories. -->
+  <!--                                                                      -->
+  <!-- The MOVE method is allowed if PUT and DELETE are allowed             -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <servlet>
+    <servlet-name>default</servlet-name>
+    <servlet-class>org.mortbay.jetty.servlet.Default</servlet-class>
+    <init-param>
+      <param-name>acceptRanges</param-name>
+      <param-value>true</param-value>
+    </init-param>
+    <init-param>
+      <param-name>dirAllowed</param-name>
+      <param-value>true</param-value>
+    </init-param>
+    <init-param>
+      <param-name>putAllowed</param-name>
+      <param-value>false</param-value>
+    </init-param>
+    <init-param>
+      <param-name>delAllowed</param-name>
+      <param-value>false</param-value>
+    </init-param>
+    <init-param>
+      <param-name>redirectWelcome</param-name>
+      <param-value>false</param-value>
+    </init-param>
+    <init-param>
+      <param-name>minGzipLength</param-name>
+      <param-value>8192</param-value>
+    </init-param>
+    <load-on-startup>0</load-on-startup>
+  </servlet> 
+
+  <servlet-mapping> <servlet-name>default</servlet-name> <url-pattern>/</url-pattern> </servlet-mapping>
+  
+
+  <!-- ==================================================================== -->
+  <!-- JSP Servlet                                                          -->
+  <!-- This is the jasper JSP servlet from the jakarta project              -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <!-- The JSP page compiler and execution servlet, which is the mechanism  -->
+  <!-- used by Tomcat to support JSP pages.  Traditionally, this servlet    -->
+  <!-- is mapped to URL patterh "*.jsp".  This servlet supports the         -->
+  <!-- following initialization parameters (default values are in square    -->
+  <!-- brackets):                                                           -->
+  <!--                                                                      -->
+  <!--   checkInterval       If development is false and reloading is true, -->
+  <!--                       background compiles are enabled. checkInterval -->
+  <!--                       is the time in seconds between checks to see   -->
+  <!--                       if a JSP page needs to be recompiled. [300]    -->
+  <!--                                                                      -->
+  <!--   compiler            Which compiler Ant should use to compile JSP   -->
+  <!--                       pages.  See the Ant documenation for more      -->
+  <!--                       information. [javac]                           -->
+  <!--                                                                      -->
+  <!--   classdebuginfo      Should the class file be compiled with         -->
+  <!--                       debugging information?  [true]                 -->
+  <!--                                                                      -->
+  <!--   classpath           What class path should I use while compiling   -->
+  <!--                       generated servlets?  [Created dynamically      -->
+  <!--                       based on the current web application]          -->
+  <!--                                                                      -->
+  <!--   development         Is Jasper used in development mode (will check -->
+  <!--                       for JSP modification on every access)?  [true] -->
+  <!--                                                                      -->
+  <!--   enablePooling       Determines whether tag handler pooling is      -->
+  <!--                       enabled  [true]                                -->
+  <!--                                                                      -->
+  <!--   fork                Tell Ant to fork compiles of JSP pages so that -->
+  <!--                       a separate JVM is used for JSP page compiles   -->
+  <!--                       from the one Tomcat is running in. [true]      -->
+  <!--                                                                      -->
+  <!--   ieClassId           The class-id value to be sent to Internet      -->
+  <!--                       Explorer when using <jsp:plugin> tags.         -->
+  <!--                       [clsid:8AD9C840-044E-11D1-B3E9-00805F499D93]   -->
+  <!--                                                                      -->
+  <!--   javaEncoding        Java file encoding to use for generating java  -->
+  <!--                       source files. [UTF8]                           -->
+  <!--                                                                      -->
+  <!--   keepgenerated       Should we keep the generated Java source code  -->
+  <!--                       for each page instead of deleting it? [true]   -->
+  <!--                                                                      -->
+  <!--   logVerbosityLevel   The level of detailed messages to be produced  -->
+  <!--                       by this servlet.  Increasing levels cause the  -->
+  <!--                       generation of more messages.  Valid values are -->
+  <!--                       FATAL, ERROR, WARNING, INFORMATION, and DEBUG. -->
+  <!--                       [WARNING]                                      -->
+  <!--                                                                      -->
+  <!--   mappedfile          Should we generate static content with one     -->
+  <!--                       print statement per input line, to ease        -->
+  <!--                       debugging?  [false]                            -->
+  <!--                                                                      -->
+  <!--                                                                      -->
+  <!--   reloading           Should Jasper check for modified JSPs?  [true] -->
+  <!--                                                                      -->
+  <!--   suppressSmap        Should the generation of SMAP info for JSR45   -->
+  <!--                       debugging be suppressed?  [false]              -->
+  <!--                                                                      -->
+  <!--   dumpSmap            Should the SMAP info for JSR45 debugging be    -->
+  <!--                       dumped to a file? [false]                      -->
+  <!--                       False if suppressSmap is true                  -->
+  <!--                                                                      -->
+  <!--   scratchdir          What scratch directory should we use when      -->
+  <!--                       compiling JSP pages?  [default work directory  -->
+  <!--                       for the current web application]               -->
+  <!--                                                                      -->
+  <!--   tagpoolMaxSize      The maximum tag handler pool size  [5]         -->
+  <!--                                                                      -->
+  <!--   xpoweredBy          Determines whether X-Powered-By response       -->
+  <!--                       header is added by generated servlet  [false]  -->
+  <!--                                                                      -->
+  <!-- If you wish to use Jikes to compile JSP pages:                       -->
+  <!--   Set the init parameter "compiler" to "jikes".  Define              -->
+  <!--   the property "-Dbuild.compiler.emacs=true" when starting Jetty     -->
+  <!--   to cause Jikes to emit error messages in a format compatible with  -->
+  <!--   Jasper.                                                            -->
+  <!--   If you get an error reporting that jikes can't use UTF8 encoding,  -->
+  <!--   try setting the init parameter "javaEncoding" to "ISO-8859-1".     -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <servlet>
+    <servlet-name>jsp</servlet-name>
+    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
+    <init-param>
+        <param-name>logVerbosityLevel</param-name>
+        <param-value>DEBUG</param-value>
+    </init-param>
+    <init-param>
+        <param-name>fork</param-name>
+        <param-value>false</param-value>
+    </init-param>
+    <init-param>
+        <param-name>xpoweredBy</param-name>
+        <param-value>false</param-value>
+    </init-param>
+    <load-on-startup>0</load-on-startup>
+  </servlet>
+
+  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jsp</url-pattern> </servlet-mapping>
+  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jspf</url-pattern> </servlet-mapping>
+  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jspx</url-pattern> </servlet-mapping>
+  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.xsp</url-pattern> </servlet-mapping>
+
+
+  <!-- ==================================================================== -->
+  <!-- Dynamic Servlet Invoker.                                             -->
+  <!-- This servlet invokes anonymous servlets that have not been defined   -->
+  <!-- in the web.xml or by other means. The first element of the pathInfo  -->
+  <!-- of a request passed to the envoker is treated as a servlet name for  -->
+  <!-- an existing servlet, or as a class name of a new servlet.            -->
+  <!-- This servlet is normally mapped to /servlet/*                        -->
+  <!-- This servlet support the following initParams:                       -->
+  <!--                                                                      -->
+  <!--  nonContextServlets       If false, the invoker can only load        -->
+  <!--                           servlets from the contexts classloader.    -->
+  <!--                           This is false by default and setting this  -->
+  <!--                           to true may have security implications.    -->
+  <!--                                                                      -->
+  <!--  verbose                  If true, log dynamic loads                 -->
+  <!--                                                                      -->
+  <!--  *                        All other parameters are copied to the     -->
+  <!--                           each dynamic servlet as init parameters    -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <!-- Uncomment for dynamic invocation
+  <servlet>
+    <servlet-name>invoker</servlet-name>
+    <servlet-class>org.mortbay.jetty.servlet.Invoker</servlet-class>
+    <init-param>
+      <param-name>verbose</param-name>
+      <param-value>false</param-value>
+    </init-param>
+    <init-param>
+      <param-name>nonContextServlets</param-name>
+      <param-value>false</param-value>
+    </init-param>
+    <init-param>
+      <param-name>dynamicParam</param-name>
+      <param-value>anyValue</param-value>
+    </init-param>
+    <load-on-startup>0</load-on-startup>
+  </servlet>
+
+  <servlet-mapping> <servlet-name>invoker</servlet-name> <url-pattern>/servlet/*</url-pattern> </servlet-mapping>
+  -->
+
+
+
+  <!-- ==================================================================== -->
+  <session-config>
+    <session-timeout>30</session-timeout>
+  </session-config>
+
+  <!-- ==================================================================== -->
+  <!-- Default MIME mappings                                                -->
+  <!-- The default MIME mappings are provided by the mime.properties        -->
+  <!-- resource in the org.mortbay.jetty.jar file.  Additional or modified  -->
+  <!-- mappings may be specified here                                       -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <!-- UNCOMMENT TO ACTIVATE
+  <mime-mapping>
+    <extension>mysuffix</extension>
+    <mime-type>mymime/type</mime-type>
+  </mime-mapping>
+  -->
+
+  <!-- ==================================================================== -->
+  <welcome-file-list>
+    <welcome-file>index.html</welcome-file>
+    <welcome-file>index.htm</welcome-file>
+    <welcome-file>index.jsp</welcome-file>
+  </welcome-file-list>
+
+  <!-- ==================================================================== -->
+  <locale-encoding-mapping-list>
+    <locale-encoding-mapping><locale>ar</locale><encoding>ISO-8859-6</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>be</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>bg</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>ca</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>cs</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>da</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>de</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>el</locale><encoding>ISO-8859-7</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>en</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>es</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>et</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>fi</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>fr</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>hr</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>hu</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>is</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>it</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>iw</locale><encoding>ISO-8859-8</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>ja</locale><encoding>Shift_JIS</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>ko</locale><encoding>EUC-KR</encoding></locale-encoding-mapping>     
+    <locale-encoding-mapping><locale>lt</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>lv</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>mk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>nl</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>no</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>pl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>pt</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>ro</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>ru</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sh</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sk</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sq</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sr</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>sv</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>tr</locale><encoding>ISO-8859-9</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>uk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>zh</locale><encoding>GB2312</encoding></locale-encoding-mapping>
+    <locale-encoding-mapping><locale>zh_TW</locale><encoding>Big5</encoding></locale-encoding-mapping>   
+  </locale-encoding-mapping-list>
+
+  
+  <!-- ==================================================================== -->
+  <!-- JSR154 Stupidness                                                    -->
+  <!-- This filter implements some of the JSR154 (servlet 2.4) "features",  -->
+  <!-- which are rather stupid and expensive to implement. Thus they are    -->
+  <!-- not included in the core Jetty architecture.   It is HIGHLY          -->
+  <!-- RECOMMENDED that this filter NOT be used, unless you need:           -->
+  <!--    RequestAttributeListeners - If you actually have a real use for   -->
+  <!--       these, please tell the jetty lists what they are and why you   -->
+  <!--       can't use a normal filter/wrapper for this?                    -->
+  <!--    SRV.6.2.2 Dispatachers  - where the container cannot wrap the     -->
+  <!--       request or response. See                                       -->
+  <!--       http://jetty.mortbay.org/jetty/doc/servlet24.html#d0e711       -->
+  <!--       to find out why this is stupid.                                -->
+  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
+  <!-- UNCOMMENT For compliant behaviour
+  <filter>
+    <filter-name>jsr154</filter-name>
+    <filter-class>org.mortbay.jetty.servlet.JSR154Filter</filter-class>
+    <init-param><param-name>unwrappedDispatch</param-name><param-value>true</param-value></init-param>
+  </filter>
+  <filter-mapping>
+      <filter-name>jsr154</filter-name>
+      <url-pattern>/*</url-pattern>
+      <dispatcher>REQUEST</dispatcher>
+      <dispatcher>FORWARD</dispatcher>
+      <dispatcher>INCLUDE</dispatcher>
+      <dispatcher>ERROR</dispatcher>
+  </filter-mapping>
+  -->
+  
+</web-app>
+
diff --git a/client/ruby/solr-ruby/solr/ext/ant.jar b/client/ruby/solr-ruby/solr/ext/ant.jar
new file mode 100644
index 0000000..f66b800
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/ant.jar
@@ -0,0 +1,2 @@
+AnyObjectId[395544dc9189fe11795250b48adda9e7f24c34bb] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/commons-el.jar b/client/ruby/solr-ruby/solr/ext/commons-el.jar
new file mode 100644
index 0000000..c5b6345
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/commons-el.jar
@@ -0,0 +1,2 @@
+AnyObjectId[608ed796ca34c5acc14cb3cf3cc4deee4ea86180] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/commons-logging.jar b/client/ruby/solr-ruby/solr/ext/commons-logging.jar
new file mode 100644
index 0000000..f330fde
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/commons-logging.jar
@@ -0,0 +1,2 @@
+AnyObjectId[b73a80fab641131e6fbe3ae833549efb3c540d17] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/jasper-compiler.jar b/client/ruby/solr-ruby/solr/ext/jasper-compiler.jar
new file mode 100644
index 0000000..48369df
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/jasper-compiler.jar
@@ -0,0 +1,2 @@
+AnyObjectId[96ec53852d45e13723d8b40c83d99ed449a4c83e] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/jasper-runtime.jar b/client/ruby/solr-ruby/solr/ext/jasper-runtime.jar
new file mode 100644
index 0000000..d0e39ed
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/jasper-runtime.jar
@@ -0,0 +1,2 @@
+AnyObjectId[5c3b4bfff7a3bd377802548604a0b28bebab8ea7] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/mx4j-remote.jar b/client/ruby/solr-ruby/solr/ext/mx4j-remote.jar
new file mode 100644
index 0000000..b7a97be
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/mx4j-remote.jar
@@ -0,0 +1,2 @@
+AnyObjectId[de7739dba7f3f062240c87ffa37e81b00908ae33] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/mx4j-tools.jar b/client/ruby/solr-ruby/solr/ext/mx4j-tools.jar
new file mode 100644
index 0000000..14324bd
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/mx4j-tools.jar
@@ -0,0 +1,2 @@
+AnyObjectId[87ccc77dd4e61e03d0b4b77265b8f62e7396d0ef] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/ext/mx4j.jar b/client/ruby/solr-ruby/solr/ext/mx4j.jar
new file mode 100644
index 0000000..f2eb43a
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/ext/mx4j.jar
@@ -0,0 +1,2 @@
+AnyObjectId[e5dafc175ada7cf2d3e62cbd409541a8dcf7ad79] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/lib/javax.servlet.jar b/client/ruby/solr-ruby/solr/lib/javax.servlet.jar
new file mode 100644
index 0000000..ba6623b
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/lib/javax.servlet.jar
@@ -0,0 +1,2 @@
+AnyObjectId[8092795672eb0d929e173a3de93c5093a828a78a] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/lib/org.mortbay.jetty.jar b/client/ruby/solr-ruby/solr/lib/org.mortbay.jetty.jar
new file mode 100644
index 0000000..1304576
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/lib/org.mortbay.jetty.jar
@@ -0,0 +1,2 @@
+AnyObjectId[186a190ce106d61d497e29c713e70ecf14667ef1] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/lib/org.mortbay.jmx.jar b/client/ruby/solr-ruby/solr/lib/org.mortbay.jmx.jar
new file mode 100644
index 0000000..f62f145
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/lib/org.mortbay.jmx.jar
@@ -0,0 +1,2 @@
+AnyObjectId[0561a2e877e10128a72424bb368902a11bdc94ab] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/solr/README.txt b/client/ruby/solr-ruby/solr/solr/README.txt
new file mode 100644
index 0000000..f39ad34
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/README.txt
@@ -0,0 +1,52 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+
+Example "Solr Home" Directory
+=============================
+
+This directory is provided as an example of what a "Solr Home" directory
+should look like.
+
+It's not strictly necessary that you copy all of the files in this
+directory when setting up a new instance of Solr, but it is recommended.
+
+
+Basic Directory Structure
+-------------------------
+
+The Solr Home directory typically contains the following subdirectories...
+
+   conf/
+        This directory is mandatory and must contain your solrconfig.xml
+        and schema.xml.  Any other optional configuration files would also 
+        be kept here.
+
+   data/
+        This directory is the default location where Solr will keep your
+        index, and is used by the replication scripts for dealing with
+        snapshots.  You can override this location in the solrconfig.xml
+        and scripts.conf files. Solr will create this directory if it
+        does not already exist.
+
+   lib/
+        This directory is optional.  If it exists, Solr will load any Jars
+        found in this directory and use them to resolve any "plugins"
+        specified in your solrconfig.xml or schema.xml (ie: Analyzers,
+        Request Handlers, etc...)
+
+   bin/
+        This directory is optional.  It is the default location used for
+        keeping the replication scripts.
diff --git a/client/ruby/solr-ruby/solr/solr/conf/admin-extra.html b/client/ruby/solr-ruby/solr/solr/conf/admin-extra.html
new file mode 100644
index 0000000..aa739da
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/admin-extra.html
@@ -0,0 +1,31 @@
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- The content of this page will be statically included into the top
+of the admin page.  Uncomment this as an example to see there the content
+will show up.
+
+<hr>
+<i>This line will appear before the first table</i>
+<tr>
+<td colspan="2">
+This row will be appended to the end of the first table
+</td>
+</tr>
+<hr>
+
+-->
diff --git a/client/ruby/solr-ruby/solr/solr/conf/protwords.txt b/client/ruby/solr-ruby/solr/solr/conf/protwords.txt
new file mode 100644
index 0000000..1dfc0ab
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/protwords.txt
@@ -0,0 +1,21 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# Use a protected word file to protect against the stemmer reducing two
+# unrelated words to the same base word.
+
+# Some non-words that normally won't be encountered,
+# just to test that they won't be stemmed.
+dontstems
+zwhacky
+
diff --git a/client/ruby/solr-ruby/solr/solr/conf/schema.xml b/client/ruby/solr-ruby/solr/solr/conf/schema.xml
new file mode 100755
index 0000000..02e7401
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/schema.xml
@@ -0,0 +1,219 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- This is the Solr schema file. This file should be named "schema.xml" and
+ should be in the conf directory under the solr home
+ (i.e. ./solr/conf/schema.xml by default) 
+ or located where the classloader for the Solr webapp can find it.
+
+ For more information, on how to customize this file, please see
+ http://wiki.apache.org/solr/SchemaXml
+-->
+
+<schema name="flare" version="1.1">
+  <!-- attribute "name" is the name of this schema and is only used for display purposes.
+       Applications should change this to reflect the nature of the search collection.
+       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
+       not normally be changed by applications.
+       1.0: multiValued attribute did not exist, all fields are multiValued by nature
+       1.1: multiValued attribute introduced, false by default -->
+
+  <types>
+    <!-- field type definitions. The "name" attribute is
+       just a label to be used by field definitions.  The "class"
+       attribute and any other attributes determine the real
+       behavior of the fieldtype.
+         Class names starting with "solr" refer to java classes in the
+       org.apache.solr.analysis package.
+    -->
+
+    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
+       - StrField and TextField support an optional compressThreshold which
+       limits compression (if enabled in the derived fields) to values which
+       exceed a certain size (in characters).
+    -->
+    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- boolean type: "true" or "false" -->
+    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- The optional sortMissingLast and sortMissingFirst attributes are
+         currently supported on types that are sorted internally as strings.
+       - If sortMissingLast="true", then a sort on this field will cause documents
+         without the field to come after documents with the field,
+         regardless of the requested sort order (asc or desc).
+       - If sortMissingFirst="true", then a sort on this field will cause documents
+         without the field to come before documents with the field,
+         regardless of the requested sort order.
+       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
+         then default lucene sorting will be used which places docs without the
+         field first in an ascending sort and last in a descending sort.
+    -->    
+
+
+    <!-- numeric field types that store and index the text
+         value verbatim (and hence don't support range queries, since the
+         lexicographic ordering isn't equal to the numeric ordering) -->
+    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
+    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
+    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
+    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
+
+
+    <!-- Numeric field types that manipulate the value into
+         a string value that isn't human-readable in its internal form,
+         but with a lexicographic ordering the same as the numeric ordering,
+         so that range queries work correctly. -->
+    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
+
+
+    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
+         is a more restricted form of the canonical representation of dateTime
+         http://www.w3.org/TR/xmlschema-2/#dateTime    
+         The trailing "Z" designates UTC time and is mandatory.
+         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
+         All other components are mandatory.
+
+         Expressions can also be used to denote calculations that should be
+         performed relative to "NOW" to determine the value, ie...
+
+               NOW/HOUR
+                  ... Round to the start of the current hour
+               NOW-1DAY
+                  ... Exactly 1 day prior to now
+               NOW/DAY+6MONTHS+3DAYS
+                  ... 6 months and 3 days in the future from the start of
+                      the current day
+                      
+         Consult the DateField javadocs for more information.
+      -->
+    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- solr.TextField allows the specification of custom text analyzers
+         specified as a tokenizer and a list of token filters. Different
+         analyzers may be specified for indexing and querying.
+
+         The optional positionIncrementGap puts space between multiple fields of
+         this type on the same document, with the purpose of preventing false phrase
+         matching across fields.
+
+         For more info on customizing your analyzer chain, please see
+         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
+     -->
+
+    <!-- One can also specify an existing Analyzer class that has a
+         default constructor via the class attribute on the analyzer element
+    <fieldtype name="text_greek" class="solr.TextField">
+      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
+    </fieldType>
+    -->
+
+    <!-- A text field that only splits on whitespace for exact matching of words -->
+    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+      </analyzer>
+    </fieldtype>
+
+    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
+      <analyzer type="index">
+        <tokenizer class="solr.StandardTokenizerFactory"/>
+        <filter class="solr.StandardFilterFactory"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+      </analyzer>
+      <analyzer type="query">
+        <tokenizer class="solr.StandardTokenizerFactory"/>
+        <filter class="solr.StandardFilterFactory"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+
+    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
+         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
+    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
+        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+ </types>
+
+
+ <fields>
+   <!-- Valid attributes for fields:
+     name: mandatory - the name for the field
+     type: mandatory - the name of a previously defined type from the <types> section
+     indexed: true if this field should be indexed (searchable or sortable)
+     stored: true if this field should be retrievable
+     compressed: [false] if this field should be stored using gzip compression
+       (this will only apply if the field type is compressable; among
+       the standard field types, only TextField and StrField are)
+     multiValued: true if this field may contain multiple values per document
+     omitNorms: (expert) set to true to omit the norms associated with
+       this field (this disables length normalization and index-time
+       boosting for the field, and saves some memory).  Only full-text
+       fields or fields that need an index-time boost need norms.
+   -->
+
+   <field name="id" type="string" indexed="true" stored="true"/>
+
+   <!-- catchall field, containing all other searchable text fields (implemented
+        via copyField further on in this schema  -->
+   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
+
+   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
+        will be used if the name matches any of the patterns.
+        RESTRICTION: the glob-like pattern in the name attribute must have
+        a "*" only at the start or the end.
+        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
+        Longer patterns will be matched first.  if equal size patterns
+        both match, the first appearing in the schema will be used.  -->
+   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true" multiValued="true"/>
+   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true" multiValued="true"/>
+ </fields>
+
+ <!-- field to use to determine and enforce document uniqueness. -->
+ <uniqueKey>id</uniqueKey>
+
+ <!-- field for the QueryParser to use when an explicit fieldname is absent -->
+ <defaultSearchField>text</defaultSearchField>
+
+ <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
+ <solrQueryParser defaultOperator="AND"/>
+
+  <!-- copyField commands copy one field to another at the time a document
+        is added to the index.  It's used either to index the same field differently,
+        or to add multiple fields to the same field for easier/faster searching.  -->
+ <copyField source="*_text" dest="text"/>
+
+ <!-- Similarity is the scoring routine for each document vs. a query.
+      A custom similarity may be specified here, but the default is fine
+      for most applications.  -->
+ <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
+
+</schema>
diff --git a/client/ruby/solr-ruby/solr/solr/conf/scripts.conf b/client/ruby/solr-ruby/solr/solr/conf/scripts.conf
new file mode 100644
index 0000000..e993bbf
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/scripts.conf
@@ -0,0 +1,24 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+user=
+solr_hostname=localhost
+solr_port=8983
+rsyncd_port=18983
+data_dir=
+webapp_name=solr
+master_host=
+master_data_dir=
+master_status_dir=
diff --git a/client/ruby/solr-ruby/solr/solr/conf/solrconfig.xml b/client/ruby/solr-ruby/solr/solr/conf/solrconfig.xml
new file mode 100755
index 0000000..a008b2d
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/solrconfig.xml
@@ -0,0 +1,300 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<config>
+
+  <!-- Used to specify an alternate directory to hold all index data
+       other than the default ./data under the Solr home.
+       If replication is in use, this should match the replication configuration. -->
+  <dataDir>${solr.data.dir:./solr/data}</dataDir>
+
+  <indexDefaults>
+   <!-- Values here affect all index writers and act as a default unless overridden. -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+    <writeLockTimeout>1000</writeLockTimeout>
+    <commitLockTimeout>10000</commitLockTimeout>
+  </indexDefaults>
+
+  <mainIndex>
+    <!-- options specific to the main on-disk lucene index -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+
+    <!-- If true, unlock any held write or commit locks on startup. 
+         This defeats the locking mechanism that allows multiple
+         processes to safely access a lucene index, and should be
+         used with care. -->
+    <unlockOnStartup>false</unlockOnStartup>
+  </mainIndex>
+
+  <!-- the default high-performance update handler -->
+  <updateHandler class="solr.DirectUpdateHandler2">
+
+    <!-- A prefix of "solr." for class names is an alias that
+         causes solr to search appropriate packages, including
+         org.apache.solr.(search|update|request|core|analysis)
+     -->
+
+    <!-- autocommit pending docs if certain criteria are met 
+    <autoCommit> 
+      <maxDocs>10000</maxDocs>
+    </autoCommit>
+    -->
+
+    <!-- The RunExecutableListener executes an external command.
+         exe - the name of the executable to run
+         dir - dir to use as the current working directory. default="."
+         wait - the calling thread waits until the executable returns. default="true"
+         args - the arguments to pass to the program.  default=nothing
+         env - environment variables to set.  default=nothing
+      -->
+    <!-- A postCommit event is fired after every commit or optimize command
+    <listener event="postCommit" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
+      <arr name="env"> <str>MYVAR=val1</str> </arr>
+    </listener>
+    -->
+    <!-- A postOptimize event is fired only after every optimize command, useful
+         in conjunction with index distribution to only distribute optimized indicies 
+    <listener event="postOptimize" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+    </listener>
+    -->
+
+  </updateHandler>
+
+
+  <query>
+    <!-- Maximum number of clauses in a boolean query... can affect
+        range or prefix queries that expand to big boolean
+        queries.  An exception is thrown if exceeded.  -->
+    <maxBooleanClauses>1024</maxBooleanClauses>
+
+    
+    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
+         unordered sets of *all* documents that match a query.
+         When a new searcher is opened, its caches may be prepopulated
+         or "autowarmed" using data from caches in the old searcher.
+         autowarmCount is the number of items to prepopulate.  For LRUCache,
+         the autowarmed items will be the most recently accessed items.
+       Parameters:
+         class - the SolrCache implementation (currently only LRUCache)
+         size - the maximum number of entries in the cache
+         initialSize - the initial capacity (number of entries) of
+           the cache.  (seel java.util.HashMap)
+         autowarmCount - the number of entries to prepopulate from
+           and old cache.
+         -->
+    <filterCache
+      class="solr.LRUCache"
+      size="200000"
+      initialSize="100000"
+      autowarmCount="50000"/>
+
+   <!-- queryResultCache caches results of searches - ordered lists of
+         document ids (DocList) based on a query, a sort, and the range
+         of documents requested.  -->
+    <queryResultCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="256"/>
+
+  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
+       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
+    <documentCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="0"/>
+
+    <!-- If true, stored fields that are not requested will be loaded lazily.
+    -->
+    <enableLazyFieldLoading>false</enableLazyFieldLoading>
+
+    <!-- Example of a generic cache.  These caches may be accessed by name
+         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
+         The purpose is to enable easy caching of user/application level data.
+         The regenerator argument should be specified as an implementation
+         of solr.search.CacheRegenerator if autowarming is desired.  -->
+    <!--
+    <cache name="myUserCache"
+      class="solr.LRUCache"
+      size="4096"
+      initialSize="1024"
+      autowarmCount="1024"
+      regenerator="org.mycompany.mypackage.MyRegenerator"
+      />
+    -->
+
+   <!-- An optimization that attempts to use a filter to satisfy a search.
+         If the requested sort does not include score, then the filterCache
+         will be checked for a filter matching the query. If found, the filter
+         will be used as the source of document ids, and then the sort will be
+         applied to that.
+    <useFilterForSortedQuery>true</useFilterForSortedQuery>
+   -->
+
+   <!-- An optimization for use with the queryResultCache.  When a search
+         is requested, a superset of the requested number of document ids
+         are collected.  For example, if a search for a particular query
+         requests matching documents 10 through 19, and queryWindowSize is 50,
+         then documents 0 through 50 will be collected and cached.  Any further
+         requests in that range can be satisfied via the cache.  -->
+    <queryResultWindowSize>10</queryResultWindowSize>
+
+    <!-- This entry enables an int hash representation for filters (DocSets)
+         when the number of items in the set is less than maxSize.  For smaller
+         sets, this representation is more memory efficient, more efficient to
+         iterate over, and faster to take intersections.  -->
+    <HashDocSet maxSize="3000" loadFactor="0.75"/>
+
+
+    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
+         into cached filters if the number of docs selected by the clause exceeds
+         the threshold (represented as a fraction of the total index) -->
+    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
+
+
+    <!-- a newSearcher event is fired whenever a new searcher is being prepared
+         and there is a current searcher handling requests (aka registered). -->
+    <!-- QuerySenderListener takes an array of NamedList and executes a
+         local query request for each NamedList in sequence. -->
+    <!--
+    <listener event="newSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- a firstSearcher event is fired whenever a new searcher is being
+         prepared but there is no current registered searcher to handle
+         requests or to gain autowarming data from. -->
+    <!--
+    <listener event="firstSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- If a search request comes in and there is no current registered searcher,
+         then immediately register the still warming searcher and use it.  If
+         "false" then all requests will block until the first searcher is done
+         warming. -->
+    <useColdSearcher>false</useColdSearcher>
+
+  </query>
+
+
+  <!-- requestHandler plugins... incoming queries will be dispatched to the
+     correct handler based on the qt (query type) param matching the
+     name of registered handlers.
+     The "standard" request handler is the default and will be used if qt
+     is not specified in the request.
+  -->
+  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
+  <requestHandler name="standard" class="solr.StandardRequestHandler">
+    <!-- default values for query parameters -->
+     <lst name="defaults">
+       <str name="echoParams">explicit</str>
+       <!-- 
+       <int name="rows">10</int>
+       <str name="fl">*</str>
+       <str name="version">2.1</str>
+        -->
+     </lst>
+  </requestHandler>
+  
+  <!-- DisMaxRequestHandler allows easy searching across multiple fields
+       for simple user-entered phrases. 
+       see http://wiki.apache.org/solr/DisMaxRequestHandler
+   -->
+  <requestHandler name="dismax" class="solr.DisMaxRequestHandler" >
+    <lst name="defaults">
+     <str name="echoParams">explicit</str>
+     <float name="tie">0.01</float>
+     <str name="qf">
+        text^1.9
+     </str>
+     <str name="pf">
+        text^1.9
+     </str>
+     <str name="fl">
+        id, text
+     </str>
+     <str name="mm">
+        2&lt;-1 5&lt;-2 6&lt;90%
+     </str>
+     <int name="ps">100</int>
+    </lst>
+  </requestHandler>
+
+  <!-- queryResponseWriter plugins... query responses will be written using the
+    writer specified by the 'wt' request parameter matching the name of a registered
+    writer.
+    The "standard" writer is the default and will be used if 'wt' is not specified 
+    in the request. XMLResponseWriter will be used if nothing is specified here.
+    The json, python, and ruby writers are also available by default.
+
+    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
+    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
+    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
+    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
+
+    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
+  -->
+
+  <!-- XSLT response writer transforms the XML output by any xslt file found
+       in Solr's conf/xslt directory.  Changes to xslt files are checked for
+       every xsltCacheLifetimeSeconds.  
+   -->
+  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
+    <int name="xsltCacheLifetimeSeconds">5</int>
+  </queryResponseWriter> 
+    
+  <!-- config for the admin interface --> 
+  <admin>
+    <defaultQuery>solr</defaultQuery>
+    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
+    <!-- pingQuery should be "URLish" ...
+         &amp; separated key=val pairs ... but there shouldn't be any
+         URL escaping of the values -->
+    <pingQuery>
+     q=solr
+    </pingQuery>
+    <!-- configure a healthcheck file for servers behind a loadbalancer
+    <healthcheck type="file">server-enabled</healthcheck>
+    -->
+  </admin>
+
+</config>
diff --git a/client/ruby/solr-ruby/solr/solr/conf/stopwords.txt b/client/ruby/solr-ruby/solr/solr/conf/stopwords.txt
new file mode 100644
index 0000000..8433c83
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/stopwords.txt
@@ -0,0 +1,57 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# a couple of test stopwords to test that the words are really being
+# configured from this file:
+stopworda
+stopwordb
+
+#Standard english stop words taken from Lucene's StopAnalyzer
+an
+and
+are
+as
+at
+be
+but
+by
+for
+if
+in
+into
+is
+it
+no
+not
+of
+on
+or
+s
+such
+t
+that
+the
+their
+then
+there
+these
+they
+this
+to
+was
+will
+with
+
diff --git a/client/ruby/solr-ruby/solr/solr/conf/synonyms.txt b/client/ruby/solr-ruby/solr/solr/conf/synonyms.txt
new file mode 100644
index 0000000..b0e31cb
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/synonyms.txt
@@ -0,0 +1,31 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+#some test synonym mappings unlikely to appear in real input text
+aaa => aaaa
+bbb => bbbb1 bbbb2
+ccc => cccc1,cccc2
+a\=>a => b\=>b
+a\,a => b\,b
+fooaaa,baraaa,bazaaa
+
+# Some synonym groups specific to this example
+GB,gib,gigabyte,gigabytes
+MB,mib,megabyte,megabytes
+Television, Televisions, TV, TVs
+#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
+#after us won't split it into two words.
+
+# Synonym mappings can be used for spelling correction too
+pixima => pixma
+
diff --git a/client/ruby/solr-ruby/solr/solr/conf/xslt/example.xsl b/client/ruby/solr-ruby/solr/solr/conf/xslt/example.xsl
new file mode 100644
index 0000000..75178f2
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/solr/conf/xslt/example.xsl
@@ -0,0 +1,132 @@
+<?xml version='1.0' encoding='UTF-8'?>
+
+<!-- 
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *     http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ -->
+
+<!-- 
+  Simple transform of Solr query results to HTML
+ -->
+<xsl:stylesheet version='1.0'
+    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
+>
+
+  <xsl:output media-type="text/html"/>
+  
+  <xsl:variable name="title" select="concat('Solr search results (',response/result/@numFound,' documents)')"/>
+  
+  <xsl:template match='/'>
+    <html>
+      <head>
+        <title><xsl:value-of select="$title"/></title>
+        <xsl:call-template name="css"/>
+      </head>
+      <body>
+        <h1><xsl:value-of select="$title"/></h1>
+        <div class="note">
+          This has been formatted by the sample "example.xsl" transform -
+          use your own XSLT to get a nicer page
+        </div>
+        <xsl:apply-templates select="response/result/doc"/>
+      </body>
+    </html>
+  </xsl:template>
+  
+  <xsl:template match="doc">
+    <xsl:variable name="pos" select="position()"/>
+    <div class="doc">
+      <table width="100%">
+        <xsl:apply-templates>
+          <xsl:with-param name="pos"><xsl:value-of select="$pos"/></xsl:with-param>
+        </xsl:apply-templates>
+      </table>
+    </div>
+  </xsl:template>
+
+  <xsl:template match="doc/*[@name='score']" priority="100">
+    <xsl:param name="pos"></xsl:param>
+    <tr>
+      <td class="name">
+        <xsl:value-of select="@name"/>
+      </td>
+      <td class="value">
+        <xsl:value-of select="."/>
+
+        <xsl:if test="boolean(//lst[@name='explain'])">
+          <xsl:element name="a">
+            <!-- can't allow whitespace here -->
+            <xsl:attribute name="href">javascript:toggle("<xsl:value-of select="concat('exp-',$pos)" />");</xsl:attribute>?</xsl:element>
+          <br/>
+          <xsl:element name="div">
+            <xsl:attribute name="class">exp</xsl:attribute>
+            <xsl:attribute name="id">
+              <xsl:value-of select="concat('exp-',$pos)" />
+            </xsl:attribute>
+            <xsl:value-of select="//lst[@name='explain']/str[position()=$pos]"/>
+          </xsl:element>
+        </xsl:if>
+      </td>
+    </tr>
+  </xsl:template>
+
+  <xsl:template match="doc/arr" priority="100">
+    <tr>
+      <td class="name">
+        <xsl:value-of select="@name"/>
+      </td>
+      <td class="value">
+        <ul>
+        <xsl:for-each select="*">
+          <li><xsl:value-of select="."/></li>
+        </xsl:for-each>
+        </ul>
+      </td>
+    </tr>
+  </xsl:template>
+
+
+  <xsl:template match="doc/*">
+    <tr>
+      <td class="name">
+        <xsl:value-of select="@name"/>
+      </td>
+      <td class="value">
+        <xsl:value-of select="."/>
+      </td>
+    </tr>
+  </xsl:template>
+
+  <xsl:template match="*"/>
+  
+  <xsl:template name="css">
+    <script>
+      function toggle(id) {
+        var obj = document.getElementById(id);
+        obj.style.display = (obj.style.display != 'block') ? 'block' : 'none';
+      }
+    </script>
+    <style type="text/css">
+      body { font-family: "Lucida Grande", sans-serif }
+      td.name { font-style: italic; font-size:80%; }
+      td { vertical-align: top; }
+      ul { margin: 0px; margin-left: 1em; padding: 0px; }
+      .note { font-size:80%; }
+      .doc { margin-top: 1em; border-top: solid grey 1px; }
+      .exp { display: none; font-family: monospace; white-space: pre; }
+    </style>
+  </xsl:template>
+
+</xsl:stylesheet>
diff --git a/client/ruby/solr-ruby/solr/start.jar b/client/ruby/solr-ruby/solr/start.jar
new file mode 100755
index 0000000..02d16d7
--- /dev/null
+++ b/client/ruby/solr-ruby/solr/start.jar
@@ -0,0 +1,2 @@
+AnyObjectId[1145d205a370cefe48580deee1fb6920c3edf0ca] was removed in git history.
+Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/solr/webapps/solr.war b/client/ruby/solr-ruby/solr/webapps/solr.war
new file mode 100644
index 0000000..1494ce4
Binary files /dev/null and b/client/ruby/solr-ruby/solr/webapps/solr.war differ
diff --git a/client/ruby/solr-ruby/test/conf/admin-extra.html b/client/ruby/solr-ruby/test/conf/admin-extra.html
new file mode 100644
index 0000000..aa739da
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/admin-extra.html
@@ -0,0 +1,31 @@
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- The content of this page will be statically included into the top
+of the admin page.  Uncomment this as an example to see there the content
+will show up.
+
+<hr>
+<i>This line will appear before the first table</i>
+<tr>
+<td colspan="2">
+This row will be appended to the end of the first table
+</td>
+</tr>
+<hr>
+
+-->
diff --git a/client/ruby/solr-ruby/test/conf/protwords.txt b/client/ruby/solr-ruby/test/conf/protwords.txt
new file mode 100644
index 0000000..1dfc0ab
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/protwords.txt
@@ -0,0 +1,21 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# Use a protected word file to protect against the stemmer reducing two
+# unrelated words to the same base word.
+
+# Some non-words that normally won't be encountered,
+# just to test that they won't be stemmed.
+dontstems
+zwhacky
+
diff --git a/client/ruby/solr-ruby/test/conf/schema.xml b/client/ruby/solr-ruby/test/conf/schema.xml
new file mode 100755
index 0000000..9ebe4d3
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/schema.xml
@@ -0,0 +1,236 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<!-- This is the Solr schema file. This file should be named "schema.xml" and
+ should be in the conf directory under the solr home
+ (i.e. ./solr/conf/schema.xml by default) 
+ or located where the classloader for the Solr webapp can find it.
+
+ For more information, on how to customize this file, please see
+ http://wiki.apache.org/solr/SchemaXml
+-->
+
+<schema name="flare" version="1.1">
+  <!-- attribute "name" is the name of this schema and is only used for display purposes.
+       Applications should change this to reflect the nature of the search collection.
+       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
+       not normally be changed by applications.
+       1.0: multiValued attribute did not exist, all fields are multiValued by nature
+       1.1: multiValued attribute introduced, false by default -->
+
+  <types>
+    <!-- field type definitions. The "name" attribute is
+       just a label to be used by field definitions.  The "class"
+       attribute and any other attributes determine the real
+       behavior of the fieldtype.
+         Class names starting with "solr" refer to java classes in the
+       org.apache.solr.analysis package.
+    -->
+
+    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
+       - StrField and TextField support an optional compressThreshold which
+       limits compression (if enabled in the derived fields) to values which
+       exceed a certain size (in characters).
+    -->
+    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- boolean type: "true" or "false" -->
+    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- The optional sortMissingLast and sortMissingFirst attributes are
+         currently supported on types that are sorted internally as strings.
+       - If sortMissingLast="true", then a sort on this field will cause documents
+         without the field to come after documents with the field,
+         regardless of the requested sort order (asc or desc).
+       - If sortMissingFirst="true", then a sort on this field will cause documents
+         without the field to come before documents with the field,
+         regardless of the requested sort order.
+       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
+         then default lucene sorting will be used which places docs without the
+         field first in an ascending sort and last in a descending sort.
+    -->    
+
+
+    <!-- numeric field types that store and index the text
+         value verbatim (and hence don't support range queries, since the
+         lexicographic ordering isn't equal to the numeric ordering) -->
+    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
+    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
+    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
+    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
+
+
+    <!-- Numeric field types that manipulate the value into
+         a string value that isn't human-readable in its internal form,
+         but with a lexicographic ordering the same as the numeric ordering,
+         so that range queries work correctly. -->
+    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
+    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
+
+
+    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
+         is a more restricted form of the canonical representation of dateTime
+         http://www.w3.org/TR/xmlschema-2/#dateTime    
+         The trailing "Z" designates UTC time and is mandatory.
+         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
+         All other components are mandatory.
+
+         Expressions can also be used to denote calculations that should be
+         performed relative to "NOW" to determine the value, ie...
+
+               NOW/HOUR
+                  ... Round to the start of the current hour
+               NOW-1DAY
+                  ... Exactly 1 day prior to now
+               NOW/DAY+6MONTHS+3DAYS
+                  ... 6 months and 3 days in the future from the start of
+                      the current day
+                      
+         Consult the DateField javadocs for more information.
+      -->
+    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
+
+    <!-- solr.TextField allows the specification of custom text analyzers
+         specified as a tokenizer and a list of token filters. Different
+         analyzers may be specified for indexing and querying.
+
+         The optional positionIncrementGap puts space between multiple fields of
+         this type on the same document, with the purpose of preventing false phrase
+         matching across fields.
+
+         For more info on customizing your analyzer chain, please see
+         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
+     -->
+
+    <!-- One can also specify an existing Analyzer class that has a
+         default constructor via the class attribute on the analyzer element
+    <fieldtype name="text_greek" class="solr.TextField">
+      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
+    </fieldType>
+    -->
+
+    <!-- A text field that only splits on whitespace for exact matching of words -->
+    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+      </analyzer>
+    </fieldtype>
+
+    <!-- A text field that uses WordDelimiterFilter to enable splitting and matching of
+        words on case-change, alpha numeric boundaries, and non-alphanumeric chars,
+        so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".
+        Synonyms and stopwords are customized by external files, and stemming is enabled.
+        Duplicate tokens at the same position (which may result from Stemmed Synonyms or
+        WordDelim parts) are removed.
+        -->
+    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
+      <analyzer type="index">
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <!-- in this example, we will only use synonyms at query time
+        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
+        -->
+        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+      <analyzer type="query">
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
+        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+
+    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
+         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
+    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
+      <analyzer>
+        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
+        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
+        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
+        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
+        <filter class="solr.LowerCaseFilterFactory"/>
+        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
+        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
+      </analyzer>
+    </fieldtype>
+
+ </types>
+
+
+ <fields>
+   <!-- Valid attributes for fields:
+     name: mandatory - the name for the field
+     type: mandatory - the name of a previously defined type from the <types> section
+     indexed: true if this field should be indexed (searchable or sortable)
+     stored: true if this field should be retrievable
+     compressed: [false] if this field should be stored using gzip compression
+       (this will only apply if the field type is compressable; among
+       the standard field types, only TextField and StrField are)
+     multiValued: true if this field may contain multiple values per document
+     omitNorms: (expert) set to true to omit the norms associated with
+       this field (this disables length normalization and index-time
+       boosting for the field, and saves some memory).  Only full-text
+       fields or fields that need an index-time boost need norms.
+   -->
+
+   <field name="id" type="string" indexed="true" stored="true"/>
+
+   <!-- catchall field, containing all other searchable text fields (implemented
+        via copyField further on in this schema  -->
+   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
+
+   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
+        will be used if the name matches any of the patterns.
+        RESTRICTION: the glob-like pattern in the name attribute must have
+        a "*" only at the start or the end.
+        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
+        Longer patterns will be matched first.  if equal size patterns
+        both match, the first appearing in the schema will be used.  -->
+   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true"/>
+   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true"/>
+ </fields>
+
+ <!-- field to use to determine and enforce document uniqueness. -->
+ <uniqueKey>id</uniqueKey>
+
+ <!-- field for the QueryParser to use when an explicit fieldname is absent -->
+ <defaultSearchField>text</defaultSearchField>
+
+ <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
+ <solrQueryParser defaultOperator="AND"/>
+
+  <!-- copyField commands copy one field to another at the time a document
+        is added to the index.  It's used either to index the same field differently,
+        or to add multiple fields to the same field for easier/faster searching.  -->
+ <copyField source="*_text" dest="text"/>
+
+ <!-- Similarity is the scoring routine for each document vs. a query.
+      A custom similarity may be specified here, but the default is fine
+      for most applications.  -->
+ <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
+
+</schema>
diff --git a/client/ruby/solr-ruby/test/conf/scripts.conf b/client/ruby/solr-ruby/test/conf/scripts.conf
new file mode 100644
index 0000000..e993bbf
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/scripts.conf
@@ -0,0 +1,24 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+user=
+solr_hostname=localhost
+solr_port=8983
+rsyncd_port=18983
+data_dir=
+webapp_name=solr
+master_host=
+master_data_dir=
+master_status_dir=
diff --git a/client/ruby/solr-ruby/test/conf/solrconfig.xml b/client/ruby/solr-ruby/test/conf/solrconfig.xml
new file mode 100755
index 0000000..0e861a2
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/solrconfig.xml
@@ -0,0 +1,302 @@
+<?xml version="1.0" ?>
+<!--
+ Licensed to the Apache Software Foundation (ASF) under one or more
+ contributor license agreements.  See the NOTICE file distributed with
+ this work for additional information regarding copyright ownership.
+ The ASF licenses this file to You under the Apache License, Version 2.0
+ (the "License"); you may not use this file except in compliance with
+ the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+ Unless required by applicable law or agreed to in writing, software
+ distributed under the License is distributed on an "AS IS" BASIS,
+ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ See the License for the specific language governing permissions and
+ limitations under the License.
+-->
+
+<config>
+
+  <!-- Used to specify an alternate directory to hold all index data
+       other than the default ./data under the Solr home.
+       If replication is in use, this should match the replication configuration. -->
+  <!--
+  <dataDir>./solr/data</dataDir>
+  -->
+
+  <indexDefaults>
+   <!-- Values here affect all index writers and act as a default unless overridden. -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+    <writeLockTimeout>1000</writeLockTimeout>
+    <commitLockTimeout>10000</commitLockTimeout>
+  </indexDefaults>
+
+  <mainIndex>
+    <!-- options specific to the main on-disk lucene index -->
+    <useCompoundFile>false</useCompoundFile>
+    <mergeFactor>10</mergeFactor>
+    <maxBufferedDocs>1000</maxBufferedDocs>
+    <maxMergeDocs>2147483647</maxMergeDocs>
+    <maxFieldLength>10000</maxFieldLength>
+
+    <!-- If true, unlock any held write or commit locks on startup. 
+         This defeats the locking mechanism that allows multiple
+         processes to safely access a lucene index, and should be
+         used with care. -->
+    <unlockOnStartup>false</unlockOnStartup>
+  </mainIndex>
+
+  <!-- the default high-performance update handler -->
+  <updateHandler class="solr.DirectUpdateHandler2">
+
+    <!-- A prefix of "solr." for class names is an alias that
+         causes solr to search appropriate packages, including
+         org.apache.solr.(search|update|request|core|analysis)
+     -->
+
+    <!-- autocommit pending docs if certain criteria are met 
+    <autoCommit> 
+      <maxDocs>10000</maxDocs>
+    </autoCommit>
+    -->
+
+    <!-- The RunExecutableListener executes an external command.
+         exe - the name of the executable to run
+         dir - dir to use as the current working directory. default="."
+         wait - the calling thread waits until the executable returns. default="true"
+         args - the arguments to pass to the program.  default=nothing
+         env - environment variables to set.  default=nothing
+      -->
+    <!-- A postCommit event is fired after every commit or optimize command
+    <listener event="postCommit" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
+      <arr name="env"> <str>MYVAR=val1</str> </arr>
+    </listener>
+    -->
+    <!-- A postOptimize event is fired only after every optimize command, useful
+         in conjunction with index distribution to only distribute optimized indicies 
+    <listener event="postOptimize" class="solr.RunExecutableListener">
+      <str name="exe">snapshooter</str>
+      <str name="dir">solr/bin</str>
+      <bool name="wait">true</bool>
+    </listener>
+    -->
+
+  </updateHandler>
+
+
+  <query>
+    <!-- Maximum number of clauses in a boolean query... can affect
+        range or prefix queries that expand to big boolean
+        queries.  An exception is thrown if exceeded.  -->
+    <maxBooleanClauses>1024</maxBooleanClauses>
+
+    
+    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
+         unordered sets of *all* documents that match a query.
+         When a new searcher is opened, its caches may be prepopulated
+         or "autowarmed" using data from caches in the old searcher.
+         autowarmCount is the number of items to prepopulate.  For LRUCache,
+         the autowarmed items will be the most recently accessed items.
+       Parameters:
+         class - the SolrCache implementation (currently only LRUCache)
+         size - the maximum number of entries in the cache
+         initialSize - the initial capacity (number of entries) of
+           the cache.  (seel java.util.HashMap)
+         autowarmCount - the number of entries to prepopulate from
+           and old cache.
+         -->
+    <filterCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="256"/>
+
+   <!-- queryResultCache caches results of searches - ordered lists of
+         document ids (DocList) based on a query, a sort, and the range
+         of documents requested.  -->
+    <queryResultCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="256"/>
+
+  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
+       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
+    <documentCache
+      class="solr.LRUCache"
+      size="512"
+      initialSize="512"
+      autowarmCount="0"/>
+
+    <!-- If true, stored fields that are not requested will be loaded lazily.
+    -->
+    <enableLazyFieldLoading>false</enableLazyFieldLoading>
+
+    <!-- Example of a generic cache.  These caches may be accessed by name
+         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
+         The purpose is to enable easy caching of user/application level data.
+         The regenerator argument should be specified as an implementation
+         of solr.search.CacheRegenerator if autowarming is desired.  -->
+    <!--
+    <cache name="myUserCache"
+      class="solr.LRUCache"
+      size="4096"
+      initialSize="1024"
+      autowarmCount="1024"
+      regenerator="org.mycompany.mypackage.MyRegenerator"
+      />
+    -->
+
+   <!-- An optimization that attempts to use a filter to satisfy a search.
+         If the requested sort does not include score, then the filterCache
+         will be checked for a filter matching the query. If found, the filter
+         will be used as the source of document ids, and then the sort will be
+         applied to that.
+    <useFilterForSortedQuery>true</useFilterForSortedQuery>
+   -->
+
+   <!-- An optimization for use with the queryResultCache.  When a search
+         is requested, a superset of the requested number of document ids
+         are collected.  For example, if a search for a particular query
+         requests matching documents 10 through 19, and queryWindowSize is 50,
+         then documents 0 through 50 will be collected and cached.  Any further
+         requests in that range can be satisfied via the cache.  -->
+    <queryResultWindowSize>10</queryResultWindowSize>
+
+    <!-- This entry enables an int hash representation for filters (DocSets)
+         when the number of items in the set is less than maxSize.  For smaller
+         sets, this representation is more memory efficient, more efficient to
+         iterate over, and faster to take intersections.  -->
+    <HashDocSet maxSize="3000" loadFactor="0.75"/>
+
+
+    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
+         into cached filters if the number of docs selected by the clause exceeds
+         the threshold (represented as a fraction of the total index) -->
+    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
+
+
+    <!-- a newSearcher event is fired whenever a new searcher is being prepared
+         and there is a current searcher handling requests (aka registered). -->
+    <!-- QuerySenderListener takes an array of NamedList and executes a
+         local query request for each NamedList in sequence. -->
+    <!--
+    <listener event="newSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- a firstSearcher event is fired whenever a new searcher is being
+         prepared but there is no current registered searcher to handle
+         requests or to gain autowarming data from. -->
+    <!--
+    <listener event="firstSearcher" class="solr.QuerySenderListener">
+      <arr name="queries">
+        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
+      </arr>
+    </listener>
+    -->
+
+    <!-- If a search request comes in and there is no current registered searcher,
+         then immediately register the still warming searcher and use it.  If
+         "false" then all requests will block until the first searcher is done
+         warming. -->
+    <useColdSearcher>false</useColdSearcher>
+
+  </query>
+
+
+  <!-- requestHandler plugins... incoming queries will be dispatched to the
+     correct handler based on the qt (query type) param matching the
+     name of registered handlers.
+     The "standard" request handler is the default and will be used if qt
+     is not specified in the request.
+  -->
+  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
+  <requestHandler name="standard" class="solr.StandardRequestHandler">
+    <!-- default values for query parameters -->
+     <lst name="defaults">
+       <str name="echoParams">explicit</str>
+       <!-- 
+       <int name="rows">10</int>
+       <str name="fl">*</str>
+       <str name="version">2.1</str>
+        -->
+     </lst>
+  </requestHandler>
+  
+  <!-- DisMaxRequestHandler allows easy searching across multiple fields
+       for simple user-entered phrases. 
+       see http://wiki.apache.org/solr/DisMaxRequestHandler
+   -->
+  <requestHandler name="dismax" class="solr.DisMaxRequestHandler" >
+    <lst name="defaults">
+     <str name="echoParams">explicit</str>
+     <float name="tie">0.01</float>
+     <str name="qf">
+        text^1.9
+     </str>
+     <str name="pf">
+        text^1.9
+     </str>
+     <str name="fl">
+        id, text
+     </str>
+     <str name="mm">
+        2&lt;-1 5&lt;-2 6&lt;90%
+     </str>
+     <int name="ps">100</int> -->
+    </lst>
+  </requestHandler>
+
+  <!-- queryResponseWriter plugins... query responses will be written using the
+    writer specified by the 'wt' request parameter matching the name of a registered
+    writer.
+    The "standard" writer is the default and will be used if 'wt' is not specified 
+    in the request. XMLResponseWriter will be used if nothing is specified here.
+    The json, python, and ruby writers are also available by default.
+
+    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
+    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
+    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
+    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
+
+    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
+  -->
+
+  <!-- XSLT response writer transforms the XML output by any xslt file found
+       in Solr's conf/xslt directory.  Changes to xslt files are checked for
+       every xsltCacheLifetimeSeconds.  
+   -->
+  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
+    <int name="xsltCacheLifetimeSeconds">5</int>
+  </queryResponseWriter> 
+    
+  <!-- config for the admin interface --> 
+  <admin>
+    <defaultQuery>solr</defaultQuery>
+    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
+    <!-- pingQuery should be "URLish" ...
+         &amp; separated key=val pairs ... but there shouldn't be any
+         URL escaping of the values -->
+    <pingQuery>
+     q=solr
+    </pingQuery>
+    <!-- configure a healthcheck file for servers behind a loadbalancer
+    <healthcheck type="file">server-enabled</healthcheck>
+    -->
+  </admin>
+
+</config>
diff --git a/client/ruby/solr-ruby/test/conf/stopwords.txt b/client/ruby/solr-ruby/test/conf/stopwords.txt
new file mode 100644
index 0000000..8433c83
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/stopwords.txt
@@ -0,0 +1,57 @@
+# Licensed to the Apache Software Foundation (ASF) under one or more
+# contributor license agreements.  See the NOTICE file distributed with
+# this work for additional information regarding copyright ownership.
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+# a couple of test stopwords to test that the words are really being
+# configured from this file:
+stopworda
+stopwordb
+
+#Standard english stop words taken from Lucene's StopAnalyzer
+an
+and
+are
+as
+at
+be
+but
+by
+for
+if
+in
+into
+is
+it
+no
+not
+of
+on
+or
+s
+such
+t
+that
+the
+their
+then
+there
+these
+they
+this
+to
+was
+will
+with
+
diff --git a/client/ruby/solr-ruby/test/conf/synonyms.txt b/client/ruby/solr-ruby/test/conf/synonyms.txt
new file mode 100644
index 0000000..b0e31cb
--- /dev/null
+++ b/client/ruby/solr-ruby/test/conf/synonyms.txt
@@ -0,0 +1,31 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+#-----------------------------------------------------------------------
+#some test synonym mappings unlikely to appear in real input text
+aaa => aaaa
+bbb => bbbb1 bbbb2
+ccc => cccc1,cccc2
+a\=>a => b\=>b
+a\,a => b\,b
+fooaaa,baraaa,bazaaa
+
+# Some synonym groups specific to this example
+GB,gib,gigabyte,gigabytes
+MB,mib,megabyte,megabytes
+Television, Televisions, TV, TVs
+#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
+#after us won't split it into two words.
+
+# Synonym mappings can be used for spelling correction too
+pixima => pixma
+
diff --git a/client/ruby/solr-ruby/test/functional/server_test.rb b/client/ruby/solr-ruby/test/functional/server_test.rb
new file mode 100644
index 0000000..1485129
--- /dev/null
+++ b/client/ruby/solr-ruby/test/functional/server_test.rb
@@ -0,0 +1,203 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class BadRequest < Solr::Request::Standard
+  def response_format
+    :invalid
+  end
+end
+
+class ServerTest < Test::Unit::TestCase
+  include Solr
+
+  def setup
+    @connection = Connection.new("http://localhost:8888/solr", :autocommit => :on)
+    clean
+  end
+ 
+  def test_full_lifecycle
+    # make sure autocommit is on
+    assert @connection.autocommit
+
+    # make sure this doc isn't there to begin with
+    @connection.delete(123456)
+
+    # add it
+    @connection.add(:id => 123456, :text => 'Borges')
+
+    # look for it
+    response = @connection.query('Borges')
+    assert_equal 1, response.total_hits
+    assert_equal '123456', response.hits[0]['id']
+    
+    # look for it via dismax
+    response = @connection.search('Borges')
+    assert_equal 1, response.total_hits
+    assert_equal '123456', response.hits[0]['id']
+
+    # delete it
+    @connection.delete(123456)
+
+    # make sure it's gone
+    response = @connection.query('Borges')
+    assert_equal 0, response.total_hits
+  end 
+
+  def test_i18n_full_lifecycle
+    # make sure autocommit is on
+    assert @connection.autocommit
+
+    # make sure this doc isn't there to begin with
+    @connection.delete(123456)
+
+    # add it
+    @connection.add(:id => 123456, :text => '?')
+
+    # look for it
+    response = @connection.query('?')
+    assert_equal 1, response.total_hits
+    assert_equal '123456', response.hits[0]['id']
+
+    # delete it
+    @connection.delete(123456)
+
+    # make sure it's gone
+    response = @connection.query('? ?')
+    assert_equal 0, response.total_hits
+  end
+  
+  def test_sorting
+    @connection.add(:id => 1, :text => 'aaa woot')
+    @connection.add(:id => 2, :text => 'bbb woot')
+    @connection.add(:id => 3, :text => 'ccc woot')
+    @connection.commit
+    
+    results = @connection.query('woot', :sort => [:id => :descending], :rows => 2)
+    assert_equal([3, 2], results.hits.map { |h| h['id'].to_i })
+    
+    results = @connection.search('woot', :sort => [:id => :descending], :rows => 2)
+    assert_equal([3, 2], results.hits.map { |h| h['id'].to_i })
+    
+    @connection.delete_by_query("id:1 OR id:2 OR id:3")
+  end
+
+  def test_bad_connection
+    conn = Solr::Connection.new 'http://127.0.0.1:9999/invalid'
+    begin
+      conn.send(Solr::Request::Ping.new)
+      flunk "Expected exception not raised"
+    rescue ::Exception
+      # expected
+      assert true
+    end
+  end
+  
+  def test_bad_url
+    conn = Solr::Connection.new 'http://localhost:8888/invalid'
+    assert_raise(Net::HTTPServerException) do
+      conn.send(Solr::Request::Ping.new)
+    end
+  end
+  
+  def test_commit
+    response = @connection.send(Solr::Request::Commit.new)
+    assert_equal "<result status=\"0\"></result>", response.raw_response
+  end
+  
+  def test_optimize
+    response = @connection.send(Solr::Request::Optimize.new)
+    assert_equal "<result status=\"0\"></result>", response.raw_response
+  end
+  
+  def test_ping
+    assert_equal true, @connection.ping
+  end
+
+  def test_delete_with_query
+    assert_equal true, @connection.delete_by_query('[* TO *]')
+  end
+
+  def test_ping_with_bad_server
+    conn = Solr::Connection.new 'http://localhost:8888/invalid'
+    assert_equal false, conn.ping
+  end
+  
+  def test_invalid_response_format
+    request = BadRequest.new(:query => "solr")
+    assert_raise(Solr::Exception) do
+      @connection.send(request)
+    end
+  end
+  
+  def test_escaping
+    doc = Solr::Document.new :id => 47, :ruby_text => 'puts "ouch!"'
+    @connection.add(doc)
+    @connection.commit
+    
+    request = Solr::Request::Standard.new :query => 'ouch'
+    result = @connection.send(request)
+    
+    assert_match /puts/, result.raw_response
+  end
+
+  def test_add_document
+    doc = {:id => 999, :text => 'hi there!'}
+    request = Solr::Request::AddDocument.new(doc)
+    response = @connection.send(request)
+    assert response.status_code == '0'
+  end
+
+  def test_update
+    @connection.update(:id => 999, :text => 'update test')
+  end
+
+  def test_no_such_field
+    doc = {:id => 999, :bogus => 'foo'}
+    request = Solr::Request::AddDocument.new(doc)
+    response = @connection.send(request)
+    assert_equal false, response.ok? 
+    assert_match "ERROR:unknown field 'bogus'", response.status_message
+  end
+  
+  def test_index_info
+    doc = {:id => 999, :test_index_facet => 'value'}
+    @connection.add(doc)
+    info = @connection.send(Solr::Request::IndexInfo.new)
+    assert info.field_names.include?("id") && info.field_names.include?("test_index_facet")
+    assert_equal 1, info.num_docs
+  end
+  
+  def test_highlighting
+    @connection.add(:id => 1, :title_text => "Apache Solr")
+    
+    request = Solr::Request::Standard.new(:query => 'solr',
+      :highlighting => {
+        :field_list => ['title_text'],
+        :max_snippets => 3,
+        :prefix => ">>",
+        :suffix => "<<"
+      }
+    )
+    
+    response = @connection.send(request)
+    assert_equal ["Apache >>Solr<<"], response.highlighted(1, :title_text)
+  end
+
+  # wipe the index clean
+  def clean
+    @connection.delete_by_query('[* TO *]')
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/functional/test_solr_server.rb b/client/ruby/solr-ruby/test/functional/test_solr_server.rb
new file mode 100644
index 0000000..d57494f
--- /dev/null
+++ b/client/ruby/solr-ruby/test/functional/test_solr_server.rb
@@ -0,0 +1,91 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# A singleton class for starting/stopping a Solr server for testing purposes
+# The behavior of TestSolrServer can be modified prior to start() by changing 
+# port, solr_home, and quiet properties.
+
+class TestSolrServer
+  require 'singleton'
+  include Singleton
+  attr_accessor :port, :solr_home, :quiet
+
+  # configure the singleton with some defaults
+  def initialize
+    @port = 8888
+    @quiet = true
+    root_dir = File.expand_path(File.dirname(__FILE__) + '/../..')
+    @solr_dir = "#{root_dir}/solr"
+    @solr_home = "#{root_dir}/test"
+    @pid = nil
+  end
+
+  def self.wrap(params = {})
+    error = false
+    solr_server = self.instance
+    solr_server.quiet = params[:quiet]
+    begin
+      puts "starting solr server on #{RUBY_PLATFORM}"
+      solr_server.start
+      sleep params[:startup_wait] || 5
+      yield
+    rescue
+      error = true
+    ensure
+      puts "stopping solr server"
+      solr_server.stop
+    end
+
+    return error
+  end
+  
+  if RUBY_PLATFORM =~ /mswin32/
+    require 'win32/process'
+
+    # start the solr server
+    def start
+      Dir.chdir(@solr_dir) do
+        @pid = Process.create(
+              :app_name         => "java -Djetty.port=#{@port} -Dsolr.solr.home=#{@solr_home} -jar start.jar",
+              :creation_flags   => Process::DETACHED_PROCESS,
+              :process_inherit  => false,
+              :thread_inherit   => true,
+              :cwd              => "#{@solr_dir}"
+           ).process_id
+      end
+    end
+
+    # stop a running solr server
+    def stop
+      Process.kill(1, @pid)
+      Process.wait
+    end
+  else # Not Windows
+    # start the solr server
+    def start
+      Dir.chdir(@solr_dir) do
+        @pid = fork do
+          STDERR.close if @quiet
+          exec "java -Djetty.port=#{@port} -Dsolr.solr.home=#{@solr_home} " +
+            "-jar start.jar"
+        end
+      end
+    end
+
+    # stop a running solr server
+    def stop
+      Process.kill('TERM', @pid)
+      Process.wait
+    end
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/add_document_test.rb b/client/ruby/solr-ruby/test/unit/add_document_test.rb
new file mode 100644
index 0000000..af43644
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/add_document_test.rb
@@ -0,0 +1,40 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr_mock_base'
+
+class AddDocumentTest < SolrMockBaseTestCase
+
+  def test_add_document_response
+    conn = Solr::Connection.new('http://localhost:9999/solr')
+    set_post_return('<result status="0"></result>')
+    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
+    response = conn.send(Solr::Request::AddDocument.new(doc))
+    assert_equal true, response.ok?
+  end
+
+  def test_bad_add_document_response
+    conn = Solr::Connection.new('http://localhost:9999/solr')
+    set_post_return('<result status="400"></result>')
+    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
+    response = conn.send(Solr::Request::AddDocument.new(doc))
+    assert_equal false, response.ok?
+  end
+
+  def test_shorthand
+    conn = Solr::Connection.new('http://localhost:9999/solr')
+    set_post_return('<result status="0"></result>')
+    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
+    assert_equal true, conn.add(:id => '123', :text => 'Tlon, Uqbar, Orbis Tetius')
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/commit_test.rb b/client/ruby/solr-ruby/test/unit/commit_test.rb
new file mode 100644
index 0000000..7c304c5
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/commit_test.rb
@@ -0,0 +1,41 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr_mock_base'
+
+class CommitTest < SolrMockBaseTestCase
+
+  def test_commit
+    xml = '<result status="0"></result>'
+    conn = Solr::Connection.new('http://localhost:9999/solr')
+    set_post_return(xml)
+    response = conn.send(Solr::Request::Commit.new)
+    assert_kind_of Solr::Response::Commit, response
+    assert true, response.ok?
+
+    # test shorthand
+    assert_equal true, conn.commit
+  end
+
+  def test_invalid_commit
+    xml = '<foo>bar</foo>'
+    conn = Solr::Connection.new('http://localhost:9999/solr')
+    set_post_return(xml)
+    response = conn.send(Solr::Request::Commit.new)
+    assert_kind_of Solr::Response::Commit, response
+    assert_equal false, response.ok?
+
+    # test shorthand
+    assert_equal false, conn.commit
+   end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/connection_test.rb b/client/ruby/solr-ruby/test/unit/connection_test.rb
new file mode 100755
index 0000000..cba4f16
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/connection_test.rb
@@ -0,0 +1,55 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+require 'solr_mock_base'
+
+class ConnectionTest < SolrMockBaseTestCase
+  def test_mock
+    connection = Connection.new("http://localhost:9999")
+    set_post_return("foo")
+    assert_equal "foo", connection.post(Solr::Request::AddDocument.new)
+  end
+  
+  def test_bad_url
+    assert_raise(RuntimeError) do
+      Connection.new("ftp://localhost:9999")
+    end
+  end
+
+  def test_connection_initialize
+    connection = Solr::Connection.new("http://localhost:8983/solr")
+    assert_equal 'localhost', connection.url.host
+    assert_equal 8983, connection.url.port
+    assert_equal '/solr', connection.url.path
+  end
+
+  def test_non_standard_context
+    connection = Solr::Connection.new("http://localhost:8983/index")
+    assert_equal '/index', connection.url.path
+  end
+
+  def test_xml_response
+    connection = Connection.new("http://localhost:9999")
+    set_post_return "<bogus/>"
+    response = connection.send(Solr::Request::Ping.new)
+    assert_equal "<bogus/>", response.raw_response
+  end
+
+  def test_ruby_response
+    connection = Connection.new("http://localhost:9999")
+    set_post_return "{'responseHeader' => {}, 'response' => {}}"
+    response = connection.send(Solr::Request::Standard.new(:query => 'foo'))
+    assert_equal({'responseHeader' => {}, 'response' => {}}, response.data)
+  end
+end
diff --git a/client/ruby/solr-ruby/test/unit/delete_test.rb b/client/ruby/solr-ruby/test/unit/delete_test.rb
new file mode 100644
index 0000000..7feb9e8
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/delete_test.rb
@@ -0,0 +1,56 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr_mock_base'
+
+class DeleteTest <  SolrMockBaseTestCase
+
+  def test_delete_request
+    request = Solr::Request::Delete.new(:id => '123')
+    assert_match(/<delete>[\s]*<id>123<\/id>[\s]*<\/delete>/m, request.to_s)
+  end
+
+  def test_delete_by_query_request
+    request = Solr::Request::Delete.new(:query => 'name:summers')
+    assert_match(/<delete>[\s]*<query>name:summers<\/query>[\s]*<\/delete>/m, request.to_s)
+  end
+
+  def test_delete_response
+    conn = Solr::Connection.new 'http://localhost:9999/solr'
+    set_post_return('<result status="0"></result>')
+    response = conn.send(Solr::Request::Delete.new(:id => 123))
+    assert_equal true, response.ok? 
+  end
+  
+  def test_bad_delete_request
+    assert_raise(Solr::Exception) do
+      Solr::Request::Delete.new(:bogus => :param)
+    end
+
+    assert_raise(Solr::Exception) do
+      Solr::Request::Delete.new(:id => 529, :query => "id:529")
+    end
+  end
+
+  def test_bad_delete_response
+    conn = Solr::Connection.new 'http://localhost:9999/solr'
+    set_post_return('<result status="400">uhoh</result>')
+    response = conn.send(Solr::Request::Delete.new(:id => 123))
+    assert_equal false, response.ok? 
+  end
+
+  def test_delete_by_i18n_query_request
+    request = Solr::Request::Delete.new(:query => '')
+    assert_match(/<delete>[\s]*<query><\/query>[\s]*<\/delete>/m, request.to_s)
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/dismax_request_test.rb b/client/ruby/solr-ruby/test/unit/dismax_request_test.rb
new file mode 100644
index 0000000..7141334
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/dismax_request_test.rb
@@ -0,0 +1,26 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class DismaxRequestTest < Test::Unit::TestCase
+  
+  def test_basic_query
+    request = Solr::Request::Dismax.new(:query => 'query', :phrase_slop => '1000', :sort => [{:deedle => :descending}])
+    assert_match(/q=query/, request.to_s)
+    assert_match(/qt=dismax/, request.to_s)
+    assert_match(/ps=1000/, request.to_s)
+    assert_match(/sort=deedle%20desc/, request.to_s)
+  end
+  
+end
\ No newline at end of file
diff --git a/client/ruby/solr-ruby/test/unit/document_test.rb b/client/ruby/solr-ruby/test/unit/document_test.rb
new file mode 100644
index 0000000..09a7511
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/document_test.rb
@@ -0,0 +1,59 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class DocumentTest < Test::Unit::TestCase
+
+  def test_xml
+    doc = Solr::Document.new
+    doc << Solr::Field.new(:creator => 'Erik Hatcher')
+    assert_kind_of Solr::XML::Element, doc.to_xml
+    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
+  end
+
+  def test_repeatable
+    doc = Solr::Document.new
+    doc << Solr::Field.new(:creator => 'Erik Hatcher')
+    doc << Solr::Field.new(:creator => 'Otis Gospodnetic')
+    assert_kind_of Solr::XML::Element, doc.to_xml
+    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<field name=['"]creator['"]>Otis Gospodnetic<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
+  end
+  
+  def test_repeatable_in_hash
+    doc = Solr::Document.new({:creator => ['Erik Hatcher', 'Otis Gospodnetic']})
+    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<field name=['"]creator['"]>Otis Gospodnetic<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
+  end
+  
+  def test_bad_doc
+    doc = Solr::Document.new
+    assert_raise(RuntimeError) do
+      doc << "invalid"
+    end
+  end
+
+  def test_hash_shorthand
+    doc = Solr::Document.new :creator => 'Erik Hatcher', :title => 'Lucene in Action'
+    assert_equal 'Erik Hatcher', doc[:creator]
+    assert_equal 'Lucene in Action', doc[:title]
+    assert_equal nil, doc[:foo]
+    
+    doc = Solr::Document.new
+    doc << {:creator => 'Erik Hatcher', :title => 'Lucene in Action'}
+    doc[:subject] = 'Search'
+    assert_equal 'Erik Hatcher', doc[:creator]
+    assert_equal 'Lucene in Action', doc[:title]
+    assert_equal 'Search', doc[:subject]
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/field_test.rb b/client/ruby/solr-ruby/test/unit/field_test.rb
new file mode 100644
index 0000000..ca8d363
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/field_test.rb
@@ -0,0 +1,42 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class FieldTest < Test::Unit::TestCase
+  
+  def test_xml
+    field = Solr::Field.new :creator => 'Erik Hatcher'
+    assert_kind_of Solr::XML::Element, field.to_xml
+    assert_match(/<field name=["']creator["']>Erik Hatcher<\/field>/, field.to_xml.to_s)
+  end
+  
+  def test_escaped_xml
+    field = Solr::Field.new :creator => 'Erik Hatcher & His Amazing Leaping Ability'
+    assert_kind_of Solr::XML::Element, field.to_xml
+    assert_match(/<field name=["']creator["']>Erik Hatcher &amp; His Amazing Leaping Ability<\/field>/, field.to_xml.to_s)
+  end
+  
+  def test_xml_date
+    field = Solr::Field.new :time => Time.now
+    assert_kind_of Solr::XML::Element, field.to_xml
+    assert_match(/<field name=["']time["']>[\d]{4}-[\d]{2}-[\d]{2}T[\d]{2}:[\d]{2}:[\d]{2}Z<\/field>/, field.to_xml.to_s)
+  end
+  
+  def test_i18n_xml
+    field = Solr::Field.new :i18nstring => '? ?'
+    assert_kind_of Solr::XML::Element, field.to_xml
+    assert_match(/<field name=["']i18nstring["']>? ?<\/field>/m, field.to_xml.to_s)
+  end
+  
+end
diff --git a/client/ruby/solr-ruby/test/unit/ping_test.rb b/client/ruby/solr-ruby/test/unit/ping_test.rb
new file mode 100644
index 0000000..7d4dd30
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/ping_test.rb
@@ -0,0 +1,51 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr_mock_base'
+
+class PingTest < SolrMockBaseTestCase 
+
+  def test_ping_response
+    xml = 
+<<PING_RESPONSE
+
+<?xml-stylesheet type="text/xsl" href="ping.xsl"?>
+
+<solr>
+  <ping>
+
+  </ping>
+</solr>
+PING_RESPONSE
+    conn = Solr::Connection.new('http://localhost:9999')
+    set_post_return(xml)
+    response = conn.send(Solr::Request::Ping.new)
+    assert_kind_of Solr::Response::Ping, response
+    assert_equal true, response.ok? 
+
+    # test shorthand
+    assert true, conn.ping
+  end
+
+  def test_bad_ping_response
+    xml = "<foo>bar</foo>"
+    conn = Solr::Connection.new('http://localhost:9999')
+    set_post_return(xml)
+    response = conn.send(Solr::Request::Ping.new)
+    assert_kind_of Solr::Response::Ping, response
+    assert_equal false, response.ok?
+
+    # test shorthand
+    assert_equal false, conn.ping
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/request_test.rb b/client/ruby/solr-ruby/test/unit/request_test.rb
new file mode 100755
index 0000000..e99fa6d
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/request_test.rb
@@ -0,0 +1,61 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class BadRequest < Solr::Request::Base
+end
+
+class RequestTest < Test::Unit::TestCase
+
+  def test_commit_request
+    request = Solr::Request::Commit.new
+    assert_equal :xml, request.response_format
+    assert_equal 'update', request.handler
+    assert_equal '<commit/>', request.to_s
+  end
+  
+  def test_add_doc_request
+    request = Solr::Request::AddDocument.new(:title => "title")
+    assert_match(/<add>[\s]*<doc>[\s]*<field name=["']title["']>title<\/field>[\s]*<\/doc>[\s]*<\/add>/m, request.to_s)
+    assert_equal :xml, request.response_format
+    assert_equal 'update', request.handler
+    
+    assert_raise(RuntimeError) do
+      Solr::Request::AddDocument.new("invalid")
+    end
+  end
+  
+  def test_add_multidoc_request
+    request = Solr::Request::AddDocument.new([{:title => "title1"}, {:title => "title2"}])
+    assert_match(/<add>[\s]*<doc>[\s]*<field name=["']title["']>title1<\/field>[\s]*<\/doc>[\s]*<doc>[\s]*<field name=["']title["']>title2<\/field>[\s]*<\/doc>[\s]*<\/add>/m, request.to_s)
+    assert_equal :xml, request.response_format
+    assert_equal 'update', request.handler
+  end
+  
+  def test_ping_request
+    request = Solr::Request::Ping.new
+    assert_equal :xml, request.response_format
+  end
+
+  def test_bad_request_class
+    assert_raise(RuntimeError) do
+      BadRequest.new.response_format
+    end
+    
+    assert_raise(RuntimeError) do
+      BadRequest.new.handler
+    end
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/response_test.rb b/client/ruby/solr-ruby/test/unit/response_test.rb
new file mode 100644
index 0000000..846510c
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/response_test.rb
@@ -0,0 +1,42 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+require 'solr_mock_base'
+
+
+class ResponseTest < SolrMockBaseTestCase
+
+  def test_response_xml_error
+    begin
+      Solr::Response::Xml.new("<broken>invalid xml&")
+      flunk("failed to get Solr::Exception as expected") 
+    rescue Exception => exception
+      assert_kind_of Solr::Exception, exception
+      assert_match 'invalid response xml', exception.to_s
+    end
+  end
+  
+  def test_invalid_ruby
+    assert_raise(Solr::Exception) do
+      Solr::Response::Ruby.new(' {...')
+    end
+  end
+  
+  def test_bogus_request_handling
+    assert_raise(Solr::Exception) do
+      Solr::Response::Base.make_response(Solr::Request::Select.new, "response data")
+    end
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/solr_mock_base.rb b/client/ruby/solr-ruby/test/unit/solr_mock_base.rb
new file mode 100755
index 0000000..86e676a
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/solr_mock_base.rb
@@ -0,0 +1,40 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+# TODO: Maybe replace this with flexmock
+class SolrMockBaseTestCase < Test::Unit::TestCase
+  include Solr
+  
+  def setup
+    Connection.send(:alias_method, :orig_post, :post)
+  end
+  
+  def teardown
+    Connection.send(:alias_method, :post, :orig_post)
+  end
+    
+  def set_post_return(value)
+    Connection.class_eval %{
+      def post(request)
+        %q{#{value}}
+      end
+    }
+  end
+  
+  def test_dummy
+    # So Test::Unit is happy running this class
+  end
+    
+end
diff --git a/client/ruby/solr-ruby/test/unit/standard_request_test.rb b/client/ruby/solr-ruby/test/unit/standard_request_test.rb
new file mode 100755
index 0000000..85dc782
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/standard_request_test.rb
@@ -0,0 +1,108 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'test/unit'
+require 'solr'
+
+class StandardRequestTest < Test::Unit::TestCase
+
+  def test_basic_query
+    request = Solr::Request::Standard.new(:query => 'query')
+    assert_equal :ruby, request.response_format
+    assert_equal 'select', request.handler
+    assert_equal 'query', request.to_hash[:q]
+    assert_match /q=query/, request.to_s
+  end
+  
+  def test_bad_params
+    assert_raise(RuntimeError) do
+      Solr::Request::Standard.new(:foo => "invalid")
+    end
+    
+    assert_raise(RuntimeError) do
+      Solr::Request::Standard.new(:query => "valid", :foo => "invalid")
+    end
+    
+    assert_raise(RuntimeError) do
+      Solr::Request::Standard.new(:query => "valid", :operator => :bogus)
+    end
+  end
+  
+  def test_common_params
+    request = Solr::Request::Standard.new(:query => 'query', :start => 10, :rows => 50,
+           :filter_queries => ['fq1', 'fq2'], :field_list => ['id','title','score'], :operator => :and)
+    assert_equal 10, request.to_hash[:start]
+    assert_equal 50, request.to_hash[:rows]
+    assert_equal ['fq1','fq2'], request.to_hash[:fq]
+    assert_equal "id,title,score", request.to_hash[:fl]
+    assert_equal "AND", request.to_hash["q.op"]
+  end
+    
+  def test_missing_params
+    request = Solr::Request::Standard.new(:query => 'query', :debug_query => false, :facets => {:fields =>[:category_facet]})
+    assert_nil request.to_hash[:rows]
+    assert_no_match /rows/, request.to_s
+    assert_no_match /facet\.sort/, request.to_s
+    assert_match /debugQuery/, request.to_s
+  end
+  
+  def test_facet_params_all
+    request = Solr::Request::Standard.new(:query => 'query',
+       :facets => {
+         :fields => [:genre,           
+                     # field that overrides the global facet parameters
+                     {:year => {:limit => 50, :mincount => 0, :missing => false, :sort => :term, :prefix=>"199"}}], 
+         :queries => ["q1", "q2"],
+         :prefix => "cat",
+         :limit => 5, :zeros => true, :mincount => 20, :sort => :count  # global facet parameters
+        }
+    )
+    
+    hash = request.to_hash
+    assert_equal true, hash[:facet]
+    assert_equal [:genre, :year], hash["facet.field"]
+    assert_equal ["q1", "q2"], hash["facet.query"]
+    assert_equal 5, hash["facet.limit"]
+    assert_equal 20, hash["facet.mincount"]
+    assert_equal true, hash["facet.sort"]
+    assert_equal "cat", hash["facet.prefix"]
+    assert_equal 50, hash["f.year.facet.limit"]
+    assert_equal 0, hash["f.year.facet.mincount"]
+    assert_equal false, hash["f.year.facet.sort"]
+    assert_equal "199", hash["f.year.facet.prefix"]
+  end
+
+  def test_basic_sort
+    request = Solr::Request::Standard.new(:query => 'query', :sort => [{:title => :descending}])
+    assert_equal 'query;title desc', request.to_hash[:q]
+  end
+  
+  def test_highlighting
+    request = Solr::Request::Standard.new(:query => 'query',
+      :highlighting => {
+        :field_list => ['title', 'author'],
+        :max_snippets => 3,
+        :require_field_match => true,
+        :prefix => "<blink>",
+        :suffix => "</blink>"
+      }
+    )
+    
+    hash = request.to_hash
+    assert_equal true, hash[:hl]
+    assert_equal "title,author", hash["hl.fl"]
+    assert_equal true, hash["hl.requireFieldMatch"]
+    assert_equal "<blink>", hash["hl.simple.pre"]
+    assert_equal "</blink>", hash["hl.simple.post"]
+  end
+
+end
diff --git a/client/ruby/solr-ruby/test/unit/standard_response_test.rb b/client/ruby/solr-ruby/test/unit/standard_response_test.rb
new file mode 100644
index 0000000..81175d9
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/standard_response_test.rb
@@ -0,0 +1,174 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+require 'solr_mock_base'
+
+class StandardResponseTest <  SolrMockBaseTestCase
+
+  def test_basic
+    ruby_code = 
+<<RUBY_CODE
+{
+     'responseHeader'=>{
+      'status'=>0,
+      'QTime'=>1,
+      'params'=>{
+      'wt'=>'ruby',
+      'rows'=>'10',
+      'explainOther'=>'',
+      'start'=>'0',
+      'hl.fl'=>'',
+      'indent'=>'on',
+      'q'=>'guido',
+      'fl'=>'*,score',
+      'qt'=>'standard',
+      'version'=>'2.2'}},
+     'response'=>{'numFound'=>1,'start'=>0,'maxScore'=>0.67833745,'docs'=>[
+      {
+       'name'=>'guido von rossum',
+       'id'=>'123',
+       'timestamp'=>'2007-01-16T09:55:30.589Z',
+       'score'=>0.67833745}]
+     }}
+RUBY_CODE
+    conn = Solr::Connection.new 'http://localhost:9999'
+    set_post_return(ruby_code)
+    response = conn.send(Solr::Request::Standard.new(:query => 'foo'))
+    assert_equal true, response.ok?
+    assert response.query_time
+    assert_equal 1, response.total_hits
+    assert_equal 0, response.start
+    assert_equal 0.67833745, response.max_score
+    assert_equal 1, response.hits.length
+  end
+
+  def test_iteration
+    ruby_code = 
+<<RUBY_CODE
+{
+     'responseHeader'=>{
+      'status'=>0,
+      'QTime'=>0,
+      'params'=>{
+      'wt'=>'ruby',
+      'rows'=>'10',
+      'explainOther'=>'',
+      'start'=>'0',
+      'hl.fl'=>'',
+      'indent'=>'on',
+      'q'=>'guido',
+      'fl'=>'*,score',
+      'qt'=>'standard',
+      'version'=>'2.2'}},
+     'response'=>{'numFound'=>22,'start'=>0,'maxScore'=>0.53799295,'docs'=>[
+      {
+       'name'=>'guido von rossum the 0',
+       'id'=>'0',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 1',
+       'id'=>'1',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 2',
+       'id'=>'2',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 3',
+       'id'=>'3',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 4',
+       'id'=>'4',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 5',
+       'id'=>'5',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 6',
+       'id'=>'6',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 7',
+       'id'=>'7',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 8',
+       'id'=>'8',
+       'score'=>0.53799295},
+      {
+       'name'=>'guido von rossum the 9',
+       'id'=>'9',
+       'score'=>0.53799295}]
+     }}
+RUBY_CODE
+    conn = Solr::Connection.new 'http://localhost:9999'
+    set_post_return(ruby_code)
+
+    count = 0
+    conn.query('foo') do |hit|
+      assert_equal "guido von rossum the #{count}", hit['name']
+      count += 1
+    end
+
+    assert_equal 10, count
+  end
+  
+  def test_facets
+    ruby_code =
+    <<RUBY_CODE
+    {
+     'responseHeader'=>{
+      'status'=>0,
+      'QTime'=>1897,
+      'params'=>{
+    	'facet.limit'=>'20',
+    	'wt'=>'ruby',
+    	'rows'=>'0',
+    	'facet'=>'true',
+    	'facet.mincount'=>'1',
+    	'facet.field'=>[
+    	 'subject_genre_facet',
+    	 'subject_geographic_facet',
+    	 'subject_format_facet',
+    	 'subject_era_facet',
+    	 'subject_topic_facet'],
+    	'indent'=>'true',
+    	'fl'=>'*,score',
+    	'q'=>'[* TO *]',
+    	'qt'=>'standard',
+    	'facet.sort'=>'true'}},
+     'response'=>{'numFound'=>49999,'start'=>0,'maxScore'=>1.0,'docs'=>[]
+     },
+     'facet_counts'=>{
+      'facet_queries'=>{},
+      'facet_fields'=>{
+    	'subject_genre_facet'=>[
+    	  'Biography.',2605,
+    	 'Congresses.',1837,
+    	 'Bibliography.',672,
+    	 'Exhibitions.',642,
+    	 'Periodicals.',615,
+    	 'Sources.',485]}}
+  	 }
+RUBY_CODE
+    set_post_return(ruby_code)
+    conn = Solr::Connection.new "http://localhost:9999"
+    response = conn.query('foo')
+    facets = response.field_facets('subject_genre_facet')
+    assert_equal 2605, facets[0].value
+    assert_equal 485, facets[5].value
+  end
+
+end
+
diff --git a/client/ruby/solr-ruby/test/unit/suite.rb b/client/ruby/solr-ruby/test/unit/suite.rb
new file mode 100755
index 0000000..4403c51
--- /dev/null
+++ b/client/ruby/solr-ruby/test/unit/suite.rb
@@ -0,0 +1,25 @@
+# The ASF licenses this file to You under the Apache License, Version 2.0
+# (the "License"); you may not use this file except in compliance with
+# the License.  You may obtain a copy of the License at
+#
+#     http://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS,
+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+# See the License for the specific language governing permissions and
+# limitations under the License.
+
+# TODO dynamically require all *_test files
+
+require 'add_document_test'
+require 'commit_test'
+require 'connection_test'
+require 'delete_test'
+require 'document_test'
+require 'field_test'
+require 'ping_test'
+require 'request_test'
+require 'response_test'
+require 'standard_request_test'
+require 'standard_response_test'
\ No newline at end of file
diff --git a/client/ruby/solrb/CHANGES.txt b/client/ruby/solrb/CHANGES.txt
deleted file mode 100644
index 5ab2180..0000000
--- a/client/ruby/solrb/CHANGES.txt
+++ /dev/null
@@ -1,3 +0,0 @@
-v0.0.1  <real soon now>
-- initial release
-
diff --git a/client/ruby/solrb/LICENSE.txt b/client/ruby/solrb/LICENSE.txt
deleted file mode 100644
index 261eeb9..0000000
--- a/client/ruby/solrb/LICENSE.txt
+++ /dev/null
@@ -1,201 +0,0 @@
-                                 Apache License
-                           Version 2.0, January 2004
-                        http://www.apache.org/licenses/
-
-   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
-
-   1. Definitions.
-
-      "License" shall mean the terms and conditions for use, reproduction,
-      and distribution as defined by Sections 1 through 9 of this document.
-
-      "Licensor" shall mean the copyright owner or entity authorized by
-      the copyright owner that is granting the License.
-
-      "Legal Entity" shall mean the union of the acting entity and all
-      other entities that control, are controlled by, or are under common
-      control with that entity. For the purposes of this definition,
-      "control" means (i) the power, direct or indirect, to cause the
-      direction or management of such entity, whether by contract or
-      otherwise, or (ii) ownership of fifty percent (50%) or more of the
-      outstanding shares, or (iii) beneficial ownership of such entity.
-
-      "You" (or "Your") shall mean an individual or Legal Entity
-      exercising permissions granted by this License.
-
-      "Source" form shall mean the preferred form for making modifications,
-      including but not limited to software source code, documentation
-      source, and configuration files.
-
-      "Object" form shall mean any form resulting from mechanical
-      transformation or translation of a Source form, including but
-      not limited to compiled object code, generated documentation,
-      and conversions to other media types.
-
-      "Work" shall mean the work of authorship, whether in Source or
-      Object form, made available under the License, as indicated by a
-      copyright notice that is included in or attached to the work
-      (an example is provided in the Appendix below).
-
-      "Derivative Works" shall mean any work, whether in Source or Object
-      form, that is based on (or derived from) the Work and for which the
-      editorial revisions, annotations, elaborations, or other modifications
-      represent, as a whole, an original work of authorship. For the purposes
-      of this License, Derivative Works shall not include works that remain
-      separable from, or merely link (or bind by name) to the interfaces of,
-      the Work and Derivative Works thereof.
-
-      "Contribution" shall mean any work of authorship, including
-      the original version of the Work and any modifications or additions
-      to that Work or Derivative Works thereof, that is intentionally
-      submitted to Licensor for inclusion in the Work by the copyright owner
-      or by an individual or Legal Entity authorized to submit on behalf of
-      the copyright owner. For the purposes of this definition, "submitted"
-      means any form of electronic, verbal, or written communication sent
-      to the Licensor or its representatives, including but not limited to
-      communication on electronic mailing lists, source code control systems,
-      and issue tracking systems that are managed by, or on behalf of, the
-      Licensor for the purpose of discussing and improving the Work, but
-      excluding communication that is conspicuously marked or otherwise
-      designated in writing by the copyright owner as "Not a Contribution."
-
-      "Contributor" shall mean Licensor and any individual or Legal Entity
-      on behalf of whom a Contribution has been received by Licensor and
-      subsequently incorporated within the Work.
-
-   2. Grant of Copyright License. Subject to the terms and conditions of
-      this License, each Contributor hereby grants to You a perpetual,
-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
-      copyright license to reproduce, prepare Derivative Works of,
-      publicly display, publicly perform, sublicense, and distribute the
-      Work and such Derivative Works in Source or Object form.
-
-   3. Grant of Patent License. Subject to the terms and conditions of
-      this License, each Contributor hereby grants to You a perpetual,
-      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
-      (except as stated in this section) patent license to make, have made,
-      use, offer to sell, sell, import, and otherwise transfer the Work,
-      where such license applies only to those patent claims licensable
-      by such Contributor that are necessarily infringed by their
-      Contribution(s) alone or by combination of their Contribution(s)
-      with the Work to which such Contribution(s) was submitted. If You
-      institute patent litigation against any entity (including a
-      cross-claim or counterclaim in a lawsuit) alleging that the Work
-      or a Contribution incorporated within the Work constitutes direct
-      or contributory patent infringement, then any patent licenses
-      granted to You under this License for that Work shall terminate
-      as of the date such litigation is filed.
-
-   4. Redistribution. You may reproduce and distribute copies of the
-      Work or Derivative Works thereof in any medium, with or without
-      modifications, and in Source or Object form, provided that You
-      meet the following conditions:
-
-      (a) You must give any other recipients of the Work or
-          Derivative Works a copy of this License; and
-
-      (b) You must cause any modified files to carry prominent notices
-          stating that You changed the files; and
-
-      (c) You must retain, in the Source form of any Derivative Works
-          that You distribute, all copyright, patent, trademark, and
-          attribution notices from the Source form of the Work,
-          excluding those notices that do not pertain to any part of
-          the Derivative Works; and
-
-      (d) If the Work includes a "NOTICE" text file as part of its
-          distribution, then any Derivative Works that You distribute must
-          include a readable copy of the attribution notices contained
-          within such NOTICE file, excluding those notices that do not
-          pertain to any part of the Derivative Works, in at least one
-          of the following places: within a NOTICE text file distributed
-          as part of the Derivative Works; within the Source form or
-          documentation, if provided along with the Derivative Works; or,
-          within a display generated by the Derivative Works, if and
-          wherever such third-party notices normally appear. The contents
-          of the NOTICE file are for informational purposes only and
-          do not modify the License. You may add Your own attribution
-          notices within Derivative Works that You distribute, alongside
-          or as an addendum to the NOTICE text from the Work, provided
-          that such additional attribution notices cannot be construed
-          as modifying the License.
-
-      You may add Your own copyright statement to Your modifications and
-      may provide additional or different license terms and conditions
-      for use, reproduction, or distribution of Your modifications, or
-      for any such Derivative Works as a whole, provided Your use,
-      reproduction, and distribution of the Work otherwise complies with
-      the conditions stated in this License.
-
-   5. Submission of Contributions. Unless You explicitly state otherwise,
-      any Contribution intentionally submitted for inclusion in the Work
-      by You to the Licensor shall be under the terms and conditions of
-      this License, without any additional terms or conditions.
-      Notwithstanding the above, nothing herein shall supersede or modify
-      the terms of any separate license agreement you may have executed
-      with Licensor regarding such Contributions.
-
-   6. Trademarks. This License does not grant permission to use the trade
-      names, trademarks, service marks, or product names of the Licensor,
-      except as required for reasonable and customary use in describing the
-      origin of the Work and reproducing the content of the NOTICE file.
-
-   7. Disclaimer of Warranty. Unless required by applicable law or
-      agreed to in writing, Licensor provides the Work (and each
-      Contributor provides its Contributions) on an "AS IS" BASIS,
-      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
-      implied, including, without limitation, any warranties or conditions
-      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
-      PARTICULAR PURPOSE. You are solely responsible for determining the
-      appropriateness of using or redistributing the Work and assume any
-      risks associated with Your exercise of permissions under this License.
-
-   8. Limitation of Liability. In no event and under no legal theory,
-      whether in tort (including negligence), contract, or otherwise,
-      unless required by applicable law (such as deliberate and grossly
-      negligent acts) or agreed to in writing, shall any Contributor be
-      liable to You for damages, including any direct, indirect, special,
-      incidental, or consequential damages of any character arising as a
-      result of this License or out of the use or inability to use the
-      Work (including but not limited to damages for loss of goodwill,
-      work stoppage, computer failure or malfunction, or any and all
-      other commercial damages or losses), even if such Contributor
-      has been advised of the possibility of such damages.
-
-   9. Accepting Warranty or Additional Liability. While redistributing
-      the Work or Derivative Works thereof, You may choose to offer,
-      and charge a fee for, acceptance of support, warranty, indemnity,
-      or other liability obligations and/or rights consistent with this
-      License. However, in accepting such obligations, You may act only
-      on Your own behalf and on Your sole responsibility, not on behalf
-      of any other Contributor, and only if You agree to indemnify,
-      defend, and hold each Contributor harmless for any liability
-      incurred by, or claims asserted against, such Contributor by reason
-      of your accepting any such warranty or additional liability.
-
-   END OF TERMS AND CONDITIONS
-
-   APPENDIX: How to apply the Apache License to your work.
-
-      To apply the Apache License to your work, attach the following
-      boilerplate notice, with the fields enclosed by brackets "[]"
-      replaced with your own identifying information. (Don't include
-      the brackets!)  The text should be enclosed in the appropriate
-      comment syntax for the file format. We also recommend that a
-      file or class name and description of purpose be included on the
-      same "printed page" as the copyright notice for easier
-      identification within third-party archives.
-
-   Copyright [yyyy] [name of copyright owner]
-
-   Licensed under the Apache License, Version 2.0 (the "License");
-   you may not use this file except in compliance with the License.
-   You may obtain a copy of the License at
-
-       http://www.apache.org/licenses/LICENSE-2.0
-
-   Unless required by applicable law or agreed to in writing, software
-   distributed under the License is distributed on an "AS IS" BASIS,
-   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-   See the License for the specific language governing permissions and
-   limitations under the License.
diff --git a/client/ruby/solrb/README b/client/ruby/solrb/README
deleted file mode 100644
index eb73606..0000000
--- a/client/ruby/solrb/README
+++ /dev/null
@@ -1,56 +0,0 @@
-solrb exposes the power of Solr as a Ruby  DSL (domain specific language).
-
-  Visit the solrb wiki for more information: http://wiki.apache.org/solr/solrb
-
-USAGE 
-
-First launch Solr:
-
-  cd solr
-  java -jar start.jar
-
-In a separate shell, launch {{{irb -Ilib}}}:
-
-  require 'solr'  # load the library
-  include Solr    # Allow Solr:: to be omitted from class/module references
-
-  # connect to the solr instance
-  conn = Connection.new('http://localhost:8983/solr', :autocommit => :on)
-
-  # add a document to the index
-  conn.add(:id => 123, :title_text => 'Lucene in Action')
-
-  # update the document
-  conn.update(:id => 123, :title_text => 'Solr in Action')
-
-  # print out the first hit in a query for 'action'
-  response = conn.query('action')
-  print response.hits[0]
-
-  # iterate through all the hits for 'action'
-  conn.query('action') do |hit|
-    puts hit.inspect
-  end
-
-  # delete document by id
-  conn.delete(123)
-
-INSTALLATION
-
-First run the tests:
-
-  rake
-  
-then build the gem:
-
-  rake package
-
-and install the versioned gem:
-
-  gem install pkg/solr-x.x.x.gem 
-
-LICENSE
-
-This package is licensed using the Apache Software License 2.0.
-
-<http://www.apache.org/licenses/LICENSE-2.0>
diff --git a/client/ruby/solrb/Rakefile b/client/ruby/solrb/Rakefile
deleted file mode 100644
index fe09ac6..0000000
--- a/client/ruby/solrb/Rakefile
+++ /dev/null
@@ -1,181 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-
-# the default task is to run both the unit and functional tests
-# functional tests require that a solr test server is running
-# but this Rakefil should take care of starting and stopping it 
-# for you
-# 
-# if you just want to run unit tests:
-#
-#    rake test_units
-#
-# and if you just want to run functional tests
-#
-#    rake test_functionals
-#
-# if you would like to see solr startup messages on STDERR
-# when starting solr test server during functional tests use:
-# 
-#    rake SOLR_CONSOLE=true
-
-SOLRB_VERSION = '0.0.1'
-
-require 'rubygems'
-require 'rake'
-require 'rake/testtask'
-require 'rake/rdoctask'
-require 'rake/packagetask'
-require 'rake/gempackagetask'
-require 'test/functional/test_solr_server'
-
-task :default => [:test_units]
-
-spec = Gem::Specification.new do |s|
-  s.name = 'solrb'
-  s.version = SOLRB_VERSION
-  s.author = 'Apache Solr'
-  s.email = 'solr-user@lucene.apache.org'
-  s.homepage = 'http://wiki.apache.org/solr/Flare'
-  s.platform = Gem::Platform::RUBY
-  s.summary = 'Ruby library for working with Apache Solr'
-  
-  # Omit functional tests from gem for now, as that requires a Solr instance
-  s.files = Dir.glob("lib/**/*").concat(Dir.glob("test/unit/**/*"))
-  s.require_path = 'lib'
-  s.autorequire = 'solr'
-  s.has_rdoc = true
-end
-
-namespace :gem do
-  Rake::GemPackageTask.new(spec) do |pkg|
-    pkg.need_zip = true
-    pkg.need_tar = true
-    pkg.package_dir = "pkg/gem"
-  end
-end
-
-namespace :rails do
-  desc "Creates rails plugin structure and distributable packages. init.rb is created and removed on the fly."
-  task :package => "init.rb" do
-    File.rm_f("init.rb")
-  end
-  Rake::PackageTask.new("solrb-rails", SOLRB_VERSION) do |pkg|
-    pkg.need_zip = true
-    pkg.need_tar = true
-    pkg.package_dir = "pkg/rails"
-    pkg.package_files.include("lib/**/*.rb", "test/unit/**/*.rb", "init.rb", "LICENSE.txt", "README")
-  end
-  
-  file "init.rb" do
-    open("init.rb", "w") do |file|
-      file.puts LICENSE
-      file.puts "require 'solr.rb'"
-    end
-  end
-  
-  desc "Install the Rails plugin version into the vendor/plugins dir. Need to set PLUGINS_DIR environment variable."
-  task :install_solrb => :package do
-    plugins_dir = ENV["PLUGINS_DIR"] or raise "You must set PLUGINS_DIR"
-    File.cp_r(File.join("pkg","rails", "solrb-rails-#{SOLRB_VERSION}/"), File.join(plugins_dir, "solrb-rails-#{SOLRB_VERSION}/"))
-  end
-end
-
-task :package => ["rails:package", "gem:package"]
-task :repackage => [:clobber_package, :package]
-task :clobber_package => ["rails:clobber_package", "gem:clobber_package"] do rm_r "pkg" rescue nil end
-task :clobber => [:clobber_package]
-
-desc "Generate rdoc documentation"
-Rake::RDocTask.new('doc') do |rd|
-  rd.rdoc_files.include("lib/**/*.rb")
-  rd.rdoc_files.include('README', 'CHANGES.txt', 'LICENSE.txt')
-  rd.main = 'README'
-  rd.rdoc_dir = 'doc'
-end
-
-desc "Run unit tests"
-Rake::TestTask.new(:test_units) do |t|
-  t.pattern = 'test/unit/*_test.rb'
-  t.verbose = true
-  t.ruby_opts = ['-r solr', '-r test/unit', '-Itest/unit']
-end
-
-# NOTE: test_functionals does not work standalone currently.  It needs the TestSolrServer wrapper in the :test task
-Rake::TestTask.new(:test_functionals) do |t|
-  t.pattern = 'test/functional/*_test.rb'
-  t.verbose = true
-  t.ruby_opts = ['-r solr', '-r test/unit', '-Itest/functional']
-end
-
-desc "Run unit and functional tests"
-task :test => [:test_units] do
-  rm_rf "test/data"  # remove functional test temp data directory
-  
-  # wrap functional tests with a test-specific Solr server
-  got_error = TestSolrServer.wrap(:quiet => ENV['SOLR_CONSOLE'] ? false : true) do
-    Rake::Task[:test_functionals].invoke 
-  end
-
-  raise "test failures" if got_error
-end
-
-# TODO: consider replacing system() to rcov with the included
-#       Rake task: http://eigenclass.org/hiki.rb?cmd=view&p=rcov+FAQ&key=rake
-namespace :test do
-  desc 'Measures test coverage'
-  # borrowed from here: http://clarkware.com/cgi/blosxom/2007/01/05#RcovRakeTask
-  task :coverage do
-    rm_rf "coverage"
-    rm_rf "coverage.data"
-    TestSolrServer.wrap(:quiet => ENV['SOLR_CONSOLE'] ? false : true) do
-      system("rcov --aggregate coverage.data --text-summary -Ilib:test/functional test/functional/*_test.rb")
-    end
-    system("rcov --aggregate coverage.data --text-summary -Ilib:test/unit test/unit/*_test.rb")
-    system("open coverage/index.html") if PLATFORM['darwin']
-  end
-end
-
-
-def egrep(pattern)
-  Dir['**/*.rb'].each do |fn|
-    count = 0
-    open(fn) do |f|
-      while line = f.gets
-	count += 1
-	if line =~ pattern
-	  puts "#{fn}:#{count}:#{line}"
-	end
-      end
-    end
-  end
-end
-
-desc "Report TODO/FIXME/TBD tags in the code"
-task :todo do
-  egrep /#.*(FIXME|TODO|TBD)/
-end
-
-LICENSE = <<STR
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-STR
diff --git a/client/ruby/solrb/examples/delicious_library/conf/admin-extra.html b/client/ruby/solrb/examples/delicious_library/conf/admin-extra.html
deleted file mode 100644
index aa739da..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/admin-extra.html
+++ /dev/null
@@ -1,31 +0,0 @@
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- The content of this page will be statically included into the top
-of the admin page.  Uncomment this as an example to see there the content
-will show up.
-
-<hr>
-<i>This line will appear before the first table</i>
-<tr>
-<td colspan="2">
-This row will be appended to the end of the first table
-</td>
-</tr>
-<hr>
-
--->
diff --git a/client/ruby/solrb/examples/delicious_library/conf/protwords.txt b/client/ruby/solrb/examples/delicious_library/conf/protwords.txt
deleted file mode 100644
index 1dfc0ab..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/protwords.txt
+++ /dev/null
@@ -1,21 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# Use a protected word file to protect against the stemmer reducing two
-# unrelated words to the same base word.
-
-# Some non-words that normally won't be encountered,
-# just to test that they won't be stemmed.
-dontstems
-zwhacky
-
diff --git a/client/ruby/solrb/examples/delicious_library/conf/schema.xml b/client/ruby/solrb/examples/delicious_library/conf/schema.xml
deleted file mode 100755
index 74d39c4..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/schema.xml
+++ /dev/null
@@ -1,236 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- This is the Solr schema file. This file should be named "schema.xml" and
- should be in the conf directory under the solr home
- (i.e. ./solr/conf/schema.xml by default) 
- or located where the classloader for the Solr webapp can find it.
-
- For more information, on how to customize this file, please see
- http://wiki.apache.org/solr/SchemaXml
--->
-
-<schema name="flare" version="1.1">
-  <!-- attribute "name" is the name of this schema and is only used for display purposes.
-       Applications should change this to reflect the nature of the search collection.
-       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
-       not normally be changed by applications.
-       1.0: multiValued attribute did not exist, all fields are multiValued by nature
-       1.1: multiValued attribute introduced, false by default -->
-
-  <types>
-    <!-- field type definitions. The "name" attribute is
-       just a label to be used by field definitions.  The "class"
-       attribute and any other attributes determine the real
-       behavior of the fieldtype.
-         Class names starting with "solr" refer to java classes in the
-       org.apache.solr.analysis package.
-    -->
-
-    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
-       - StrField and TextField support an optional compressThreshold which
-       limits compression (if enabled in the derived fields) to values which
-       exceed a certain size (in characters).
-    -->
-    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- boolean type: "true" or "false" -->
-    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- The optional sortMissingLast and sortMissingFirst attributes are
-         currently supported on types that are sorted internally as strings.
-       - If sortMissingLast="true", then a sort on this field will cause documents
-         without the field to come after documents with the field,
-         regardless of the requested sort order (asc or desc).
-       - If sortMissingFirst="true", then a sort on this field will cause documents
-         without the field to come before documents with the field,
-         regardless of the requested sort order.
-       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
-         then default lucene sorting will be used which places docs without the
-         field first in an ascending sort and last in a descending sort.
-    -->    
-
-
-    <!-- numeric field types that store and index the text
-         value verbatim (and hence don't support range queries, since the
-         lexicographic ordering isn't equal to the numeric ordering) -->
-    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
-    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
-    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
-    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
-
-
-    <!-- Numeric field types that manipulate the value into
-         a string value that isn't human-readable in its internal form,
-         but with a lexicographic ordering the same as the numeric ordering,
-         so that range queries work correctly. -->
-    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
-
-
-    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
-         is a more restricted form of the canonical representation of dateTime
-         http://www.w3.org/TR/xmlschema-2/#dateTime    
-         The trailing "Z" designates UTC time and is mandatory.
-         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
-         All other components are mandatory.
-
-         Expressions can also be used to denote calculations that should be
-         performed relative to "NOW" to determine the value, ie...
-
-               NOW/HOUR
-                  ... Round to the start of the current hour
-               NOW-1DAY
-                  ... Exactly 1 day prior to now
-               NOW/DAY+6MONTHS+3DAYS
-                  ... 6 months and 3 days in the future from the start of
-                      the current day
-                      
-         Consult the DateField javadocs for more information.
-      -->
-    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- solr.TextField allows the specification of custom text analyzers
-         specified as a tokenizer and a list of token filters. Different
-         analyzers may be specified for indexing and querying.
-
-         The optional positionIncrementGap puts space between multiple fields of
-         this type on the same document, with the purpose of preventing false phrase
-         matching across fields.
-
-         For more info on customizing your analyzer chain, please see
-         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
-     -->
-
-    <!-- One can also specify an existing Analyzer class that has a
-         default constructor via the class attribute on the analyzer element
-    <fieldtype name="text_greek" class="solr.TextField">
-      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
-    </fieldType>
-    -->
-
-    <!-- A text field that only splits on whitespace for exact matching of words -->
-    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-      </analyzer>
-    </fieldtype>
-
-    <!-- A text field that uses WordDelimiterFilter to enable splitting and matching of
-        words on case-change, alpha numeric boundaries, and non-alphanumeric chars,
-        so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".
-        Synonyms and stopwords are customized by external files, and stemming is enabled.
-        Duplicate tokens at the same position (which may result from Stemmed Synonyms or
-        WordDelim parts) are removed.
-        -->
-    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
-      <analyzer type="index">
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <!-- in this example, we will only use synonyms at query time
-        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
-        -->
-        <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/> -->
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <!-- <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/> -->
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-      <analyzer type="query">
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <!-- <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/> -->
-        <!-- <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/> -->
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <!-- <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/> -->
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
-
-    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
-         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
-    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
-        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
- </types>
-
-
- <fields>
-   <!-- Valid attributes for fields:
-     name: mandatory - the name for the field
-     type: mandatory - the name of a previously defined type from the <types> section
-     indexed: true if this field should be indexed (searchable or sortable)
-     stored: true if this field should be retrievable
-     compressed: [false] if this field should be stored using gzip compression
-       (this will only apply if the field type is compressable; among
-       the standard field types, only TextField and StrField are)
-     multiValued: true if this field may contain multiple values per document
-     omitNorms: (expert) set to true to omit the norms associated with
-       this field (this disables length normalization and index-time
-       boosting for the field, and saves some memory).  Only full-text
-       fields or fields that need an index-time boost need norms.
-   -->
-
-   <field name="id" type="string" indexed="true" stored="true"/>
-
-   <!-- catchall field, containing all other searchable text fields (implemented
-        via copyField further on in this schema  -->
-   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
-
-   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
-        will be used if the name matches any of the patterns.
-        RESTRICTION: the glob-like pattern in the name attribute must have
-        a "*" only at the start or the end.
-        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
-        Longer patterns will be matched first.  if equal size patterns
-        both match, the first appearing in the schema will be used.  -->
-   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true" multiValued="true"/>
-   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true" multiValued="true"/>
- </fields>
-
- <!-- field to use to determine and enforce document uniqueness. -->
- <uniqueKey>id</uniqueKey>
-
- <!-- field for the QueryParser to use when an explicit fieldname is absent -->
- <defaultSearchField>text</defaultSearchField>
-
- <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
- <solrQueryParser defaultOperator="AND"/>
-
-  <!-- copyField commands copy one field to another at the time a document
-        is added to the index.  It's used either to index the same field differently,
-        or to add multiple fields to the same field for easier/faster searching.  -->
- <copyField source="*_text" dest="text"/>
-
- <!-- Similarity is the scoring routine for each document vs. a query.
-      A custom similarity may be specified here, but the default is fine
-      for most applications.  -->
- <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
-
-</schema>
diff --git a/client/ruby/solrb/examples/delicious_library/conf/scripts.conf b/client/ruby/solrb/examples/delicious_library/conf/scripts.conf
deleted file mode 100644
index e993bbf..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/scripts.conf
+++ /dev/null
@@ -1,24 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-user=
-solr_hostname=localhost
-solr_port=8983
-rsyncd_port=18983
-data_dir=
-webapp_name=solr
-master_host=
-master_data_dir=
-master_status_dir=
diff --git a/client/ruby/solrb/examples/delicious_library/conf/solrconfig.xml b/client/ruby/solrb/examples/delicious_library/conf/solrconfig.xml
deleted file mode 100755
index ac3416b..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/solrconfig.xml
+++ /dev/null
@@ -1,278 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<config>
-
-  <!-- Used to specify an alternate directory to hold all index data
-       other than the default ./data under the Solr home.
-       If replication is in use, this should match the replication configuration. -->
-  <!--
-  <dataDir>./solr/data</dataDir>
-  -->
-
-  <indexDefaults>
-   <!-- Values here affect all index writers and act as a default unless overridden. -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-    <writeLockTimeout>1000</writeLockTimeout>
-    <commitLockTimeout>10000</commitLockTimeout>
-  </indexDefaults>
-
-  <mainIndex>
-    <!-- options specific to the main on-disk lucene index -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-
-    <!-- If true, unlock any held write or commit locks on startup. 
-         This defeats the locking mechanism that allows multiple
-         processes to safely access a lucene index, and should be
-         used with care. -->
-    <unlockOnStartup>false</unlockOnStartup>
-  </mainIndex>
-
-  <!-- the default high-performance update handler -->
-  <updateHandler class="solr.DirectUpdateHandler2">
-
-    <!-- A prefix of "solr." for class names is an alias that
-         causes solr to search appropriate packages, including
-         org.apache.solr.(search|update|request|core|analysis)
-     -->
-
-    <!-- autocommit pending docs if certain criteria are met 
-    <autoCommit> 
-      <maxDocs>10000</maxDocs>
-    </autoCommit>
-    -->
-
-    <!-- The RunExecutableListener executes an external command.
-         exe - the name of the executable to run
-         dir - dir to use as the current working directory. default="."
-         wait - the calling thread waits until the executable returns. default="true"
-         args - the arguments to pass to the program.  default=nothing
-         env - environment variables to set.  default=nothing
-      -->
-    <!-- A postCommit event is fired after every commit or optimize command
-    <listener event="postCommit" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
-      <arr name="env"> <str>MYVAR=val1</str> </arr>
-    </listener>
-    -->
-    <!-- A postOptimize event is fired only after every optimize command, useful
-         in conjunction with index distribution to only distribute optimized indicies 
-    <listener event="postOptimize" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-    </listener>
-    -->
-
-  </updateHandler>
-
-
-  <query>
-    <!-- Maximum number of clauses in a boolean query... can affect
-        range or prefix queries that expand to big boolean
-        queries.  An exception is thrown if exceeded.  -->
-    <maxBooleanClauses>1024</maxBooleanClauses>
-
-    
-    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
-         unordered sets of *all* documents that match a query.
-         When a new searcher is opened, its caches may be prepopulated
-         or "autowarmed" using data from caches in the old searcher.
-         autowarmCount is the number of items to prepopulate.  For LRUCache,
-         the autowarmed items will be the most recently accessed items.
-       Parameters:
-         class - the SolrCache implementation (currently only LRUCache)
-         size - the maximum number of entries in the cache
-         initialSize - the initial capacity (number of entries) of
-           the cache.  (seel java.util.HashMap)
-         autowarmCount - the number of entries to prepopulate from
-           and old cache.
-         -->
-    <filterCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="256"/>
-
-   <!-- queryResultCache caches results of searches - ordered lists of
-         document ids (DocList) based on a query, a sort, and the range
-         of documents requested.  -->
-    <queryResultCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="256"/>
-
-  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
-       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
-    <documentCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="0"/>
-
-    <!-- If true, stored fields that are not requested will be loaded lazily.
-    -->
-    <enableLazyFieldLoading>false</enableLazyFieldLoading>
-
-    <!-- Example of a generic cache.  These caches may be accessed by name
-         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
-         The purpose is to enable easy caching of user/application level data.
-         The regenerator argument should be specified as an implementation
-         of solr.search.CacheRegenerator if autowarming is desired.  -->
-    <!--
-    <cache name="myUserCache"
-      class="solr.LRUCache"
-      size="4096"
-      initialSize="1024"
-      autowarmCount="1024"
-      regenerator="org.mycompany.mypackage.MyRegenerator"
-      />
-    -->
-
-   <!-- An optimization that attempts to use a filter to satisfy a search.
-         If the requested sort does not include score, then the filterCache
-         will be checked for a filter matching the query. If found, the filter
-         will be used as the source of document ids, and then the sort will be
-         applied to that.
-    <useFilterForSortedQuery>true</useFilterForSortedQuery>
-   -->
-
-   <!-- An optimization for use with the queryResultCache.  When a search
-         is requested, a superset of the requested number of document ids
-         are collected.  For example, if a search for a particular query
-         requests matching documents 10 through 19, and queryWindowSize is 50,
-         then documents 0 through 50 will be collected and cached.  Any further
-         requests in that range can be satisfied via the cache.  -->
-    <queryResultWindowSize>10</queryResultWindowSize>
-
-    <!-- This entry enables an int hash representation for filters (DocSets)
-         when the number of items in the set is less than maxSize.  For smaller
-         sets, this representation is more memory efficient, more efficient to
-         iterate over, and faster to take intersections.  -->
-    <HashDocSet maxSize="3000" loadFactor="0.75"/>
-
-
-    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
-         into cached filters if the number of docs selected by the clause exceeds
-         the threshold (represented as a fraction of the total index) -->
-    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
-
-
-    <!-- a newSearcher event is fired whenever a new searcher is being prepared
-         and there is a current searcher handling requests (aka registered). -->
-    <!-- QuerySenderListener takes an array of NamedList and executes a
-         local query request for each NamedList in sequence. -->
-    <!--
-    <listener event="newSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- a firstSearcher event is fired whenever a new searcher is being
-         prepared but there is no current registered searcher to handle
-         requests or to gain autowarming data from. -->
-    <!--
-    <listener event="firstSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- If a search request comes in and there is no current registered searcher,
-         then immediately register the still warming searcher and use it.  If
-         "false" then all requests will block until the first searcher is done
-         warming. -->
-    <useColdSearcher>false</useColdSearcher>
-
-  </query>
-
-
-  <!-- requestHandler plugins... incoming queries will be dispatched to the
-     correct handler based on the qt (query type) param matching the
-     name of registered handlers.
-     The "standard" request handler is the default and will be used if qt
-     is not specified in the request.
-  -->
-  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
-  <requestHandler name="standard" class="solr.StandardRequestHandler">
-    <!-- default values for query parameters -->
-     <lst name="defaults">
-       <str name="echoParams">explicit</str>
-       <!-- 
-       <int name="rows">10</int>
-       <str name="fl">*</str>
-       <str name="version">2.1</str>
-        -->
-     </lst>
-  </requestHandler>
-
-  <!-- queryResponseWriter plugins... query responses will be written using the
-    writer specified by the 'wt' request parameter matching the name of a registered
-    writer.
-    The "standard" writer is the default and will be used if 'wt' is not specified 
-    in the request. XMLResponseWriter will be used if nothing is specified here.
-    The json, python, and ruby writers are also available by default.
-
-    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
-    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
-    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
-    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
-
-    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
-  -->
-
-  <!-- XSLT response writer transforms the XML output by any xslt file found
-       in Solr's conf/xslt directory.  Changes to xslt files are checked for
-       every xsltCacheLifetimeSeconds.  
-   -->
-  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
-    <int name="xsltCacheLifetimeSeconds">5</int>
-  </queryResponseWriter> 
-    
-  <!-- config for the admin interface --> 
-  <admin>
-    <defaultQuery>solr</defaultQuery>
-    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
-    <!-- pingQuery should be "URLish" ...
-         &amp; separated key=val pairs ... but there shouldn't be any
-         URL escaping of the values -->
-    <pingQuery>
-     q=solr
-    </pingQuery>
-    <!-- configure a healthcheck file for servers behind a loadbalancer
-    <healthcheck type="file">server-enabled</healthcheck>
-    -->
-  </admin>
-
-</config>
diff --git a/client/ruby/solrb/examples/delicious_library/conf/stopwords.txt b/client/ruby/solrb/examples/delicious_library/conf/stopwords.txt
deleted file mode 100644
index 8433c83..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/stopwords.txt
+++ /dev/null
@@ -1,57 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# a couple of test stopwords to test that the words are really being
-# configured from this file:
-stopworda
-stopwordb
-
-#Standard english stop words taken from Lucene's StopAnalyzer
-an
-and
-are
-as
-at
-be
-but
-by
-for
-if
-in
-into
-is
-it
-no
-not
-of
-on
-or
-s
-such
-t
-that
-the
-their
-then
-there
-these
-they
-this
-to
-was
-will
-with
-
diff --git a/client/ruby/solrb/examples/delicious_library/conf/synonyms.txt b/client/ruby/solrb/examples/delicious_library/conf/synonyms.txt
deleted file mode 100644
index b0e31cb..0000000
--- a/client/ruby/solrb/examples/delicious_library/conf/synonyms.txt
+++ /dev/null
@@ -1,31 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-#some test synonym mappings unlikely to appear in real input text
-aaa => aaaa
-bbb => bbbb1 bbbb2
-ccc => cccc1,cccc2
-a\=>a => b\=>b
-a\,a => b\,b
-fooaaa,baraaa,bazaaa
-
-# Some synonym groups specific to this example
-GB,gib,gigabyte,gigabytes
-MB,mib,megabyte,megabytes
-Television, Televisions, TV, TVs
-#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
-#after us won't split it into two words.
-
-# Synonym mappings can be used for spelling correction too
-pixima => pixma
-
diff --git a/client/ruby/solrb/examples/delicious_library/dl_importer.rb b/client/ruby/solrb/examples/delicious_library/dl_importer.rb
deleted file mode 100755
index e7aeffb..0000000
--- a/client/ruby/solrb/examples/delicious_library/dl_importer.rb
+++ /dev/null
@@ -1,78 +0,0 @@
-#!/usr/bin/env ruby
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-# TODO: distill common shell script needs into common file for parsing parameters for Solr URL, input filename, -debug, etc
-#       script/runner or script/console-like, from Rails.  A data mapper would be a great generalizable piece.
-
-require 'solr'
-
-solr_url = ENV["SOLR_URL"] || "http://localhost:8983/solr"
-dl_filename = ARGV[0]
-debug = ARGV[1] == "-debug"
-
-solr = Solr::Connection.new(solr_url)
-
-lines = IO.readlines(dl_filename)
-headers = lines[0].split("\t").collect{|h| h.chomp}
-puts headers.join(','),"-----" if debug
-
-# Exported column names
-# medium,associatedURL,boxHeightInInches,boxLengthInInches,boxWeightInPounds,boxWidthInInches,
-# scannednumber,upc,asin,country,title,fullTitle,series,numberInSeries,edition,aspect,mediacount,
-# genre,price,currentValue,language,netrating,description,owner,publisher,published,rare,purchaseDate,rating,
-# used,signed,hasExperienced,notes,location,paid,condition,notowned,author,illustrator,pages
-mapping = {
-  :id => :upc,
-  :medium_facet => :medium,
-  :country_facet => :country,
-  :signed_facet => :signed,
-  :rating_facet => :netrating,
-  :language_facet => :language,
-  :genre_facet => Proc.new {|data| data.genre.split('/').map {|s| s.strip}},
-  :title_text => :title,
-  :full_title_text => :fullTitle,
-  :asin_text => :asin,  # TODO: schema needs a field for non-tokenized text which is not a facet
-  :notes_text => :notes,
-  :publisher_facet => :publisher,
-  :description_text => :description,
-  :author_text => :author,
-  :pages_text => :pages,
-  :published_year_facet => Proc.new {|data| data.published.scan(/\d\d\d\d/)[0]}
-}
-
-lines[1..-1].each do |line|
-  data = headers.zip(line.split("\t").collect{|s| s.chomp})
-  def data.method_missing(key)
-    self.assoc(key.to_s)[1]
-  end
-  
-  # puts data.inspect if debug
-
-  doc = {}
-  mapping.each do |solr_name, data_column_or_proc|
-    if data_column_or_proc.is_a? Proc
-      value = data_column_or_proc.call(data)
-    else
-      value = data.send(data_column_or_proc)
-    end  
-    doc[solr_name] = value if value
-  end
-  
-  puts data.title
-  puts doc.inspect if debug
-  solr.add doc unless debug
-
-end
-
-solr.commit unless debug
-solr.optimize unless debug
\ No newline at end of file
diff --git a/client/ruby/solrb/examples/delicious_library/sample_export.txt b/client/ruby/solrb/examples/delicious_library/sample_export.txt
deleted file mode 100644
index 938d5a0..0000000
--- a/client/ruby/solrb/examples/delicious_library/sample_export.txt
+++ /dev/null
@@ -1,13 +0,0 @@
-medium	associatedURL	boxHeightInInches	boxLengthInInches	boxWeightInPounds	boxWidthInInches	scannednumber	upc	asin	country	title	fullTitle	series	numberInSeries	edition	aspect	mediacount	genre	price	currentValue	language	netrating	description	owner	publisher	published	rare	purchaseDate	rating	used	signed	hasExperienced	notes	location	paid	condition	notowned	author	illustrator	pages
-book							9780865681743	0865681740	us	Xing Yi Nei Gong: Xing Yi Health Maintenance and Internal Strength Development	Xing Yi Nei Gong: Xing Yi Health Maintenance and Internal Strength Development				Paperback			$21.95	$14.05		4.5	This is the most complete book on the art of xing yi (hsing Yi) available. It includes the complete xing yi history and lineage going back eight generations; manuscripts handed down from famous practitioners Dai Long Bang and Li Neng Ran; 16 health maintenance and power development exercises; qigong (chi kung) exerices; xing yi long spear power training exercises; and more.		Unique Publications	1998-02-10 12:00:00 +0000		2007-02-03 02:22:25 -0500										Dan Miller/ Tim Cartmell		200
-book							0752064712459	073571245X	us	Eric Meyer on CSS: Mastering the Language of Web Design	Eric Meyer on CSS: Mastering the Language of Web Design				Paperback		Web Site Design/ Internet Publishing/ HTML - General/ jp-unknown1/ Qualifying Textbooks - Winter 2007	$45.00	$9.99		4.5	There are several other books on the market that serve as in-depth technical guides or reference books for CSS. None, however, take a more hands-on approach and use practical examples to teach readers how to solve the problems they face in designing with CSS - until now. Eric Meyer provides a variety of carefully crafted projects that teach how to use CSS and why particular methods were chosen. The web site includes all of the files needed to complete the tutorials in the book. In addition, bonus information is be posted.		New Riders Press	2002-06-28 12:00:00 +0000		2007-02-03 02:21:00 -0500										Eric A. Meyer		352
-book							9780961454739	0961454733	us	Art & Fear	Art & Fear				Paperback		Study & Teaching/ Criticism	$12.95	$7.25		4.5	"This is a book about making art. Ordinary art. Ordinary art means something like: all art not made by Mozart. After all, art is rarely made by Mozart-like people; essentially-statistically speaking-there aren't any people like that. Geniuses get made once-a-century or so, yet good art gets made all the time, so to equate the making of art with the workings of genius removes this intimately human activity to a strangely unreachable and unknowable place. For all practical purposes making art can be examined in great detail without ever getting entangled in the very remote problems of genius."&#x2028;--from the Introduction/ Art & Fear explores the way art gets made, the reasons it often doesn't get made, and the nature of the difficulties that cause so many artists to give up along the way. The book's co-authors, David Bayles and Ted Orland, are themselves both working artists, grappling daily with the problems of making art in the real world. Their insights and observations, drawn from personal experience, provide an incisive view into the world of art as it is expeienced by artmakers themselves./ This is not your typical self-help book. This is a book written by artists, for artists -- it's about what it feels like when artists sit down at their easel or keyboard, in their studio or performance space, trying to do the work they need to do. First published in 1994, Art & Fear quickly became an underground classic. Word-of-mouth response alone-now enhanced by internet posting-has placed it among the best-selling books on artmaking and creativity nationally./ Art & Fear has attracted a remarkably diverse audience, ranging from beginning to accomplished artists in every medium, and including an exceptional concentration among students and teachers. The original Capra Press edition of Art & Fear sold 80,000 copies./ An excerpt:/ Today, more than it was however many years ago, art is hard because you have to keep after it so consistently. On so many different fronts. For so little external reward. Artists become veteran artists only by making peace not just with themselves, but with a huge range of issues. You have to find your work.../ 		Image Continuum Press	2001-04-01 12:00:00 +0000		2007-02-03 02:20:32 -0500										David Bayles/ Ted Orland		122
-book							9780135974445	0135974445	us	Agile Software Development, Principles, Patterns, and Practices	Agile Software Development, Principles, Patterns, and Practices				Hardcover		C & C++ Windows Programming/ Object-Oriented Design/ Software Development/ Qualifying Textbooks - Winter 2007	$68.20	$38.50		4.5			Prentice Hall	2002-10-15 12:00:00 +0000		2007-02-03 02:20:25 -0500										Robert C. Martin		552
-book							9780312275631	0312275633	us	Awareness: The Key to Living in Balance	Awareness: The Key to Living in Balance				Paperback		Meditation/ Mysticism/ Self-Help/ Spiritualism/ Osho/ Personal Transformation	$11.95	$7.61		4.5	Underlying all meditation techniques, including martial arts-and in fact underlying all great athletic performances-is a quality of being awake and present to the moment, a quality that Osho calls awareness. Once we can identify and understand what this quality of awareness is, we have the key to self-mastery in virtually every area of our lives.According to great masters like Lao Tzu or Buddha, most of us move through our lives like sleepwalkers. Never really present in what we are doing, never fully alert to our environment, and not even aware of what motivates us to do and say the things we do.At the same time, all of us have experienced moments of awareness-or awakening, to use another-in extraordinary circumstances. On the road, in a sudden and unexpected accident, time seems to stop and one is suddenly aware of every movement, every sound, every thought. Or in moments that touch us deeply-welcoming a new baby into the world for the first time, or being with someone at the moment of death.Awareness, says Osho, is the key to being self-directed, centered, and free in every aspect of our lives. In this book, Osho teaches how to live life more attentively, mindfully, and meditatively, with love, caring and consciousness.OSHO challenges readers to examine and break free of the conditioned belief systems and prejudices that limit their capacity to life in all its richness. He has been described by the Sunday Times of London as one of the "1000 Makers of the 20th Century" and by Sunday Mid-Day (India) as one of the ten people-along with Gandhi, Nehru, and Buddha-who have changed the destiny of India. More than a decade after his death in 1990, the influence of his teachings continues to expand, reaching seekers of all ages in virtually every country of the world.		St. Martin's Griffin	2001-12-10 12:00:00 +0000		2007-02-03 02:20:16 -0500										Osho		192
-book							9780690012903	069001290X	us	Flower, Moon, Snow: A Book of Haiku	Flower, Moon, Snow: A Book of Haiku				Library Binding		20th Century/ Japanese & Haiku/ United States	$12.89	$4.40					Crowell	1977-02-04 12:00:00 +0000		2007-02-03 02:19:27 -0500										Kazue Mizumura		48
-book							9780060958404	0060958405	us	Words and Rules: The Ingredients of Language	Words and Rules: The Ingredients of Language				Paperback		Logic & Language/ Grammar/ Linguistics/ Neuroscience/ Cognitive	$15.00	$3.50		4	Human languages are capable of expressing a literally endless number of different ideas. How do we manage it--so effortlessly that we scarcely ever stop to think about it? In Words and Rules: The Ingredients of Language, a look at the simple concepts that we use to devise works as complex as love sonnets and tax laws, renowned neuroscientist and linguist Steven Pinker shows us how. The latest linguistic research suggests that each of us stores a limited (though large) number of words and word-parts in memory and manipulates them with a much smaller number of rules to produce every writing and utterance, and Pinker explains every step of the way with engaging good humor./ Pinker's enthusiasm for the subject infects the reader, particularly as he emphasizes the relation between how we communicate and how we think. What does it mean that a small child who has never heard the word wug can tell a researcher that when one wug meets another, there are two wugs? Some rule must be telling the child that English plurals end in -s, which also explains mistakes like mouses. Is our communication linked inextricably with our thinking? Pinker says yes, and it's hard to disagree. Words and Rules is an excellent introduction to and overview of current thinking about language, and will greatly reward the careful reader with new ways of thinking about how we think, talk, and write. --Rob Lightner/ 		Harper Perennial	2000-01-15 12:00:00 +0000		2007-02-03 02:18:58 -0500										Steven Pinker		368
-book							9781592400874	1592400876	us	Eats, Shoots & Leaves: The Zero Tolerance Approach to Punctuation	Eats, Shoots & Leaves: The Zero Tolerance Approach to Punctuation				Hardcover		Essays/ Grammar/ Reference/ Writing Skills	$19.95	$1.84		4	A bona fide publishing phenomenon, Lynne Truss's now classic #1 New York Times bestseller Eats, Shoots & Leaves makes its paperback debut after selling over 3 million copies worldwide in hardcover./ We all know the basics of punctuation. Or do we? A look at most neighborhood signage tells a different story. Through sloppy usage and low standards on the Internet, in e-mail, and now text messages, we have made proper punctuation an endangered species./ In Eats, Shoots & Leaves, former editor Truss dares to say, in her delightfully urbane, witty, and very English way, that it is time to look at our commas and semicolons and see them as the wonderful and necessary things they are. This is a book for people who love punctuation and get upset when it is mishandled. From the invention of the question mark in the time of Charlemagne to George Orwell shunning the semicolon, this lively history makes a powerful case for the preservation of a system of printing conventions that is much too subtle to be mucked about with. BACKCOVER: Praise for Lynne Truss and Eats, Shoots & Leaves:&#x2028;&#x2028;Eats, Shoots & Leaves&#x201c;makes correct usage so cool that you have to admire Ms. Truss.&#x201d;&#x2028;&#x2014;Janet Maslin, The New York Times&#x2028;&#x2028;&#x201c;Witty, smart, passionate.&#x201d;&#x2028;&#x2014;Los Angeles Times Book Review, Best Books Of 2004: Nonfiction &#x2028;&#x2028;&#x201c;Who knew grammar could be so much fun?&#x201d;&#x2028;&#x2014;Newsweek&#x2028;&#x2028;&#x201c;Witty and instructive. . . . Truss is an entertaining, well-read scold in a culture that could use more scolding.&#x201d;&#x2028;&#x2014;USA Today&#x201c;Truss is William Safire crossed with John Cleese's Basil Fawlty.&#x201d;&#x2028;&#x2014;Entertainment Weekly&#x2028;&#x2028;&#x201c;Lynne Truss has done the English-speaking world a huge service.&#x201d;&#x2028;&#x2014;The Christian Science Monitor&#x2028;&#x2028;&#x201c;This book changed my life in small, perfect ways like learning how to make better coffee or fold an omelet. It's the perfect gift for anyone who cares about grammar and a gentle introduction for those who don't care enough.&#x201d;&#x2028;&#x2014;The Boston Sunday Globe&#x2028;&#x2028;&#x201c;Lynne Truss makes [punctuation] a joy to contemplate.&#x201d;&#x2028;&#x2014;Elle&#x2028;&#x2028;&#x201c;If Lynne Truss were Roman Catholic I'd nominate her for sainthood.&#x201d; &#x2014;Frank McCourt, author of Angela's Ashes&#x2028;&#x2028;&#x201c;Truss's scholarship is impressive and never dry.&#x201d;&#x2028;&#x2014;Edmund Morris, The New York Times Book Review/ 		Gotham	2004-04-12 12:00:00 +0000		2007-02-03 02:18:24 -0500										Lynne Truss		209
-book							9780142000281	0142000280	us	Getting Things Done: The Art of Stress-Free Productivity	Getting Things Done: The Art of Stress-Free Productivity				Paperback		Health & Stress/ Time Management/ Guides/ Labor & Industrial Relations/ Motivational/ Office Skills/ Creativity/ Self-Esteem/ Stress Management	$15.00	$7.01		4.5	With first-chapter allusions to martial arts, "flow," "mind like water," and other concepts borrowed from the East (and usually mangled), you'd almost think this self-helper from David Allen should have been called Zen and the Art of Schedule Maintenance./ Not quite. Yes, Getting Things Done offers a complete system for downloading all those free-floating gotta-do's clogging your brain into a sophisticated framework of files and action lists--all purportedly to free your mind to focus on whatever you're working on. However, it still operates from the decidedly Western notion that if we could just get really, really organized, we could turn ourselves into 24//7 productivity machines. (To wit, Allen, whom the New Economy bible Fast Company has dubbed "the personal productivity guru," suggests that instead of meditating on crouching tigers and hidden dragons while you wait for a plane, you should unsheathe that high-tech saber known as the cell phone and attack that list of calls you need to return.)/ As whole-life-organizing systems go, Allen's is pretty good, even fun and therapeutic. It starts with the exhortation to take every unaccounted-for scrap of paper in your workstation that you can't junk, The next step is to write down every unaccounted-for gotta-do cramming your head onto its own scrap of paper. Finally, throw the whole stew into a giant "in-basket"/ That's where the processing and prioritizing begin; in Allen's system, it get a little convoluted at times, rife as it is with fancy terms, subterms, and sub-subterms for even the simplest concepts. Thank goodness the spine of his system is captured on a straightforward, one-page flowchart that you can pin over your desk and repeatedly consult without having to refer back to the book. That alone is worth the purchase price. Also of value is Allen's ingenious Two-Minute Rule: if there's anything you absolutely must do that you can do right now in two minutes or less, then do it now, thus freeing up your time and mind tenfold over the long term. It's commonsense advice so obvious that most of us completely overlook it, much to our detriment; Allen excels at dispensing such wisdom in this useful, if somewhat belabored, self-improver aimed at everyone from CEOs to soccer moms (who we all know are more organized than most CEOs to start with). --Timothy Murphy/ 		Penguin (Non-Classics)	2002-12-31 12:00:00 +0000		2007-02-03 02:16:57 -0500										David Allen		267
-book							9780140195682	0140195688	us	Sitting: A Guide to Buddhist Meditation	Sitting: A Guide to Buddhist Meditation				Paperback		Rituals & Practice	$12.00	$2.90		4.5			Penguin (Non-Classics)	1998-05-01 12:00:00 +0000		2007-02-03 00:20:13 -0500										Diana St. Ruth		96
-book							9780060922245	0060922249	us	Care of the Soul : A Guide for Cultivating Depth and Sacredness in Everyday Life	Care of the Soul : A Guide for Cultivating Depth and Sacredness in Everyday Life				Paperback		Personal Transformation/ New Age/ Spiritual/ Pastoral Theology	$14.00	$0.01		4	Care of the Soul is considered to be one of the best primers for soul work ever written. Thomas Moore, an internationally renowned theologian and former Catholic monk, offers a philosophy for living that involves accepting our humanity rather than struggling to transcend it. By nurturing the soul in everyday life, Moore shows how to cultivate dignity, peace, and depth of character. For example, in addressing the importance of daily rituals he writes, "Ritual maintains the world's holiness. As in a dream a small object may assume significance, so in a life that is animated by ritual there are no insignificant things." This is the eloquence that helped reintroduce the sacred into everyday language and contemporary values.		Harper Paperbacks	1994-01-26 12:00:00 +0000		2007-02-03 00:19:54 -0500										Thomas Moore		336
-book							9780977616602	0977616606	us	Rails Recipes (Pragmatic Programmers)	Rails Recipes (Pragmatic Programmers)				Paperback		Object-Oriented Design/ Internet	$32.95	$22.46		4.5	Rails is large, powerful, and new. How do you use it effectively? How do you harness the power? And, most important, how do you get high quality, real-world applications written?/ From the latest Ajax effects to time-saving automation tips for your development process, Rails Recipes will show you how the experts have already solved the problems you have./  &#x2022; Use generators to automate repetitive coding tasks./  &#x2022; Create sophisticated role-based authentication schemes./  &#x2022; Add live search and live preview to your site./  &#x2022; Run tests when anyone checks code in./  &#x2022; How to create tagged data the right way./  &#x2022; and many, many more.../ Owning Rails Recipes is like having the best Rails programmers sitting next to you while you code./ 		Pragmatic Bookshelf	01-06-2006		01-02-2007	3									Chad Fowler		332
\ No newline at end of file
diff --git a/client/ruby/solrb/examples/marc/marc_importer.rb b/client/ruby/solrb/examples/marc/marc_importer.rb
deleted file mode 100755
index f4f7376..0000000
--- a/client/ruby/solrb/examples/marc/marc_importer.rb
+++ /dev/null
@@ -1,106 +0,0 @@
-#!/usr/bin/env ruby
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'marc'
-require 'solr'
-
-solr_url = ENV["SOLR_URL"] || "http://localhost:8983/solr"
-marc_filename = ARGV[0]
-file_number = marc_filename.scan(/\d\d/)
-debug = ARGV[1] == "-debug"
-
-$KCODE = 'UTF8'
-
-mapping = {
-  # :solr_field_name => String
-  # :solr_field_name => Array of Strings
-  # :solr_field_name => Proc  [Proc operates on record]
-  #    String = 3 digit control field number or 3 digit data field number + subfield letter
-  
-  :id => '001',
-  :subject_genre_facet => ['600v', '610v', '611v', '650v', '651v', '655a'], 
-  :subject_era_facet => ['650d', '650y', '651y', '655y'],
-  :subject_topic_facet => ['650a', '650b', '650x'],
-  :subject_geographic_facet => ['650c', '650z', '651a', '651x', '651z', '655z'],
-  :year_facet => Proc.new do |r|
-    extract_record_data(r,'260c').collect {|f| f.scan(/\d\d\d\d/)}.flatten
-  end,
-  :title_text => '245a',
-  :author_text => '100a',
-  :call_number_text => '050a',
-  :isbn_text => '010a',
-  :filename_facet => Proc.new {|r| file_number},
-}
-
-connection = Solr::Connection.new(solr_url)
-
-if marc_filename =~ /.gz$/
-  puts "Unzipping data file..."
-  temp_filename = "/tmp/marc_data_#{file_number}.mrc"
-  system("cp #{marc_filename} #{temp_filename}.gz")
-  system("gunzip #{temp_filename}")
-  marc_filename = temp_filename
-end
-
-reader = MARC::Reader.new(marc_filename)
-count = 0
-
-def extract_record_data(record, fields)
-  extracted_data = []
-
-  fields.each do |field|
-    tag = field[0,3]
-    
-    extracted_fields = record.find_all {|f| f.tag === tag}
-
-    extracted_fields.each do |field_instance|    
-      if tag < '010' # control field
-        extracted_data << field_instance.value rescue nil
-      else # data field
-        subfield = field[3].chr
-        extracted_data << field_instance[subfield] rescue nil
-      end
-    end
-  end
-  
-  extracted_data.compact.uniq
-end
-
-puts "Indexing #{marc_filename}..."
-for record in reader
-  doc = {}
-  mapping.each do |key,value|
-    data = nil
-    case value
-      when Proc
-        data = value.call(record)
-        
-      when String, Array
-        data = extract_record_data(record, value)
-        data = nil if data.empty?
-    end
-    
-    doc[key] = data if data
-  end
-  
-  puts doc.inspect,"------" if debug
-
-  connection.send(Solr::Request::AddDocument.new(doc)) unless debug
-  
-  count += 1
-  
-  puts count if count % 100 == 0
-end
-
-connection.send(Solr::Request::Commit.new) unless debug
-puts "Done"
diff --git a/client/ruby/solrb/lib/solr.rb b/client/ruby/solrb/lib/solr.rb
deleted file mode 100755
index 4f39679..0000000
--- a/client/ruby/solrb/lib/solr.rb
+++ /dev/null
@@ -1,18 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-module Solr; end
-require 'solr/exception'
-require 'solr/request'
-require 'solr/connection'
-require 'solr/response'
-require 'solr/xml'
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/connection.rb b/client/ruby/solrb/lib/solr/connection.rb
deleted file mode 100755
index f62f09b..0000000
--- a/client/ruby/solrb/lib/solr/connection.rb
+++ /dev/null
@@ -1,160 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'net/http'
-
-# TODO: add a convenience method to POST a Solr .xml file, like Solr's example post.sh
-
-class Solr::Connection
-  attr_reader :url, :autocommit, :connection
-
-  # create a connection to a solr instance using the url for the solr
-  # application context:
-  #
-  #   conn = Solr::Connection.new("http://example.com:8080/solr")
-  #
-  # if you would prefer to have all adds/updates autocommitted, 
-  # use :autocommit => :on
-  #
-  #   conn = Solr::Connection.new('http://example.com:8080/solr', 
-  #     :autocommit => :on)
-
-  def initialize(url, opts={})
-    @url = URI.parse(url)
-    unless @url.kind_of? URI::HTTP
-      raise "invalid http url: #{url}"
-    end
-  
-    # TODO: Autocommit seems nice at one level, but it currently is confusing because
-    # only calls to Connection#add/#update/#delete, though a Connection#send(AddDocument.new(...))
-    # does not autocommit.  Maybe #send should check for the request types that require a commit and
-    # commit in #send instead of the individual methods?
-    @autocommit = opts[:autocommit] == :on
-  
-    # Not actually opening the connection yet, just setting up the persistent connection.
-    @connection = Net::HTTP.new(@url.host, @url.port)
-  end
-
-  # add a document to the index. you can pass in either a hash
-  #
-  #   conn.add(:id => 123, :title => 'Tlon, Uqbar, Orbis Tertius')
-  #
-  # or a Solr::Document
-  #
-  #   conn.add(Solr::Document.new(:id => 123, :title = 'On Writing')
-  #
-  # true/false will be returned to designate success/failure
-
-  def add(doc)
-    request = Solr::Request::AddDocument.new(doc)
-    response = send(request)
-    commit if @autocommit
-    return response.ok?
-  end
-
-  # update a document in the index (really just an alias to add)
-
-  def update(doc)
-    return add(doc)
-  end
-
-  # performs a standard query and returns a Solr::Response::Standard
-  #
-  #   response = conn.query('borges')
-  # 
-  # alternative you can pass in a block and iterate over hits
-  #
-  #   conn.query('borges') do |hit|
-  #     puts hit
-  #   end
-
-  def query(query, options={}, &action)
-    # TODO: Shouldn't this return an exception if the Solr status is not ok?  (rather than true/false).
-    create_and_send_query(Solr::Request::Standard, options.update(:query => query), &action)
-  end
-  
-  def search(query, options={}, &action)
-    create_and_send_query(Solr::Request::Dismax, options.update(:query => query), &action)
-  end
-
-  # sends a commit message to the server
-  def commit
-    response = send(Solr::Request::Commit.new)
-    return response.ok?
-  end
-
-  # sends an optimize message to the server
-  def optimize
-    response = send(Solr::Request::Optimize.new)
-    return response.ok?
-  end
-  
-  # pings the connection and returns true/false if it is alive or not
-  def ping
-    begin
-      response = send(Solr::Request::Ping.new)
-      return response.ok?
-    rescue
-      return false
-    end
-  end
-
-  # delete a document from the index using the document id
-  def delete(document_id)
-    response = send(Solr::Request::Delete.new(:id => document_id))
-    commit if @autocommit
-    response.ok?
-  end
-
-  # delete using a query
-  def delete_by_query(query)
-    response = send(Solr::Request::Delete.new(:query => query))
-    commit if @autocommit
-    response.ok?
-  end
-  
-  def info
-    send(Solr::Request::IndexInfo.new)
-  end
-  
-  # send a given Solr::Request and return a RubyResponse or XmlResponse
-  # depending on the type of request
-  def send(request)
-    data = post(request)
-    Solr::Response::Base.make_response(request, data)
-  end
-
-  # send the http post request to solr; for convenience there are shortcuts
-  # to some requests: add(), query(), commit(), delete() or send()
-  def post(request)
-    response = @connection.post(@url.path + "/" + request.handler,
-                                request.to_s,
-                                { "Content-Type" => "application/x-www-form-urlencoded; charset=utf-8" })
-  
-    case response
-    when Net::HTTPSuccess then response.body
-    else
-      response.error!
-    end
-  
-  end
-  
-private
-  
-  def create_and_send_query(klass, options = {}, &action)
-    request = klass.new(options)
-    response = send(request)
-    return response unless action
-    response.each {|hit| action.call(hit)}
-  end
-  
-end
diff --git a/client/ruby/solrb/lib/solr/document.rb b/client/ruby/solrb/lib/solr/document.rb
deleted file mode 100644
index 4f037d6..0000000
--- a/client/ruby/solrb/lib/solr/document.rb
+++ /dev/null
@@ -1,71 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-require 'solr/field'
-
-class Solr::Document
-  include Enumerable
-
-  # Create a new Solr::Document, optionally passing in a hash of 
-  # key/value pairs for the fields
-  #
-  #   doc = Solr::Document.new(:creator => 'Jorge Luis Borges')
-  def initialize(hash={})
-    @fields = []
-    self << hash
-  end
-
-  # Append a Solr::Field
-  #
-  #   doc << Solr::Field.new(:creator => 'Jorge Luis Borges')
-  #
-  # If you are truly lazy you can simply pass in a hash:
-  #
-  #   doc << {:creator => 'Jorge Luis Borges'}
-  def <<(fields)
-    case fields
-    when Hash
-      fields.each_pair do |name,value|
-        if value.respond_to?(:each)
-          value.each {|v| @fields << Solr::Field.new(name => v)}
-        else
-          @fields << Solr::Field.new(name => value)
-        end
-      end
-    when Solr::Field
-      @fields << fields
-    else
-      raise "must pass in Solr::Field or Hash"
-    end
-  end
-
-  # shorthand to allow hash lookups
-  #   doc['name']
-  def [](name)
-    field = @fields.find {|f| f.name == name.to_s}
-    return field.value if field
-    return nil
-  end
-
-  # shorthand to assign as a hash
-  def []=(name,value)
-    @fields << Solr::Field.new(name => value)
-  end
-
-  # convert the Document to a REXML::Element 
-  def to_xml
-    e = Solr::XML::Element.new 'doc'
-    @fields.each {|f| e.add_element(f.to_xml)}
-    return e
-  end
-end
diff --git a/client/ruby/solrb/lib/solr/exception.rb b/client/ruby/solrb/lib/solr/exception.rb
deleted file mode 100644
index a439e67..0000000
--- a/client/ruby/solrb/lib/solr/exception.rb
+++ /dev/null
@@ -1,13 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Exception < Exception; end
diff --git a/client/ruby/solrb/lib/solr/field.rb b/client/ruby/solrb/lib/solr/field.rb
deleted file mode 100644
index b252ad7..0000000
--- a/client/ruby/solrb/lib/solr/field.rb
+++ /dev/null
@@ -1,35 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-require 'time'
-
-class Solr::Field
-  attr_accessor :name
-  attr_accessor :value
-
-  def initialize(key_val, opts={})
-    raise "first argument must be a hash" unless key_val.kind_of? Hash
-    @name = key_val.keys[0].to_s
-    @value = key_val.values[0]
-    # Convert any Time values into UTC/XML schema format (which Solr requires).
-    @value = @value.respond_to?(:utc) ? @value.utc.xmlschema : @value.to_s
-  end
-
-  def to_xml
-    e = Solr::XML::Element.new 'field'
-    e.attributes['name'] = @name
-    e.text = @value
-    return e
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/request.rb b/client/ruby/solrb/lib/solr/request.rb
deleted file mode 100755
index a25aaf4..0000000
--- a/client/ruby/solrb/lib/solr/request.rb
+++ /dev/null
@@ -1,24 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-module Solr; module Request; end; end
-require 'solr/request/add_document'
-require 'solr/request/base'
-require 'solr/request/commit'
-require 'solr/request/delete'
-require 'solr/request/ping'
-require 'solr/request/select'
-require 'solr/request/standard'
-require 'solr/request/dismax'
-require 'solr/request/update'
-require 'solr/request/index_info'
-require 'solr/request/optimize'
diff --git a/client/ruby/solrb/lib/solr/request/add_document.rb b/client/ruby/solrb/lib/solr/request/add_document.rb
deleted file mode 100644
index 82835bc..0000000
--- a/client/ruby/solrb/lib/solr/request/add_document.rb
+++ /dev/null
@@ -1,63 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-require 'solr/request/base'
-require 'solr/document'
-require 'solr/request/update'
-
-class Solr::Request::AddDocument < Solr::Request::Update
-
-  # create the request, optionally passing in a Solr::Document
-  #
-  #   request = Solr::Request::AddDocument.new doc
-  #
-  # as a short cut you can pass in a Hash instead:
-  #
-  #   request = Solr::Request.new :creator => 'Jorge Luis Borges'
-  # 
-  # or an array, to add multiple documents at the same time:
-  # 
-  #   request = Solr::Request::AddDocument.new([doc1, doc2, doc3])
-    
-  def initialize(doc={})
-    @docs = []
-    if doc.is_a?(Array)
-      doc.each { |d| add_doc(d) }
-    else
-      add_doc(doc)
-    end
-  end
-
-  # returns the request as a string suitable for posting
-  
-  def to_s
-    e = Solr::XML::Element.new 'add'
-    for doc in @docs
-      e.add_element doc.to_xml
-    end
-    return e.to_s
-  end
-  
-  private
-  def add_doc(doc)
-    case doc
-    when Hash
-      @docs << Solr::Document.new(doc)
-    when Solr::Document
-      @docs << doc
-    else
-      raise "must pass in Solr::Document or Hash"
-    end
-  end
-  
-end
diff --git a/client/ruby/solrb/lib/solr/request/base.rb b/client/ruby/solrb/lib/solr/request/base.rb
deleted file mode 100644
index 2c449fe..0000000
--- a/client/ruby/solrb/lib/solr/request/base.rb
+++ /dev/null
@@ -1,29 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Request::Base
-
-  # returns either :xml or :ruby depending on what the
-  # response type is for a given request
-  
-  def response_format
-    raise "unknown request type: #{self.class}"
-  end
-
-  # returns the solr handler or url fragment that can 
-  # respond to this type of request
-  
-  def handler
-    raise "unkown request type: #{self.class}"
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/request/commit.rb b/client/ruby/solrb/lib/solr/request/commit.rb
deleted file mode 100644
index 1d53076..0000000
--- a/client/ruby/solrb/lib/solr/request/commit.rb
+++ /dev/null
@@ -1,21 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-
-class Solr::Request::Commit < Solr::Request::Update
-
-  def to_s
-    Solr::XML::Element.new('commit').to_s
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/request/delete.rb b/client/ruby/solrb/lib/solr/request/delete.rb
deleted file mode 100644
index 916b44a..0000000
--- a/client/ruby/solrb/lib/solr/request/delete.rb
+++ /dev/null
@@ -1,50 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-
-class Solr::Request::Delete < Solr::Request::Update
-
-  # A delete request can be for a specific document id
-  #
-  #   request = Solr::Request::Delete.new(:id => 1234)
-  #
-  # or by query:
-  #
-  #   request = Solr::Request::Delete.new(:query =>
-  #
-  def initialize(options)
-    unless options.kind_of?(Hash) and (options[:id] or options[:query])
-      raise Solr::Exception.new("must pass in :id or :query")
-    end
-    if options[:id] and options[:query]
-      raise Solr::Exception.new("can't pass in both :id and :query")
-    end
-    @document_id = options[:id]
-    @query = options[:query]
-  end
-
-  def to_s
-    delete_element = Solr::XML::Element.new('delete')
-    if @document_id
-      id_element = Solr::XML::Element.new('id')
-      id_element.text = @document_id
-      delete_element.add_element(id_element)
-    elsif @query
-      query = Solr::XML::Element.new('query')
-      query.text = @query 
-      delete_element.add_element(query)
-    end
-    delete_element.to_s
-  end
-end
-
diff --git a/client/ruby/solrb/lib/solr/request/dismax.rb b/client/ruby/solrb/lib/solr/request/dismax.rb
deleted file mode 100644
index 8b64288..0000000
--- a/client/ruby/solrb/lib/solr/request/dismax.rb
+++ /dev/null
@@ -1,43 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Request::Dismax < Solr::Request::Standard
-
-  VALID_PARAMS.replace(VALID_PARAMS + [:tie_breaker, :query_fields, :minimum_match, :phrase_fields, :phrase_slop,
-                                       :boost_query, :boost_functions])
-
-  def initialize(params)
-    super(params)
-    @sort_values = @params[:sort]
-    @params.delete(:sort)
-    @query_type = "dismax"
-  end
-  
-  def to_hash
-    hash = super
-    hash[:tie] = @params[:tie_breaker]
-    hash[:mm]  = @params[:minimum_match]
-    hash[:qf]  = @params[:query_fields]
-    hash[:pf]  = @params[:phrase_fields]
-    hash[:ps]  = @params[:phrase_slop]
-    hash[:bq]  = @params[:boost_query]
-    hash[:bf]  = @params[:boost_functions]
-    # FIXME: 2007-02-13 <coda.hale@gmail.com> --  This code is duplicated in
-    # Solr::Request::Standard. It should be refactored into a single location.
-    hash[:sort] = @sort_values.collect do |sort|
-      key = sort.keys[0]
-      "#{key.to_s} #{sort[key] == :descending ? 'desc' : 'asc'}"
-    end.join(',') if @sort_values
-    return hash
-  end
-
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/request/index_info.rb b/client/ruby/solrb/lib/solr/request/index_info.rb
deleted file mode 100755
index 4e736c7..0000000
--- a/client/ruby/solrb/lib/solr/request/index_info.rb
+++ /dev/null
@@ -1,17 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Request::IndexInfo < Solr::Request::Select
-  def initialize
-    super('indexinfo')
-  end
-end
diff --git a/client/ruby/solrb/lib/solr/request/optimize.rb b/client/ruby/solrb/lib/solr/request/optimize.rb
deleted file mode 100755
index 3bd1fc4..0000000
--- a/client/ruby/solrb/lib/solr/request/optimize.rb
+++ /dev/null
@@ -1,21 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr/xml'
-
-class Solr::Request::Optimize < Solr::Request::Update
-
-  def to_s
-    Solr::XML::Element.new('optimize').to_s
-  end
-
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/request/ping.rb b/client/ruby/solrb/lib/solr/request/ping.rb
deleted file mode 100644
index 6b420be..0000000
--- a/client/ruby/solrb/lib/solr/request/ping.rb
+++ /dev/null
@@ -1,36 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-# TODO: Consider something lazy like this?
-# Solr::Request::Ping = Solr::Request.simple_request :format=>:xml, :handler=>'admin/ping'
-# class Solr::Request
-#   def self.simple_request(options)
-#     Class.new do 
-#       def response_format
-#         options[:format]
-#       end
-#       def handler
-#         options[:handler]
-#       end
-#     end
-#   end
-# end
-
-class Solr::Request::Ping < Solr::Request::Base
-  def response_format
-    :xml
-  end
-  
-  def handler
-    'admin/ping'
-  end
-end
diff --git a/client/ruby/solrb/lib/solr/request/select.rb b/client/ruby/solrb/lib/solr/request/select.rb
deleted file mode 100644
index b594a52..0000000
--- a/client/ruby/solrb/lib/solr/request/select.rb
+++ /dev/null
@@ -1,54 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'erb'
-
-# "Abstract" base class, only useful with subclasses that add parameters
-class Solr::Request::Select < Solr::Request::Base
-      
-  # TODO add a constant for the all-docs query, which currently is [* TO *]
-  #      (caveat, that is all docs that have a value in the default field)
-  #      When the Lucene JAR is upgraded in Solr, the all-docs query becomes simply *
-  attr_reader :query_type
-  
-  def initialize(qt=nil)
-    @query_type = qt
-  end
-  
-  def response_format
-    :ruby
-  end
-  
-  def handler
-    'select'
-  end
-
-  def to_hash
-    return {:qt => query_type, :wt => 'ruby'}
-  end
-  
-  def to_s
-    raw_params = self.to_hash
-
-    http_params = []
-    raw_params.each do |key,value|
-      if value.respond_to? :each
-        value.each { |v| http_params << "#{key}=#{ERB::Util::url_encode(v)}" unless v.nil?}
-      else
-        http_params << "#{key}=#{ERB::Util::url_encode(value)}" unless value.nil?
-      end
-    end
-
-    http_params.join("&")
-  end
-  
-end
diff --git a/client/ruby/solrb/lib/solr/request/standard.rb b/client/ruby/solrb/lib/solr/request/standard.rb
deleted file mode 100755
index e990cf3..0000000
--- a/client/ruby/solrb/lib/solr/request/standard.rb
+++ /dev/null
@@ -1,105 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Request::Standard < Solr::Request::Select
-
-  VALID_PARAMS = [:query, :sort, :default_field, :operator, :start, :rows,
-    :filter_queries, :field_list, :debug_query, :explain_other, :facets, :highlighting]
-  
-  def initialize(params)
-    super('standard')
-    
-    raise "Invalid parameters: #{(params.keys - VALID_PARAMS).join(',')}" unless 
-      (params.keys - VALID_PARAMS).empty?
-    
-    raise ":query parameter required" unless params[:query]
-    
-    @params = params.dup
-    
-    # Validate operator
-    if params[:operator]
-      raise "Only :and/:or operators allowed" unless 
-        [:and, :or].include?(params[:operator])
-        
-      @params[:operator] = params[:operator].to_s.upcase
-    end
-
-    # Validate start, rows can be transformed to ints
-    @params[:start] = params[:start].to_i if params[:start]
-    @params[:rows] = params[:rows].to_i if params[:rows]
-    
-    @params[:field_list] ||= ["*","score"]
-  end
-  
-  def to_hash
-    hash = {}
-    
-    # standard request param processing
-    sort = @params[:sort].collect do |sort|
-      key = sort.keys[0]
-      "#{key.to_s} #{sort[key] == :descending ? 'desc' : 'asc'}"
-    end.join(',') if @params[:sort]
-    hash[:q] = sort ? "#{@params[:query]};#{sort}" : @params[:query]
-    hash["q.op"] = @params[:operator]
-    hash[:df] = @params[:default_field]
-
-    # common parameter processing
-    hash[:start] = @params[:start]
-    hash[:rows] = @params[:rows]
-    hash[:fq] = @params[:filter_queries]
-    hash[:fl] = @params[:field_list].join(',')
-    hash[:debugQuery] = @params[:debug_query]
-    hash[:explainOther] = @params[:explain_other]
-    
-    # facet parameter processing
-    if @params[:facets]
-      # TODO need validation of all that is under the :facets Hash too
-      hash[:facet] = true
-      hash["facet.field"] = []
-      hash["facet.query"] = @params[:facets][:queries]
-      hash["facet.sort"] = (@params[:facets][:sort] == :count) if @params[:facets][:sort]
-      hash["facet.limit"] = @params[:facets][:limit]
-      hash["facet.missing"] = @params[:facets][:missing]
-      hash["facet.mincount"] = @params[:facets][:mincount]
-      hash["facet.prefix"] = @params[:facets][:prefix]
-      @params[:facets][:fields].each do |f|
-        if f.kind_of? Hash
-          key = f.keys[0]
-          value = f[key]
-          hash["facet.field"] << key
-          hash["f.#{key}.facet.sort"] = (value[:sort] == :count) if value[:sort]
-          hash["f.#{key}.facet.limit"] = value[:limit]
-          hash["f.#{key}.facet.missing"] = value[:missing]
-          hash["f.#{key}.facet.mincount"] = value[:mincount]
-          hash["f.#{key}.facet.prefix"] = value[:prefix]
-        else
-          hash["facet.field"] << f
-        end
-      end
-    end
-    
-    # highlighting parameter processing - http://wiki.apache.org/solr/HighlightingParameters
-    #TODO need to add per-field overriding to snippets, fragsize, requiredFieldMatch, formatting, and simple.pre/post
-    if @params[:highlighting]
-      hash[:hl] = true
-      hash["hl.fl"] = @params[:highlighting][:field_list].join(',') if @params[:highlighting][:field_list]
-      hash["hl.snippets"] = @params[:highlighting][:max_snippets]
-      hash["hl.requireFieldMatch"] = @params[:highlighting][:require_field_match]
-      hash["hl.simple.pre"] = @params[:highlighting][:prefix]
-      hash["hl.simple.post"] = @params[:highlighting][:suffix]
-    end
-    
-    
-    hash.merge(super.to_hash)
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/request/update.rb b/client/ruby/solrb/lib/solr/request/update.rb
deleted file mode 100644
index 0eba1b4..0000000
--- a/client/ruby/solrb/lib/solr/request/update.rb
+++ /dev/null
@@ -1,22 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-# a parent class for all requests that go through the solr update handler
-class Solr::Request::Update < Solr::Request::Base
-  def response_format
-    :xml
-  end
-
-  def handler
-    'update'
-  end
-end
diff --git a/client/ruby/solrb/lib/solr/response.rb b/client/ruby/solrb/lib/solr/response.rb
deleted file mode 100755
index b14b2c2..0000000
--- a/client/ruby/solrb/lib/solr/response.rb
+++ /dev/null
@@ -1,24 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-module Solr; module Response; end; end
-require 'solr/response/base'
-require 'solr/response/xml'
-require 'solr/response/ruby'
-require 'solr/response/ping'
-require 'solr/response/add_document'
-require 'solr/response/standard'
-require 'solr/response/dismax'
-require 'solr/response/commit'
-require 'solr/response/delete'
-require 'solr/response/index_info'
-require 'solr/response/optimize'
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/response/add_document.rb b/client/ruby/solrb/lib/solr/response/add_document.rb
deleted file mode 100644
index 275a879..0000000
--- a/client/ruby/solrb/lib/solr/response/add_document.rb
+++ /dev/null
@@ -1,17 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::AddDocument < Solr::Response::Xml
-  def initialize(xml)
-    super(xml)
-  end
-end
diff --git a/client/ruby/solrb/lib/solr/response/base.rb b/client/ruby/solrb/lib/solr/response/base.rb
deleted file mode 100644
index a66d2a4..0000000
--- a/client/ruby/solrb/lib/solr/response/base.rb
+++ /dev/null
@@ -1,42 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::Base
-  attr_reader :raw_response
-
-  def initialize(raw_response)
-    @raw_response = raw_response
-  end
-
-  # factory method for creating a Solr::Response::* from 
-  # a request and the raw response content
-  def self.make_response(request, raw)
-
-    # make sure response format seems sane
-    unless [:xml, :ruby].include?(request.response_format)
-      raise Solr::Exception.new("unknown response format: #{request.response_format}" )
-    end
-
-    # TODO: Factor out this case... perhaps the request object should provide the response class instead?  Or dynamically align by class name?
-    #       Maybe the request itself could have the response handling features that get mixed in with a single general purpose response object?
-    
-    begin
-      klass = eval(request.class.name.sub(/Request/,'Response'))
-    rescue NameError
-      raise Solr::Exception.new("unknown request type: #{request.class}")
-    else
-      klass.new(raw)
-    end
-    
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/response/commit.rb b/client/ruby/solrb/lib/solr/response/commit.rb
deleted file mode 100644
index 13f5268..0000000
--- a/client/ruby/solrb/lib/solr/response/commit.rb
+++ /dev/null
@@ -1,32 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'rexml/xpath'
-
-class Solr::Response::Commit < Solr::Response::Xml
-  attr_reader :ok
-
-  def initialize(xml)
-    super(xml)
-    e = REXML::XPath.first(@doc, './result')
-    if e and e.attributes['status'] == '0'
-      @ok = true
-    else
-      @ok = false
-    end
-  end
-
-  def ok?
-    @ok
-  end
-end
-
diff --git a/client/ruby/solrb/lib/solr/response/delete.rb b/client/ruby/solrb/lib/solr/response/delete.rb
deleted file mode 100644
index 0836128..0000000
--- a/client/ruby/solrb/lib/solr/response/delete.rb
+++ /dev/null
@@ -1,13 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::Delete < Solr::Response::Xml; end
diff --git a/client/ruby/solrb/lib/solr/response/dismax.rb b/client/ruby/solrb/lib/solr/response/dismax.rb
deleted file mode 100644
index d495843..0000000
--- a/client/ruby/solrb/lib/solr/response/dismax.rb
+++ /dev/null
@@ -1,8 +0,0 @@
-class Solr::Response::Dismax < Solr::Response::Standard
-  # no need for special processing
-  
-  # FIXME: 2007-02-07 <coda.hale@gmail.com> --  The existence of this class indicates that
-  # the Request/Response pair architecture is a little hinky. Perhaps we could refactor
-  # out some of the most common functionality -- Common Query Parameters, Highlighting Parameters,
-  # Simple Facet Parameters, etc. -- into modules?
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/response/index_info.rb b/client/ruby/solrb/lib/solr/response/index_info.rb
deleted file mode 100755
index 1c5be5d..0000000
--- a/client/ruby/solrb/lib/solr/response/index_info.rb
+++ /dev/null
@@ -1,26 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::IndexInfo < Solr::Response::Ruby
-  def initialize(ruby_code)
-    super(ruby_code)
-  end
-
-  def num_docs
-    return @data['index']['numDocs']
-  end
-  
-  def field_names
-    return @data['fields'].keys
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/response/optimize.rb b/client/ruby/solrb/lib/solr/response/optimize.rb
deleted file mode 100755
index 4594d90..0000000
--- a/client/ruby/solrb/lib/solr/response/optimize.rb
+++ /dev/null
@@ -1,14 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::Optimize < Solr::Response::Commit
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/lib/solr/response/ping.rb b/client/ruby/solrb/lib/solr/response/ping.rb
deleted file mode 100644
index 92fd893..0000000
--- a/client/ruby/solrb/lib/solr/response/ping.rb
+++ /dev/null
@@ -1,28 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'rexml/xpath'
-
-class Solr::Response::Ping < Solr::Response::Xml
-
-  def initialize(xml)
-    super(xml)
-    @ok = REXML::XPath.first(@doc, './solr/ping') ? true : false
-  end
-
-  # returns true or false depending on whether the ping
-  # was successful or not
-  def ok?
-    @ok
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/response/ruby.rb b/client/ruby/solrb/lib/solr/response/ruby.rb
deleted file mode 100644
index f423aa6..0000000
--- a/client/ruby/solrb/lib/solr/response/ruby.rb
+++ /dev/null
@@ -1,42 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::Ruby < Solr::Response::Base
-  attr_reader :data
-
-  def initialize(ruby_code)
-    super(ruby_code)
-    begin
-      #TODO: what about pulling up data/header/response to ResponseBase,
-      #      or maybe a new middle class like SelectResponseBase since
-      #      all Select queries return this same sort of stuff??
-      #      XML (&wt=xml) and Ruby (&wt=ruby) responses contain exactly the same structure.
-      #      a goal of solrb is to make it irrelevant which gets used under the hood, 
-      #      but favor Ruby responses.
-      @data = eval(ruby_code)
-      @header = @data['responseHeader']
-      raise "response should be a hash" unless @data.kind_of? Hash
-      raise "response header missing" unless @header.kind_of? Hash
-    rescue SyntaxError => e
-      raise Solr::Exception.new("invalid ruby code: #{e}")
-    end
-  end
-
-  def ok?
-    @header['status'] == 0
-  end
-
-  def query_time
-    @header['QTime']
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/response/standard.rb b/client/ruby/solrb/lib/solr/response/standard.rb
deleted file mode 100644
index 5f1cb7e..0000000
--- a/client/ruby/solrb/lib/solr/response/standard.rb
+++ /dev/null
@@ -1,60 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-class Solr::Response::Standard < Solr::Response::Ruby
-  FacetValue = Struct.new(:name, :value)
-  include Enumerable
-  
-  def initialize(ruby_code)
-    super(ruby_code)
-    @response = @data['response']
-    raise "response section missing" unless @response.kind_of? Hash
-  end
-
-  def total_hits
-    @response['numFound']
-  end
-
-  def start
-    @response['start']
-  end
-
-  def hits
-    @response['docs']
-  end
-
-  def max_score
-    @response['maxScore']
-  end
-  
-  def field_facets(field)
-    facets = []
-    values = @data['facet_counts']['facet_fields'][field]
-    0.upto(values.size / 2 - 1) do |i|
-      n = i * 2
-      facets << FacetValue.new(values[n], values[n+1])
-    end
-    
-    facets
-  end
-  
-  def highlighted(id, field)
-    @data['highlighting'][id.to_s][field.to_s]
-  end
-  
-  # supports enumeration of hits
-  # TODO revisit - should this iterate through *all* hits by re-requesting more?
-  def each
-    @response['docs'].each {|hit| yield hit}
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/response/xml.rb b/client/ruby/solrb/lib/solr/response/xml.rb
deleted file mode 100644
index df404bc..0000000
--- a/client/ruby/solrb/lib/solr/response/xml.rb
+++ /dev/null
@@ -1,37 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'rexml/document'
-require 'solr/exception'
-
-class Solr::Response::Xml < Solr::Response::Base
-  attr_reader :doc, :status_code, :status_message
-
-  def initialize(xml)
-    super(xml)
-    # parse the xml
-    @doc = REXML::Document.new(xml)
-    # look for the result code and string 
-    result = REXML::XPath.first(@doc, './result')
-    if result
-      @status_code =  result.attributes['status']
-      @status_message = result.text
-    end
-  rescue REXML::ParseException => e
-    raise Solr::Exception.new("invalid response xml: #{e}")
-  end
-
-  def ok?
-    return @status_code == '0'
-  end
-
-end
diff --git a/client/ruby/solrb/lib/solr/xml.rb b/client/ruby/solrb/lib/solr/xml.rb
deleted file mode 100644
index 626ecd2..0000000
--- a/client/ruby/solrb/lib/solr/xml.rb
+++ /dev/null
@@ -1,47 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-module Solr::XML
-end
-
-begin
-  
-  # If we can load rubygems and libxml-ruby...
-  require 'rubygems'
-  require 'xml/libxml'
-  
-  # then make a few modifications to XML::Node so it can stand in for REXML::Element
-  class XML::Node
-    # element.add_element(another_element) should work
-    alias_method :add_element, :<<
-
-    # element.attributes['blah'] should work
-    def attributes
-      self
-    end
-
-    # element.text = "blah" should work
-    def text=(x)
-      self << x.to_s
-    end
-  end
-  
-  # And use XML::Node for our XML generation
-  Solr::XML::Element = XML::Node
-  
-rescue LoadError => e # If we can't load either rubygems or libxml-ruby
-  
-  # Just use REXML.
-  require 'rexml/document'
-  Solr::XML::Element = REXML::Element
-  
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/script/setup.rb b/client/ruby/solrb/script/setup.rb
deleted file mode 100755
index b7256c9..0000000
--- a/client/ruby/solrb/script/setup.rb
+++ /dev/null
@@ -1,14 +0,0 @@
-#!/usr/bin/env ruby
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-include Solr
diff --git a/client/ruby/solrb/script/solrshell b/client/ruby/solrb/script/solrshell
deleted file mode 100755
index 46938fa..0000000
--- a/client/ruby/solrb/script/solrshell
+++ /dev/null
@@ -1,18 +0,0 @@
-#!/usr/bin/env ruby
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-solr_lib   = File.dirname(__FILE__) + '/../lib/solr'
-setup    = File.dirname(__FILE__) + '/setup'
-irb_name = RUBY_PLATFORM =~ /mswin32/ ? 'irb.bat' : 'irb'
-
-exec "#{irb_name} -r #{solr_lib} -r #{setup} --simple-prompt"
diff --git a/client/ruby/solrb/solr/etc/LICENSE.javax.servlet.txt b/client/ruby/solrb/solr/etc/LICENSE.javax.servlet.txt
deleted file mode 100644
index 322799e..0000000
--- a/client/ruby/solrb/solr/etc/LICENSE.javax.servlet.txt
+++ /dev/null
@@ -1,65 +0,0 @@
-/*
- * $Header: /cvsroot/jetty/Jetty/etc/LICENSE.javax.servlet.txt,v 1.2 2001/11/06 00:01:51 gregwilkins Exp $
- * $Revision: 1.2 $
- * $Date: 2001/11/06 00:01:51 $
- *
- * ====================================================================
- * 
- * The Apache Software License, Version 1.1
- *
- * Copyright (c) 1999-2001 The Apache Software Foundation.  All rights 
- * reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- *
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer. 
- *
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in
- *    the documentation and/or other materials provided with the
- *    distribution.
- *
- * 3. The end-user documentation included with the redistribution, if
- *    any, must include the following acknowlegement:  
- *       "This product includes software developed by the 
- *        Apache Software Foundation (http://www.apache.org/)."
- *    Alternately, this acknowlegement may appear in the software itself,
- *    if and wherever such third-party acknowlegements normally appear.
- *
- * 4. The names "The Jakarta Project", "Tomcat", and "Apache Software
- *    Foundation" must not be used to endorse or promote products derived
- *    from this software without prior written permission. For written 
- *    permission, please contact apache@apache.org.
- *
- * 5. Products derived from this software may not be called "Apache"
- *    nor may "Apache" appear in their names without prior written
- *    permission of the Apache Group.
- *
- * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED
- * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
- * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
- * DISCLAIMED.  IN NO EVENT SHALL THE APACHE SOFTWARE FOUNDATION OR
- * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
- * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
- * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF
- * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
- * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
- * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
- * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- * ====================================================================
- *
- * This software consists of voluntary contributions made by many
- * individuals on behalf of the Apache Software Foundation.  For more
- * information on the Apache Software Foundation, please see
- * <http://www.apache.org/>.
- *
- */ 
-
-
-
-
-
diff --git a/client/ruby/solrb/solr/etc/LICENSE.javax.xml.html b/client/ruby/solrb/solr/etc/LICENSE.javax.xml.html
deleted file mode 100644
index c833ff7..0000000
--- a/client/ruby/solrb/solr/etc/LICENSE.javax.xml.html
+++ /dev/null
@@ -1,200 +0,0 @@
-<HTML>
-<HEAD>
-	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-1">
-	<TITLE></TITLE>
-	<META NAME="GENERATOR" CONTENT="StarOffice/5.2 (Solaris Sparc)">
-	<META NAME="AUTHOR" CONTENT="douglass hall">
-	<META NAME="CREATED" CONTENT="20010109;9281200">
-	<META NAME="CHANGEDBY" CONTENT=" ">
-	<META NAME="CHANGED" CONTENT="20010112;13325200">
-</HEAD>
-<BODY>
-<P ALIGN=CENTER><FONT SIZE=4>Sun Microsystems, Inc.</FONT> <BR><FONT SIZE=4>Binary
-Code License Agreement</FONT></P>
-<P>READ THE TERMS OF THIS AGREEMENT AND ANY PROVIDED SUPPLEMENTAL
-LICENSE TERMS (COLLECTIVELY &quot;AGREEMENT&quot;) CAREFULLY BEFORE
-OPENING THE SOFTWARE MEDIA PACKAGE.&nbsp; BY OPENING THE SOFTWARE
-MEDIA PACKAGE, YOU AGREE TO THE TERMS OF THIS AGREEMENT.&nbsp; IF YOU
-ARE ACCESSING THE SOFTWARE ELECTRONICALLY, INDICATE YOUR ACCEPTANCE
-OF THESE TERMS BY SELECTING THE &quot;ACCEPT&quot; BUTTON AT THE END
-OF THIS AGREEMENT.&nbsp; IF YOU DO NOT AGREE TO ALL THESE TERMS,
-PROMPTLY RETURN THE UNUSED SOFTWARE TO YOUR PLACE OF PURCHASE FOR A
-REFUND OR, IF THE SOFTWARE IS ACCESSED ELECTRONICALLY, SELECT THE
-&quot;DECLINE&quot; BUTTON AT THE END OF THIS AGREEMENT. 
-</P>
-<P><B>1.&nbsp; LICENSE TO USE.</B>&nbsp; Sun grants you a
-non-exclusive and non-transferable license for the internal use only
-of the accompanying software and documentation and any error
-corrections provided by Sun (collectively &quot;Software&quot;), by
-the number of users and the class of computer hardware for which the
-corresponding fee has been paid. 
-</P>
-<P><B>2.&nbsp; RESTRICTIONS.&nbsp;</B> Software is confidential and
-copyrighted. Title to Software and all associated intellectual
-property rights is retained by Sun and/or its licensors.&nbsp; Except
-as specifically authorized in any Supplemental License Terms, you may
-not make copies of Software, other than a single copy of Software for
-archival purposes.&nbsp; Unless enforcement is prohibited by
-applicable law, you may not modify, decompile, or reverse engineer
-Software.&nbsp; You acknowledge that Software is not designed,
-licensed or intended for use in the design, construction, operation
-or maintenance of any nuclear facility.&nbsp; Sun disclaims any
-express or implied warranty of fitness for such uses.&nbsp; No right,
-title or interest in or to any trademark, service mark, logo or trade
-name of Sun or its licensors is granted under this Agreement. 
-</P>
-<P><B>3. LIMITED WARRANTY.</B>&nbsp; Sun warrants to you that for a
-period of ninety (90) days from the date of purchase, as evidenced by
-a copy of the receipt, the media on which Software is furnished (if
-any) will be free of defects in materials and workmanship under
-normal use.&nbsp; Except for the foregoing, Software is provided &quot;AS
-IS&quot;.&nbsp; Your exclusive remedy and Sun's entire liability
-under this limited warranty will be at Sun's option to replace
-Software media or refund the fee paid for Software. 
-</P>
-<P><B>4.&nbsp; DISCLAIMER OF WARRANTY.&nbsp;</B> UNLESS SPECIFIED IN
-THIS AGREEMENT, ALL EXPRESS OR IMPLIED CONDITIONS, REPRESENTATIONS
-AND WARRANTIES, INCLUDING ANY IMPLIED WARRANTY OF MERCHANTABILITY,
-FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT ARE DISCLAIMED,
-EXCEPT TO THE EXTENT THAT THESE DISCLAIMERS ARE HELD TO BE LEGALLY
-INVALID. 
-</P>
-<P><B>5.&nbsp; LIMITATION OF LIABILITY.</B>&nbsp; TO THE EXTENT NOT
-PROHIBITED BY LAW, IN NO EVENT WILL SUN OR ITS LICENSORS BE LIABLE
-FOR ANY LOST REVENUE, PROFIT OR DATA, OR FOR SPECIAL, INDIRECT,
-CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER CAUSED
-REGARDLESS OF THE THEORY OF LIABILITY, ARISING OUT OF OR RELATED TO
-THE USE OF OR INABILITY TO USE SOFTWARE, EVEN IF SUN HAS BEEN ADVISED
-OF THE POSSIBILITY OF SUCH DAMAGES.&nbsp; In no event will Sun's
-liability to you, whether in contract, tort (including negligence),
-or otherwise, exceed the amount paid by you for Software under this
-Agreement.&nbsp; The foregoing limitations will apply even if the
-above stated warranty fails of its essential purpose. 
-</P>
-<P><B>6.&nbsp; Termination.</B>&nbsp; This Agreement is effective
-until terminated.&nbsp; You may terminate this Agreement at any time
-by destroying all copies of Software.&nbsp; This Agreement will
-terminate immediately without notice from Sun if you fail to comply
-with any provision of this Agreement.&nbsp; Upon Termination, you
-must destroy all copies of Software. 
-</P>
-<P><B>7. Export Regulations.</B> All Software and technical data
-delivered under this Agreement are subject to US export control laws
-and may be subject to export or import regulations in other
-countries.&nbsp; You agree to comply strictly with all such laws and
-regulations and acknowledge that you have the responsibility to
-obtain such licenses to export, re-export, or import as may be
-required after delivery to you. 
-</P>
-<P><B>8.&nbsp;&nbsp; U.S. Government Restricted Rights.&nbsp;</B> If
-Software is being acquired by or on behalf of the U.S. Government or
-by a U.S. Government prime contractor or subcontractor (at any tier),
-then the Government's rights in Software and accompanying
-documentation will be only as set forth in this Agreement; this is in
-accordance with 48 CFR 227.7201 through 227.7202-4 (for Department of
-Defense (DOD) acquisitions) and with 48 CFR 2.101 and 12.212 (for
-non-DOD acquisitions). 
-</P>
-<P><B>9.&nbsp; Governing Law.</B>&nbsp; Any action related to this
-Agreement will be governed by California law and controlling U.S.
-federal law.&nbsp; No choice of law rules of any jurisdiction will
-apply. 
-</P>
-<P><B>10.&nbsp; Severability.</B> If any provision of this Agreement
-is held to be unenforceable, this Agreement will remain in effect
-with the provision omitted, unless omission would frustrate the
-intent of the parties, in which case this Agreement will immediately
-terminate. 
-</P>
-<P><B>11.&nbsp; Integration.</B>&nbsp; This Agreement is the entire
-agreement between you and Sun relating to its subject matter.&nbsp;
-It supersedes all prior or contemporaneous oral or written
-communications, proposals, representations and warranties and
-prevails over any conflicting or additional terms of any quote,
-order, acknowledgment, or other communication between the parties
-relating to its subject matter during the term of this Agreement.&nbsp;
-No modification of this Agreement will be binding, unless in writing
-and signed by an authorized representative of each party. 
-</P>
-<P ALIGN=CENTER>JAVA(TM) INTERFACE CLASSES <BR><BR>JAVA API FOR XML
-PROCESSING (JAXP), VERSION 1.1 <BR>SUPPLEMENTAL LICENSE TERMS</P>
-<P>These supplemental license terms (&quot;Supplemental Terms&quot;)
-add to or modify the terms of the Binary Code License Agreement
-(collectively, the &quot;Agreement&quot;). Capitalized terms not
-defined in these Supplemental Terms shall have the same meanings
-ascribed to them in the Agreement. These Supplemental Terms shall
-supersede any inconsistent or conflicting terms in the Agreement, or
-in any license contained within the Software. 
-</P>
-<P><B>1. Software Internal Use and Development License Grant.</B>
-Subject to the terms and conditions of this Agreement, including, but
-not limited to Section 3 (Java(TM) Technology Restrictions) of these
-Supplemental Terms, Sun grants you a non-exclusive, non-transferable,
-limited license to reproduce internally and use internally the binary
- form of the Software, complete and unmodified, for the sole purpose
-of designing, developing and testing your Java applets and
-applications (&quot;Programs&quot;). 
-</P>
-<P><B>2. License to Distribute Software.</B>&nbsp; In addition to the
-license granted in Section 1 (Software Internal Use and Development
-License Grant) of these Supplemental Terms, subject to the terms and
-conditions of this Agreement, including but not limited to Section 3
-(Java Technology Restrictions), Sun grants you a non-exclusive,
-non-transferable, limited license to reproduce and distribute the
-Software in binary form, provided that you (i) distribute the
-Software complete and unmodified and only bundled as part of your
-Programs, (ii) do not distribute additional software intended to
-replace any component(s) of the Software, (iii) do not remove or
-alter any proprietary legends or notices contained in the Software,
-(iv) only distribute the Software subject to a license agreement that
-protects Sun's interests consistent with the terms contained in this
-Agreement, and (v) agree to defend and indemnify Sun and its
-licensors from and against any damages, costs, liabilities,
-settlement amounts and/or expenses (including attorneys' fees)
-incurred in connection with any claim, lawsuit or action by any third
-party that arises or results from the use or distribution of any and
-all Programs and/or Software. 
-</P>
-<P><B>3. Java Technology Restrictions.</B> You may not modify the
-Java Platform Interface (&quot;JPI&quot;, identified as classes
-contained within the &quot;java&quot; package or any subpackages of
-the &quot;java&quot; package), by creating additional classes within
-the JPI or otherwise causing the addition to or modification of the
-classes in the JPI.&nbsp; In the event that you create an additional
-class and associated API(s) which (i) extends the functionality of
-the Java platform, and (ii) is exposed to third party software
-developers for the purpose of developing additional software which
-invokes such additional API, you must promptly publish broadly an
-accurate specification for such API for free use by all developers.
-You may not create, or authorize your licensees to create additional
-classes, interfaces, or subpackages that are in any way identified as
-&quot;java&quot;, &quot;javax&quot;, &quot;sun&quot; or similar
-convention as specified by Sun in any naming convention designation.</P>
-<P><B>4. Trademarks and Logos.</B> You acknowledge and agree as
-between you and Sun that Sun owns the SUN, SOLARIS, JAVA, JINI,
-FORTE, STAROFFICE, STARPORTAL and iPLANET trademarks and all SUN,
-SOLARIS, JAVA, JINI, FORTE, STAROFFICE, STARPORTAL and
-iPLANET-related trademarks, service marks, logos and other brand
-designations (&quot;Sun Marks&quot;), and you agree to comply with
-the Sun Trademark and Logo Usage Requirements currently located at
-http://www.sun.com/policies/trademarks. Any use you make of the Sun
-Marks inures to Sun's benefit. 
-</P>
-<P><B>5. Source Code. </B>Software may contain source code that is
-provided for reference purposes pursuant to the terms of this
-Agreement.  Source code may not be redistributed unless expressly
-provided for in this Agreement.  <SPAN STYLE="font-weight: medium">Portions
-of this download are governed by the Apache Source Code License and
-are identified in the Readme file.  A copy of the Apache License is
-supplied with the Apache Source Code.</SPAN></P>
-<P><B>6. Termination for Infringement.&nbsp;</B> Either party may
-terminate this Agreement immediately should any Software become, or
-in either party's opinion be likely to become, the subject of a claim
-of infringement of any intellectual property right. 
-</P>
-<P>For inquiries please contact: Sun Microsystems, Inc.&nbsp; 901 San
-Antonio Road, Palo Alto, California 94303 <BR><I><FONT SIZE=2>(Form
-last modified 11-03-2000.)</FONT></I> 
-</P>
-</BODY>
-</HTML>
diff --git a/client/ruby/solrb/solr/etc/LICENSE.jsse.txt b/client/ruby/solrb/solr/etc/LICENSE.jsse.txt
deleted file mode 100644
index 1c305dc..0000000
--- a/client/ruby/solrb/solr/etc/LICENSE.jsse.txt
+++ /dev/null
@@ -1,200 +0,0 @@
-Sun Microsystems, Inc.
-Binary Code License Agreement
-
-READ THE TERMS OF THIS AGREEMENT AND ANY PROVIDED 
-SUPPLEMENTAL LICENSE TERMS (COLLECTIVELY "AGREEMENT") 
-CAREFULLY BEFORE OPENING THE SOFTWARE MEDIA PACKAGE.  BY 
-OPENING THE SOFTWARE MEDIA PACKAGE, YOU AGREE TO THE TERMS 
-OF THIS AGREEMENT.  IF YOU ARE ACCESSING THE SOFTWARE 
-ELECTRONICALLY, INDICATE YOUR ACCEPTANCE OF THESE TERMS BY 
-SELECTING THE "ACCEPT" BUTTON AT THE END OF THIS AGREEMENT. 
- IF YOU DO NOT AGREE TO ALL THESE TERMS, PROMPTLY RETURN 
-THE UNUSED SOFTWARE TO YOUR PLACE OF PURCHASE FOR A REFUND 
-OR, IF THE SOFTWARE IS ACCESSED ELECTRONICALLY, SELECT THE 
-"DECLINE" BUTTON AT THE END OF THIS AGREEMENT.
-
-1.  LICENSE TO USE.  Sun grants you a non-exclusive and 
-non-transferable license for the internal use only of the 
-accompanying software and documentation and any error 
-corrections provided by Sun (collectively "Software"), by 
-the number of users and the class of computer hardware for 
-which the corresponding fee has been paid.
-
-2.  RESTRICTIONS.  Software is confidential and 
-copyrighted. Title to Software and all associated 
-intellectual property rights is retained by Sun and/or its 
-licensors.  Except as specifically authorized in any 
-Supplemental License Terms, you may not make copies of 
-Software, other than a single copy of Software for archival 
-purposes.  Unless enforcement is prohibited by applicable 
-law, you may not modify, decompile, or reverse engineer 
-Software.  You acknowledge that Software is not designed, 
-licensed or intended for use in the design, construction, 
-operation or maintenance of any nuclear facility.  Sun 
-disclaims any express or implied warranty of fitness for 
-such uses.  No right, title or interest in or to any 
-trademark, service mark, logo or trade name of Sun or its 
-licensors is granted under this Agreement. 
-
-3. LIMITED WARRANTY.  Sun warrants to you that for a period 
-of ninety (90) days from the date of purchase, as evidenced 
-by a copy of the receipt, the media on which Software is 
-furnished (if any) will be free of defects in materials and 
-workmanship under normal use.  Except for the foregoing, 
-Software is provided "AS IS".  Your exclusive remedy and 
-Sun's entire liability under this limited warranty will be 
-at Sun's option to replace Software media or refund the fee 
-paid for Software.
-
-4.  DISCLAIMER OF WARRANTY.  UNLESS SPECIFIED IN THIS 
-AGREEMENT, ALL EXPRESS OR IMPLIED CONDITIONS, 
-REPRESENTATIONS AND WARRANTIES, INCLUDING ANY IMPLIED 
-WARRANTY OF MERCHANTABILITY, FITNESS FOR A PARTICULAR 
-PURPOSE OR NON-INFRINGEMENT ARE DISCLAIMED, EXCEPT TO THE 
-EXTENT THAT THESE DISCLAIMERS ARE HELD TO BE LEGALLY 
-INVALID.
-
-5.  LIMITATION OF LIABILITY.  TO THE EXTENT NOT PROHIBITED 
-BY LAW, IN NO EVENT WILL SUN OR ITS LICENSORS BE LIABLE FOR 
-ANY LOST REVENUE, PROFIT OR DATA, OR FOR SPECIAL, INDIRECT, 
-CONSEQUENTIAL, INCIDENTAL OR PUNITIVE DAMAGES, HOWEVER 
-CAUSED REGARDLESS OF THE THEORY OF LIABILITY, ARISING OUT 
-OF OR RELATED TO THE USE OF OR INABILITY TO USE SOFTWARE, 
-EVEN IF SUN HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH 
-DAMAGES.  In no event will Sun's liability to you, whether 
-in contract, tort (including negligence), or otherwise, 
-exceed the amount paid by you for Software under this 
-Agreement.  The foregoing limitations will apply even if 
-the above stated warranty fails of its essential purpose.  
-
-6.  Termination.  This Agreement is effective until 
-terminated.  You may terminate this Agreement at any time 
-by destroying all copies of Software.  This Agreement will 
-terminate immediately without notice from Sun if you fail 
-to comply with any provision of this Agreement.  Upon 
-Termination, you must destroy all copies of Software.
-
-7.  Export Regulations.  All Software and technical data 
-delivered under this Agreement are subject to US export 
-control laws and may be subject to export or import 
-regulations in other countries.  You agree to comply 
-strictly with all such laws and regulations and acknowledge 
-that you have the responsibility to obtain such licenses to 
-export, re-export, or import as may be required after 
-delivery to you.
-
-8.  U.S. Government Restricted Rights.  If Software is 
-being acquired by or on behalf of the U.S. Government or by 
-a U.S. Government prime contractor or subcontractor (at any 
-tier), then the Government's rights in Software and 
-accompanying documentation will be only as set forth in 
-this Agreement; this is in accordance with 48 CFR 227.7201 
-through 227.7202-4 (for Department of Defense (DOD) 
-acquisitions) and with 48 CFR 2.101 and 12.212 (for non-DOD 
-acquisitions).
-
-9.  Governing Law.  Any action related to this Agreement 
-will be governed by California law and controlling U.S. 
-federal law.  No choice of law rules of any jurisdiction 
-will apply.
-
-10.  Severability. If any provision of this Agreement is 
-held to be unenforceable, this Agreement will remain in 
-effect with the provision omitted, unless omission would 
-frustrate the intent of the parties, in which case this 
-Agreement will immediately terminate.  
-
-11.  Integration.  This Agreement is the entire agreement 
-between you and Sun relating to its subject matter.  It 
-supersedes all prior or contemporaneous oral or written 
-communications, proposals, representations and warranties 
-and prevails over any conflicting or additional terms of 
-any quote, order, acknowledgment, or other communication 
-between the parties relating to its subject matter during 
-the term of this Agreement.  No modification of this 
-Agreement will be binding, unless in writing and signed by 
-an authorized representative of each party.  
-
-For inquiries please contact: Sun Microsystems, Inc.  901 
-San Antonio Road, Palo Alto, California 94303
-
-JAVATM DEVELOPMENT OPTIONAL PACKAGES
-JAVATM SECURE SOCKET EXTENSION, VERSION 1.0.2
-
-SUPPLEMENTAL LICENSE TERMS
-
-These supplemental license terms ("Supplement") add to or 
-modify the terms of the Binary Code License Agreement 
-(collectively, the "Agreement"). Capitalized terms not 
-defined in this Supplement shall have the same meanings 
-ascribed to them in the Agreement. These Supplement terms 
-shall supersede any inconsistent or conflicting terms in 
-the Agreement, or in any license contained within the 
-Software.
-
-1. License to Distribute. Sun grants you a non-exclusive, 
-non-transferable, royalty-free, limited license to (a) use 
-the binary form of the Software for the sole purpose of 
-designing, developing and testing your JavaTM applets and 
-applications intended to run on a compatible Java 
-environment (the "Programs"), provided that the Programs 
-add significant and primary functionality to the Software, 
-and (b) reproduce and distribute the binary form of the 
-Software through multiple tiers of distribution provided
-that you: (i) distribute the Software complete and 
-unmodified; (ii) do not distribute additional software 
-intended to supersede any component(s) of the Software;
-(iii) do not remove or alter any proprietary 
-legends or notices contained in or on the Software; and 
-(iv) only distribute the Software pursuant to a license 
-agreement that protects Sun's interests consistent with the 
-terms contained in this Agreement, and provides that Sun is 
-a third party beneficiary to such license agreement. If you
-distribute the Software pursuant to this paragraph, you
-must include the following statement as part of product
-documentation (whether hard copy or electronic), as a 
-part of a copyright page or proprietary rights notice 
-page, in an "About" box or in any other form reasonably 
-designed to make the statement visible to users of the
-Software:  "This product includes code licensed from 
-RSA Data Security".
-
-2. Requirements. In exchange for the licenses granted in 
-Paragraph 1 above, you agree:
-
-a. not to create, or authorize your licensees to create, 
-additional classes, interfaces or subpackages that are 
-contained in the "java," "javax" or "sun" packages, or 
-similarly named package, as specified by Sun in any naming 
-convention;
-
-b. that, in the event that you create an API(s) which: (i) 
-extends the functionality of a Java platform; and (ii) is 
-distributed to third party software developers for the 
-purpose of developing software which invokes such 
-additional API, you must promptly and broadly publish an 
-accurate specification for such API for free use by all 
-developers; and
-
-c. to defend and indemnify Sun and its licensors from and 
-against any damages, costs, liabilities, settlement amounts 
-and/or expenses (including attorneys' fees) incurred in 
-connection with any claim, lawsuit or action by any third 
-party that arises or results from the use or distribution 
-of any and all Programs and/or Software. 
-
-3. Trademarks and Logos. You acknowledge and agree as 
-between you and Sun that Sun owns the Java trademark and 
-all Java-related trademarks, service marks, logos and other 
-brand designations including the Coffee Cup logo and Duke 
-logo ("Java Marks"), and you agree to comply with the Sun 
-Trademark and Logo Usage Requirements currently located at 
-http://www.sun.com/policies/trademarks. Any use you make of 
-the Java Marks inures to Sun's benefit.
-
-4. Source Code. Software may contain source code that is 
-provided solely for reference purposes pursuant to the 
-terms of this Agreement.
-
-
-
diff --git a/client/ruby/solrb/solr/etc/admin.xml b/client/ruby/solrb/solr/etc/admin.xml
deleted file mode 100644
index 18b364e..0000000
--- a/client/ruby/solrb/solr/etc/admin.xml
+++ /dev/null
@@ -1,82 +0,0 @@
-<?xml version="1.0"  encoding="ISO-8859-1"?>
-<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
-
-<!--
-This is a Jetty HTTP admin server configuration file.  This configuration
-uses the generic org.mortbay.util.XmlConfiguration class to call
-the normal org.mortbay.http.HttpServer configuration API from
-within an XML script.
-
-The format of this file is described in the configure.dtd file.
-
-The API that can be called by this file is described in the
-Javadoc for Jetty.
-
-$Id: admin.xml,v 1.28 2005/01/16 00:22:20 gregwilkins Exp $
--->
-
-<Configure class="org.mortbay.jetty.Server">
-  <Call name="addListener">
-    <Arg>
-      <New class="org.mortbay.http.SocketListener">
-        <Set name="Host">localhost</Set>
-        <Set name="Port">8081</Set>
-        <Set name="MinThreads">1</Set>
-        <Set name="MaxThreads">5</Set>
-        <Set name="MaxIdleTimeMs">30000</Set>      
-      </New>
-    </Arg>
-  </Call>
-
-  <Call name="addRealm">
-    <Arg>
-      <New class="org.mortbay.http.HashUserRealm">
-        <Arg>Admin Realm</Arg>
-	<Put name="admin">admin</Put>
-	<Call name="addUserToRole"><Arg>admin</Arg><Arg>server-administrator</Arg></Call>
-      </New>
-    </Arg>
-  </Call>
-
-  <Call name="addContext">
-    <Arg>/</Arg>   
-    <Set name="realmName">Admin Realm</Set>
-    <Set name="authenticator"><New class="org.mortbay.http.BasicAuthenticator"/></Set>
-   
-    <Call name="addHandler">
-      <Arg><New class="org.mortbay.http.handler.SecurityHandler"/></Arg>  
-    </Call>      
-    <Call name="addSecurityConstraint">
-       <Arg>/</Arg> 
-       <Arg><New class="org.mortbay.http.SecurityConstraint">
-              <Arg>Admin</Arg>
-              <Arg>server-administrator</Arg>
-       </New></Arg>
-    </Call>
-
-    <Call name="addServlet">
-      <Arg>Admin</Arg>
-      <Arg>/</Arg>
-      <Arg>org.mortbay.servlet.AdminServlet</Arg>
-    </Call>
-    
-    <Call name="addServlet">
-      <Arg>Debug</Arg>
-      <Arg>/debug/*</Arg>
-      <Arg>org.mortbay.servlet.Debug</Arg>
-    </Call>
-    
-    <Call name="setAttribute">
-      <Arg>org.mortbay.http.HttpServer</Arg>
-      <Arg><Call name="getHttpServer"/></Arg>
-    </Call>
-  </Call>
-
-  <Set name="anonymous">true</Set>
-  <Set name="requestsPerGC">1</Set>
-
-</Configure>
-
-
-
-
diff --git a/client/ruby/solrb/solr/etc/jetty-jmx.xml b/client/ruby/solrb/solr/etc/jetty-jmx.xml
deleted file mode 100644
index 3ab5e2f..0000000
--- a/client/ruby/solrb/solr/etc/jetty-jmx.xml
+++ /dev/null
@@ -1,37 +0,0 @@
-<?xml version="1.0"?> 
-<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
-
-
-<!-- =============================================================== -->
-<!-- Configure the Jetty Server                                      -->
-<!-- =============================================================== -->
-<Configure>
-  
-  <Call id="jmxserver" class="javax.management.MBeanServerFactory" name="createMBeanServer">
-  
-     <Arg>org.mortbay</Arg>
-
-     <Call name="createMBean">
-       <Arg>org.mortbay.util.jmx.MX4JHttpAdaptor</Arg>
-       <Arg><New class="javax.management.ObjectName"><Arg>mx4j.tools:adaptor=http</Arg></New></Arg>
-       <Arg><Array type="java.lang.Object"><Item type="int">8082</Item><Item>localhost</Item></Array></Arg>
-       <Arg><Array type="java.lang.String"><Item>int</Item><Item>java.lang.String</Item></Array></Arg>
-     </Call>
-
-     <Call name="createMBean">
-       <Arg>org.mortbay.jetty.jmx.ServerMBean</Arg>
-       <Arg><New class="javax.management.ObjectName"><Arg>org.mortbay:jetty=admin</Arg></New></Arg>
-       <Arg><Array type="java.lang.Object"><Item>etc/admin.xml</Item></Array></Arg>
-       <Arg><Array type="java.lang.String"><Item>java.lang.String</Item></Array></Arg>
-     </Call>
-
-     <Call name="createMBean">
-       <Arg>org.mortbay.jetty.jmx.ServerMBean</Arg>
-       <Arg><New class="javax.management.ObjectName"><Arg>org.mortbay:jetty=default</Arg></New></Arg>
-       <Arg><Array type="java.lang.Object"><Item>etc/jetty.xml</Item></Array></Arg>
-       <Arg><Array type="java.lang.String"><Item>java.lang.String</Item></Array></Arg>
-     </Call>
-
-  </Call>
-
-</Configure>
diff --git a/client/ruby/solrb/solr/etc/jetty.xml b/client/ruby/solrb/solr/etc/jetty.xml
deleted file mode 100755
index e2070b7..0000000
--- a/client/ruby/solrb/solr/etc/jetty.xml
+++ /dev/null
@@ -1,252 +0,0 @@
-<?xml version="1.0"?> 
-<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
-
-
-
-<!-- =============================================================== -->
-<!-- Configure the Jetty Server                                      -->
-<!-- =============================================================== -->
-<Configure class="org.mortbay.jetty.Server">
-
-  <!-- =============================================================== -->
-  <!-- Configure Logging                                               -->
-  <!-- =============================================================== -->
-
-  
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Configure Jetty Logging.                                        -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Uncomment if using jetty logging.
-  <Call class="org.mortbay.log.LogFactory" name="getFactory">
-    <Call name="getInstance">
-      <Arg/>
-      <Call name="reset"/>
-      <Call name="add">
-        <Arg>
-          <New class="org.mortbay.log.OutputStreamLogSink">
-            <Set name="filename"><SystemProperty name="jetty.home" default="."/>/logs/yyyy_mm_dd.jetty.log</Set>
-            <Set name="retainDays">90</Set>
-            <Set name="append">true</Set>
-            <Set name="logLabels">true</Set>
-            <Set name="logStackSize">true</Set>
-            <Set name="logStackTrace">false</Set>
-            <Set name="logOneLine">false</Set>
-            <Set name="suppressStack">false</Set>
-            <Set name="logTimeZone">GMT</Set>
-          </New>
-        </Arg>
-      </Call>
-    </Call>
-  </Call>
-  -->
-  
-  <!-- =============================================================== -->
-  <!-- Configure the Request Listeners                                 -->
-  <!-- =============================================================== -->
-
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Add and configure a HTTP listener to port 8983                       -->
-  <!-- The default port can be changed using: java -Djetty.port=80     -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <Call name="addListener">
-    <Arg>
-      <New class="org.mortbay.http.SocketListener">
-        <Set name="Port"><SystemProperty name="jetty.port" default="8983"/></Set>
-	<Set name="PoolName">P1</Set>
-        <Set name="MinThreads">20</Set>
-        <Set name="MaxThreads">200</Set>
-        <Set name="lowResources">50</Set>
-        <Set name="MaxIdleTimeMs">30000</Set>
-        <Set name="LowResourcePersistTimeMs">2000</Set>
-        <Set name="acceptQueueSize">0</Set>
-        <Set name="ConfidentialPort">8443</Set>
-        <Set name="IntegralPort">8443</Set>
-      </New>
-    </Arg>
-  </Call>
-
-
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Add a HTTPS SSL listener on port 8443                           -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- UNCOMMENT TO ACTIVATE 
-  <Call name="addListener">
-    <Arg>
-      <New class="org.mortbay.http.SslListener">
-        <Set name="Port">8443</Set>
-	<Set name="PoolName">P1</Set>
-        <Set name="MaxIdleTimeMs">30000</Set>
-        <Set name="lowResources">30</Set>
-        <Set name="LowResourcePersistTimeMs">2000</Set>
-        <Set name="Keystore"><SystemProperty name="jetty.home" default="."/>/etc/demokeystore</Set>
-	<Set name="Password">OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4</Set>
-	<Set name="KeyPassword">OBF:1u2u1wml1z7s1z7a1wnl1u2g</Set>
-
-        <Set name="HttpHandler">
-          <New class="org.mortbay.http.handler.MsieSslHandler">
-	    <Set name="UserAgentSubString">MSIE 5</Set>
-	  </New>
-        </Set>
-      </New>
-    </Arg>
-  </Call>
-  -->
-
-
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Add a AJP13 listener on port 8009                               -->
-  <!-- This protocol can be used with mod_jk in apache, IIS etc.       -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!--
-  <Call name="addListener">
-    <Arg>
-      <New class="org.mortbay.http.ajp.AJP13Listener">
-        <Set name="Port">8009</Set>
-        <Set name="MinThreads">5</Set>
-        <Set name="MaxThreads">20</Set>
-        <Set name="MaxIdleTimeMs">0</Set>
-        <Set name="confidentialPort">443</Set>
-      </New>
-    </Arg>
-  </Call>
-  -->
-
-
-  <!-- =============================================================== -->
-  <!-- Set the default web application configuration mechanisms:       -->
-  <!--   XMLConfiguration       - handles WEB-INF/web.xml              -->
-  <!--   JettyWebConfiguration  - handles WEB-INF/jetty-web.xml        -->
-  <!--   jsr77.Configuration    - Adds jsr77 statistics to servlets    -->
-  <!--                                                                 -->
-  <!-- Order of these classes is significant. The defaults set here    -->
-  <!-- can be overridden by calling setConfigurationClassNames() on    -->
-  <!-- the webapp context.                                             -->
-  <!-- The TagLibconfiguration scans any tld files found for           -->
-  <!-- additional j2ee listener classes - needed for JSF               -->
-  <!-- The jsr77 configuration requires additional jars on the         -->
-  <!-- on the classpath and it needs jmx enabled.                      -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <Set name="WebApplicationConfigurationClassNames">
-    <Array type="java.lang.String">
-      <Item>org.mortbay.jetty.servlet.XMLConfiguration</Item>
-      <Item>org.mortbay.jetty.servlet.JettyWebConfiguration</Item>
-
-      <!--
-      <Item>org.mortbay.jetty.servlet.TagLibConfiguration</Item>
-      <Item>org.mortbay.jetty.servlet.jsr77.Configuration</Item>
-      -->
-    </Array>
-  </Set>
-
-
-  <!-- =============================================================== -->
-  <!-- Configure the Contexts                                          -->
-  <!-- =============================================================== -->
-
-
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Add a all web application within the webapps directory.         -->
-  <!-- + No virtual host specified                                     -->
-  <!-- + Look in the webapps directory relative to jetty.home or .     -->
-  <!-- + Use the webdefault.xml resource for the defaults descriptor   -->
-  <!-- + Upack the war file                                            -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <Set name="rootWebApp">root</Set>
-  
-  <Call name="addWebApplications">
-    <Arg></Arg>
-    <Arg><SystemProperty name="jetty.home" default="."/>/webapps/</Arg>
-    <Arg><SystemProperty name="jetty.home" default="."/>/etc/webdefault.xml</Arg>
-    <Arg type="boolean">true</Arg><!--extract WARs-->
-    <Arg type="boolean">false</Arg><!-- java 2 compliant class loader -->
-  </Call>
-
-
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- Add and configure a specific web application                    -->
-  <!-- + Set Unpack WAR files                                          -->
-  <!-- + Set Default Descriptor.  Resource, file or URL                -->
-  <!-- + Set java 2 complaint classloading                             -->
-  <!-- + Set Virtual Hosts. A Null host or empty array means all hosts -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-  <!-- UNCOMMENT TO ACTIVATE
-  <Call name="addWebApplication">
-    <Arg>/context</Arg>
-    <Arg>./webapps/root</Arg>
-
-    <Set name="extractWAR">false</Set> 
-    <Set name="defaultsDescriptor">org/mortbay/jetty/servlet/webdefault.xml</Set>
-    <Set name="classLoaderJava2Compliant">true</Set> 
-
-    <Set name="virtualHosts">
-      <Array type="java.lang.String">
-        <Item></Item>
-        <Item>127.0.0.1</Item>
-        <Item>localhost</Item>
-        <Item>www.acme.com</Item>
-      </Array>
-    </Set>
-  </Call>
-  -->
-
-  <!-- =============================================================== -->
-  <!-- Configure the Request Log                                       -->
-  <!-- =============================================================== -->
-  <!-- Uncomment for request logging.
-  <Set name="RequestLog">
-    <New class="org.mortbay.http.NCSARequestLog">
-      <Arg><SystemProperty name="jetty.home" default="."/>/logs/yyyy_mm_dd.request.log</Arg>
-      <Set name="retainDays">90</Set>
-      <Set name="append">true</Set>
-      <Set name="extended">false</Set>
-      <Set name="LogTimeZone">GMT</Set>
-    </New>
-  </Set>
-  -->
-
-  <!-- =============================================================== -->
-  <!-- Configure the Other Server Options                              -->
-  <!-- =============================================================== -->
-  <Set name="requestsPerGC">2000</Set>
-  <Set name="statsOn">false</Set>
-  <Set class="org.mortbay.util.FileResource" name="checkAliases" type="boolean">true</Set>
-
-  <!-- System classes cannot be overriden by a HttpContext or webapp 
-  <Set name="systemClasses">
-    <Array type="java.lang.String">
-      <Item>java.</Item>
-      <Item>javax.servlet.</Item>
-      <Item>javax.xml.</Item>
-      <Item>org.mortbay.</Item>
-      <Item>org.xml.</Item>
-      <Item>org.w3c.</Item>
-      <Item>org.apache.commons.logging.</Item>
-    </Array>
-  </Set>
-  -->
-
-  <!-- Server classes are hidden from a HttpContext or webapp
-  <Set name="serverClasses">
-    <Array type="java.lang.String">
-      <Item>-org.mortbay.http.PathMap</Item>
-      <Item>org.mortbay.http.</Item>
-      <Item>-org.mortbay.jetty.servlet.Default</Item>
-      <Item>-org.mortbay.jetty.servlet.Invoker</Item>
-      <Item>-org.mortbay.jetty.servlet.JSR154Filter</Item>
-      <Item>org.mortbay.jetty.</Item>
-      <Item>org.mortbay.start.</Item>
-      <Item>org.mortbay.stop.</Item>
-    </Array>
-  </Set>
-  -->
-
-</Configure>
-
-
-
-
-
-
-
-
-
diff --git a/client/ruby/solrb/solr/etc/webdefault.xml b/client/ruby/solrb/solr/etc/webdefault.xml
deleted file mode 100644
index b7ba1ca..0000000
--- a/client/ruby/solrb/solr/etc/webdefault.xml
+++ /dev/null
@@ -1,373 +0,0 @@
-<?xml version="1.0" encoding="ISO-8859-1"?>
-
-<!-- ===================================================================== -->
-<!-- This file contains the default descriptor for web applications.       -->
-<!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
-<!-- The intent of this descriptor is to include jetty specific or common  -->
-<!-- configuration for all webapps.   If a context has a webdefault.xml    -->
-<!-- descriptor, it is applied before the contexts own web.xml file        -->
-<!--                                                                       -->
-<!-- A context may be assigned a default descriptor by:                    -->
-<!--  + Allowing the default defaultweb.xml to be applied                  -->
-<!--  + Calling WebApplicationContext.setDefaultsDescriptor                -->
-<!--  + Passed an arg to addWebApplications                                -->
-<!--                                                                       -->
-<!-- If a defaults descriptor is set, it is first looked for as a system   -->
-<!-- resource. The jetty jar contains a webdefault.xml file as a resource  -->
-<!-- at "org/mortbay/jetty/servlet/webdefault.xml".   If a system resource -->
-<!-- is not found, then a normal resource is tried, thus a filename or URL -->
-<!-- may be used to specify an arbitrary file.                             -->
-<!--                                                                       -->
-<!-- ===================================================================== -->
-<web-app 
-   xmlns="http://java.sun.com/xml/ns/j2ee" 
-   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-   xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" 
-   version="2.4"> 
-
-  <description>
-    Default web.xml file.  
-    This file is applied to a Web application before it's own WEB_INF/web.xml file
-  </description>
-
-
-
-  <!-- ==================================================================== -->
-  <!-- Context params to control Session Cookies                            -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <!-- UNCOMMENT TO ACTIVATE
-  <context-param>
-    <param-name>org.mortbay.jetty.servlet.SessionDomain</param-name>
-    <param-value>127.0.0.1</param-value>
-  </context-param>
-
-  <context-param>
-    <param-name>org.mortbay.jetty.servlet.SessionPath</param-name>
-    <param-value>/</param-value>
-  </context-param>
-
-  <context-param>
-    <param-name>org.mortbay.jetty.servlet.MaxAge</param-name>
-    <param-value>-1</param-value>
-  </context-param>
-  -->
-
-
-
-  <!-- ==================================================================== -->
-  <!-- The default servlet.                                                 -->
-  <!-- This servlet, normally mapped to /, provides the handling for static -->
-  <!-- content, OPTIONS and TRACE methods for the context.                  -->
-  <!-- The following initParameters are supported:                          -->
-  <!--                                                                      -->
-  <!--   acceptRanges     If true, range requests and responses are         -->
-  <!--                    supported                                         -->
-  <!--                                                                      -->
-  <!--   dirAllowed       If true, directory listings are returned if no    -->
-  <!--                    welcome file is found. Else 403 Forbidden.        -->
-  <!--                                                                      -->
-  <!--   putAllowed       If true, the PUT method is allowed                -->
-  <!--                                                                      -->
-  <!--   delAllowed       If true, the DELETE method is allowed             -->
-  <!--                                                                      -->
-  <!--   redirectWelcome  If true, redirect welcome file requests           -->
-  <!--                    else use request dispatcher forwards              -->
-  <!--                                                                      -->
-  <!--   minGzipLength    If set to a positive integer, then static content -->
-  <!--                    larger than this will be served as gzip content   -->
-  <!--                    encoded if a matching resource is found ending    -->
-  <!--                    with ".gz"                                        -->
-  <!--                                                                      -->
-  <!--   resoureBase      Can be set to replace the context resource base   -->
-  <!--                                                                      -->
-  <!--   relativeResourceBase                                               -->
-  <!--                    Set with a pathname relative to the base of the   -->
-  <!--                    servlet context root. Useful for only serving     -->
-  <!--                    static content from only specific subdirectories. -->
-  <!--                                                                      -->
-  <!-- The MOVE method is allowed if PUT and DELETE are allowed             -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <servlet>
-    <servlet-name>default</servlet-name>
-    <servlet-class>org.mortbay.jetty.servlet.Default</servlet-class>
-    <init-param>
-      <param-name>acceptRanges</param-name>
-      <param-value>true</param-value>
-    </init-param>
-    <init-param>
-      <param-name>dirAllowed</param-name>
-      <param-value>true</param-value>
-    </init-param>
-    <init-param>
-      <param-name>putAllowed</param-name>
-      <param-value>false</param-value>
-    </init-param>
-    <init-param>
-      <param-name>delAllowed</param-name>
-      <param-value>false</param-value>
-    </init-param>
-    <init-param>
-      <param-name>redirectWelcome</param-name>
-      <param-value>false</param-value>
-    </init-param>
-    <init-param>
-      <param-name>minGzipLength</param-name>
-      <param-value>8192</param-value>
-    </init-param>
-    <load-on-startup>0</load-on-startup>
-  </servlet> 
-
-  <servlet-mapping> <servlet-name>default</servlet-name> <url-pattern>/</url-pattern> </servlet-mapping>
-  
-
-  <!-- ==================================================================== -->
-  <!-- JSP Servlet                                                          -->
-  <!-- This is the jasper JSP servlet from the jakarta project              -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <!-- The JSP page compiler and execution servlet, which is the mechanism  -->
-  <!-- used by Tomcat to support JSP pages.  Traditionally, this servlet    -->
-  <!-- is mapped to URL patterh "*.jsp".  This servlet supports the         -->
-  <!-- following initialization parameters (default values are in square    -->
-  <!-- brackets):                                                           -->
-  <!--                                                                      -->
-  <!--   checkInterval       If development is false and reloading is true, -->
-  <!--                       background compiles are enabled. checkInterval -->
-  <!--                       is the time in seconds between checks to see   -->
-  <!--                       if a JSP page needs to be recompiled. [300]    -->
-  <!--                                                                      -->
-  <!--   compiler            Which compiler Ant should use to compile JSP   -->
-  <!--                       pages.  See the Ant documenation for more      -->
-  <!--                       information. [javac]                           -->
-  <!--                                                                      -->
-  <!--   classdebuginfo      Should the class file be compiled with         -->
-  <!--                       debugging information?  [true]                 -->
-  <!--                                                                      -->
-  <!--   classpath           What class path should I use while compiling   -->
-  <!--                       generated servlets?  [Created dynamically      -->
-  <!--                       based on the current web application]          -->
-  <!--                                                                      -->
-  <!--   development         Is Jasper used in development mode (will check -->
-  <!--                       for JSP modification on every access)?  [true] -->
-  <!--                                                                      -->
-  <!--   enablePooling       Determines whether tag handler pooling is      -->
-  <!--                       enabled  [true]                                -->
-  <!--                                                                      -->
-  <!--   fork                Tell Ant to fork compiles of JSP pages so that -->
-  <!--                       a separate JVM is used for JSP page compiles   -->
-  <!--                       from the one Tomcat is running in. [true]      -->
-  <!--                                                                      -->
-  <!--   ieClassId           The class-id value to be sent to Internet      -->
-  <!--                       Explorer when using <jsp:plugin> tags.         -->
-  <!--                       [clsid:8AD9C840-044E-11D1-B3E9-00805F499D93]   -->
-  <!--                                                                      -->
-  <!--   javaEncoding        Java file encoding to use for generating java  -->
-  <!--                       source files. [UTF8]                           -->
-  <!--                                                                      -->
-  <!--   keepgenerated       Should we keep the generated Java source code  -->
-  <!--                       for each page instead of deleting it? [true]   -->
-  <!--                                                                      -->
-  <!--   logVerbosityLevel   The level of detailed messages to be produced  -->
-  <!--                       by this servlet.  Increasing levels cause the  -->
-  <!--                       generation of more messages.  Valid values are -->
-  <!--                       FATAL, ERROR, WARNING, INFORMATION, and DEBUG. -->
-  <!--                       [WARNING]                                      -->
-  <!--                                                                      -->
-  <!--   mappedfile          Should we generate static content with one     -->
-  <!--                       print statement per input line, to ease        -->
-  <!--                       debugging?  [false]                            -->
-  <!--                                                                      -->
-  <!--                                                                      -->
-  <!--   reloading           Should Jasper check for modified JSPs?  [true] -->
-  <!--                                                                      -->
-  <!--   suppressSmap        Should the generation of SMAP info for JSR45   -->
-  <!--                       debugging be suppressed?  [false]              -->
-  <!--                                                                      -->
-  <!--   dumpSmap            Should the SMAP info for JSR45 debugging be    -->
-  <!--                       dumped to a file? [false]                      -->
-  <!--                       False if suppressSmap is true                  -->
-  <!--                                                                      -->
-  <!--   scratchdir          What scratch directory should we use when      -->
-  <!--                       compiling JSP pages?  [default work directory  -->
-  <!--                       for the current web application]               -->
-  <!--                                                                      -->
-  <!--   tagpoolMaxSize      The maximum tag handler pool size  [5]         -->
-  <!--                                                                      -->
-  <!--   xpoweredBy          Determines whether X-Powered-By response       -->
-  <!--                       header is added by generated servlet  [false]  -->
-  <!--                                                                      -->
-  <!-- If you wish to use Jikes to compile JSP pages:                       -->
-  <!--   Set the init parameter "compiler" to "jikes".  Define              -->
-  <!--   the property "-Dbuild.compiler.emacs=true" when starting Jetty     -->
-  <!--   to cause Jikes to emit error messages in a format compatible with  -->
-  <!--   Jasper.                                                            -->
-  <!--   If you get an error reporting that jikes can't use UTF8 encoding,  -->
-  <!--   try setting the init parameter "javaEncoding" to "ISO-8859-1".     -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <servlet>
-    <servlet-name>jsp</servlet-name>
-    <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
-    <init-param>
-        <param-name>logVerbosityLevel</param-name>
-        <param-value>DEBUG</param-value>
-    </init-param>
-    <init-param>
-        <param-name>fork</param-name>
-        <param-value>false</param-value>
-    </init-param>
-    <init-param>
-        <param-name>xpoweredBy</param-name>
-        <param-value>false</param-value>
-    </init-param>
-    <load-on-startup>0</load-on-startup>
-  </servlet>
-
-  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jsp</url-pattern> </servlet-mapping>
-  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jspf</url-pattern> </servlet-mapping>
-  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.jspx</url-pattern> </servlet-mapping>
-  <servlet-mapping> <servlet-name>jsp</servlet-name> <url-pattern>*.xsp</url-pattern> </servlet-mapping>
-
-
-  <!-- ==================================================================== -->
-  <!-- Dynamic Servlet Invoker.                                             -->
-  <!-- This servlet invokes anonymous servlets that have not been defined   -->
-  <!-- in the web.xml or by other means. The first element of the pathInfo  -->
-  <!-- of a request passed to the envoker is treated as a servlet name for  -->
-  <!-- an existing servlet, or as a class name of a new servlet.            -->
-  <!-- This servlet is normally mapped to /servlet/*                        -->
-  <!-- This servlet support the following initParams:                       -->
-  <!--                                                                      -->
-  <!--  nonContextServlets       If false, the invoker can only load        -->
-  <!--                           servlets from the contexts classloader.    -->
-  <!--                           This is false by default and setting this  -->
-  <!--                           to true may have security implications.    -->
-  <!--                                                                      -->
-  <!--  verbose                  If true, log dynamic loads                 -->
-  <!--                                                                      -->
-  <!--  *                        All other parameters are copied to the     -->
-  <!--                           each dynamic servlet as init parameters    -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <!-- Uncomment for dynamic invocation
-  <servlet>
-    <servlet-name>invoker</servlet-name>
-    <servlet-class>org.mortbay.jetty.servlet.Invoker</servlet-class>
-    <init-param>
-      <param-name>verbose</param-name>
-      <param-value>false</param-value>
-    </init-param>
-    <init-param>
-      <param-name>nonContextServlets</param-name>
-      <param-value>false</param-value>
-    </init-param>
-    <init-param>
-      <param-name>dynamicParam</param-name>
-      <param-value>anyValue</param-value>
-    </init-param>
-    <load-on-startup>0</load-on-startup>
-  </servlet>
-
-  <servlet-mapping> <servlet-name>invoker</servlet-name> <url-pattern>/servlet/*</url-pattern> </servlet-mapping>
-  -->
-
-
-
-  <!-- ==================================================================== -->
-  <session-config>
-    <session-timeout>30</session-timeout>
-  </session-config>
-
-  <!-- ==================================================================== -->
-  <!-- Default MIME mappings                                                -->
-  <!-- The default MIME mappings are provided by the mime.properties        -->
-  <!-- resource in the org.mortbay.jetty.jar file.  Additional or modified  -->
-  <!-- mappings may be specified here                                       -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <!-- UNCOMMENT TO ACTIVATE
-  <mime-mapping>
-    <extension>mysuffix</extension>
-    <mime-type>mymime/type</mime-type>
-  </mime-mapping>
-  -->
-
-  <!-- ==================================================================== -->
-  <welcome-file-list>
-    <welcome-file>index.html</welcome-file>
-    <welcome-file>index.htm</welcome-file>
-    <welcome-file>index.jsp</welcome-file>
-  </welcome-file-list>
-
-  <!-- ==================================================================== -->
-  <locale-encoding-mapping-list>
-    <locale-encoding-mapping><locale>ar</locale><encoding>ISO-8859-6</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>be</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>bg</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>ca</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>cs</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>da</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>de</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>el</locale><encoding>ISO-8859-7</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>en</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>es</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>et</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>fi</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>fr</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>hr</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>hu</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>is</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>it</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>iw</locale><encoding>ISO-8859-8</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>ja</locale><encoding>Shift_JIS</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>ko</locale><encoding>EUC-KR</encoding></locale-encoding-mapping>     
-    <locale-encoding-mapping><locale>lt</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>lv</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>mk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>nl</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>no</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>pl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>pt</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>ro</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>ru</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sh</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sk</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sq</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sr</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>sv</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>tr</locale><encoding>ISO-8859-9</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>uk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>zh</locale><encoding>GB2312</encoding></locale-encoding-mapping>
-    <locale-encoding-mapping><locale>zh_TW</locale><encoding>Big5</encoding></locale-encoding-mapping>   
-  </locale-encoding-mapping-list>
-
-  
-  <!-- ==================================================================== -->
-  <!-- JSR154 Stupidness                                                    -->
-  <!-- This filter implements some of the JSR154 (servlet 2.4) "features",  -->
-  <!-- which are rather stupid and expensive to implement. Thus they are    -->
-  <!-- not included in the core Jetty architecture.   It is HIGHLY          -->
-  <!-- RECOMMENDED that this filter NOT be used, unless you need:           -->
-  <!--    RequestAttributeListeners - If you actually have a real use for   -->
-  <!--       these, please tell the jetty lists what they are and why you   -->
-  <!--       can't use a normal filter/wrapper for this?                    -->
-  <!--    SRV.6.2.2 Dispatachers  - where the container cannot wrap the     -->
-  <!--       request or response. See                                       -->
-  <!--       http://jetty.mortbay.org/jetty/doc/servlet24.html#d0e711       -->
-  <!--       to find out why this is stupid.                                -->
-  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
-  <!-- UNCOMMENT For compliant behaviour
-  <filter>
-    <filter-name>jsr154</filter-name>
-    <filter-class>org.mortbay.jetty.servlet.JSR154Filter</filter-class>
-    <init-param><param-name>unwrappedDispatch</param-name><param-value>true</param-value></init-param>
-  </filter>
-  <filter-mapping>
-      <filter-name>jsr154</filter-name>
-      <url-pattern>/*</url-pattern>
-      <dispatcher>REQUEST</dispatcher>
-      <dispatcher>FORWARD</dispatcher>
-      <dispatcher>INCLUDE</dispatcher>
-      <dispatcher>ERROR</dispatcher>
-  </filter-mapping>
-  -->
-  
-</web-app>
-
diff --git a/client/ruby/solrb/solr/ext/ant.jar b/client/ruby/solrb/solr/ext/ant.jar
deleted file mode 100644
index f66b800..0000000
--- a/client/ruby/solrb/solr/ext/ant.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[395544dc9189fe11795250b48adda9e7f24c34bb] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/commons-el.jar b/client/ruby/solrb/solr/ext/commons-el.jar
deleted file mode 100644
index c5b6345..0000000
--- a/client/ruby/solrb/solr/ext/commons-el.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[608ed796ca34c5acc14cb3cf3cc4deee4ea86180] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/commons-logging.jar b/client/ruby/solrb/solr/ext/commons-logging.jar
deleted file mode 100644
index f330fde..0000000
--- a/client/ruby/solrb/solr/ext/commons-logging.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[b73a80fab641131e6fbe3ae833549efb3c540d17] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/jasper-compiler.jar b/client/ruby/solrb/solr/ext/jasper-compiler.jar
deleted file mode 100644
index 48369df..0000000
--- a/client/ruby/solrb/solr/ext/jasper-compiler.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[96ec53852d45e13723d8b40c83d99ed449a4c83e] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/jasper-runtime.jar b/client/ruby/solrb/solr/ext/jasper-runtime.jar
deleted file mode 100644
index d0e39ed..0000000
--- a/client/ruby/solrb/solr/ext/jasper-runtime.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[5c3b4bfff7a3bd377802548604a0b28bebab8ea7] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/mx4j-remote.jar b/client/ruby/solrb/solr/ext/mx4j-remote.jar
deleted file mode 100644
index b7a97be..0000000
--- a/client/ruby/solrb/solr/ext/mx4j-remote.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[de7739dba7f3f062240c87ffa37e81b00908ae33] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/mx4j-tools.jar b/client/ruby/solrb/solr/ext/mx4j-tools.jar
deleted file mode 100644
index 14324bd..0000000
--- a/client/ruby/solrb/solr/ext/mx4j-tools.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[87ccc77dd4e61e03d0b4b77265b8f62e7396d0ef] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/ext/mx4j.jar b/client/ruby/solrb/solr/ext/mx4j.jar
deleted file mode 100644
index f2eb43a..0000000
--- a/client/ruby/solrb/solr/ext/mx4j.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[e5dafc175ada7cf2d3e62cbd409541a8dcf7ad79] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/lib/javax.servlet.jar b/client/ruby/solrb/solr/lib/javax.servlet.jar
deleted file mode 100644
index ba6623b..0000000
--- a/client/ruby/solrb/solr/lib/javax.servlet.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[8092795672eb0d929e173a3de93c5093a828a78a] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/lib/org.mortbay.jetty.jar b/client/ruby/solrb/solr/lib/org.mortbay.jetty.jar
deleted file mode 100644
index 1304576..0000000
--- a/client/ruby/solrb/solr/lib/org.mortbay.jetty.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[186a190ce106d61d497e29c713e70ecf14667ef1] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/lib/org.mortbay.jmx.jar b/client/ruby/solrb/solr/lib/org.mortbay.jmx.jar
deleted file mode 100644
index f62f145..0000000
--- a/client/ruby/solrb/solr/lib/org.mortbay.jmx.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[0561a2e877e10128a72424bb368902a11bdc94ab] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/solr/README.txt b/client/ruby/solrb/solr/solr/README.txt
deleted file mode 100644
index f39ad34..0000000
--- a/client/ruby/solrb/solr/solr/README.txt
+++ /dev/null
@@ -1,52 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-
-Example "Solr Home" Directory
-=============================
-
-This directory is provided as an example of what a "Solr Home" directory
-should look like.
-
-It's not strictly necessary that you copy all of the files in this
-directory when setting up a new instance of Solr, but it is recommended.
-
-
-Basic Directory Structure
--------------------------
-
-The Solr Home directory typically contains the following subdirectories...
-
-   conf/
-        This directory is mandatory and must contain your solrconfig.xml
-        and schema.xml.  Any other optional configuration files would also 
-        be kept here.
-
-   data/
-        This directory is the default location where Solr will keep your
-        index, and is used by the replication scripts for dealing with
-        snapshots.  You can override this location in the solrconfig.xml
-        and scripts.conf files. Solr will create this directory if it
-        does not already exist.
-
-   lib/
-        This directory is optional.  If it exists, Solr will load any Jars
-        found in this directory and use them to resolve any "plugins"
-        specified in your solrconfig.xml or schema.xml (ie: Analyzers,
-        Request Handlers, etc...)
-
-   bin/
-        This directory is optional.  It is the default location used for
-        keeping the replication scripts.
diff --git a/client/ruby/solrb/solr/solr/conf/admin-extra.html b/client/ruby/solrb/solr/solr/conf/admin-extra.html
deleted file mode 100644
index aa739da..0000000
--- a/client/ruby/solrb/solr/solr/conf/admin-extra.html
+++ /dev/null
@@ -1,31 +0,0 @@
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- The content of this page will be statically included into the top
-of the admin page.  Uncomment this as an example to see there the content
-will show up.
-
-<hr>
-<i>This line will appear before the first table</i>
-<tr>
-<td colspan="2">
-This row will be appended to the end of the first table
-</td>
-</tr>
-<hr>
-
--->
diff --git a/client/ruby/solrb/solr/solr/conf/protwords.txt b/client/ruby/solrb/solr/solr/conf/protwords.txt
deleted file mode 100644
index 1dfc0ab..0000000
--- a/client/ruby/solrb/solr/solr/conf/protwords.txt
+++ /dev/null
@@ -1,21 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# Use a protected word file to protect against the stemmer reducing two
-# unrelated words to the same base word.
-
-# Some non-words that normally won't be encountered,
-# just to test that they won't be stemmed.
-dontstems
-zwhacky
-
diff --git a/client/ruby/solrb/solr/solr/conf/schema.xml b/client/ruby/solrb/solr/solr/conf/schema.xml
deleted file mode 100755
index 02e7401..0000000
--- a/client/ruby/solrb/solr/solr/conf/schema.xml
+++ /dev/null
@@ -1,219 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- This is the Solr schema file. This file should be named "schema.xml" and
- should be in the conf directory under the solr home
- (i.e. ./solr/conf/schema.xml by default) 
- or located where the classloader for the Solr webapp can find it.
-
- For more information, on how to customize this file, please see
- http://wiki.apache.org/solr/SchemaXml
--->
-
-<schema name="flare" version="1.1">
-  <!-- attribute "name" is the name of this schema and is only used for display purposes.
-       Applications should change this to reflect the nature of the search collection.
-       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
-       not normally be changed by applications.
-       1.0: multiValued attribute did not exist, all fields are multiValued by nature
-       1.1: multiValued attribute introduced, false by default -->
-
-  <types>
-    <!-- field type definitions. The "name" attribute is
-       just a label to be used by field definitions.  The "class"
-       attribute and any other attributes determine the real
-       behavior of the fieldtype.
-         Class names starting with "solr" refer to java classes in the
-       org.apache.solr.analysis package.
-    -->
-
-    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
-       - StrField and TextField support an optional compressThreshold which
-       limits compression (if enabled in the derived fields) to values which
-       exceed a certain size (in characters).
-    -->
-    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- boolean type: "true" or "false" -->
-    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- The optional sortMissingLast and sortMissingFirst attributes are
-         currently supported on types that are sorted internally as strings.
-       - If sortMissingLast="true", then a sort on this field will cause documents
-         without the field to come after documents with the field,
-         regardless of the requested sort order (asc or desc).
-       - If sortMissingFirst="true", then a sort on this field will cause documents
-         without the field to come before documents with the field,
-         regardless of the requested sort order.
-       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
-         then default lucene sorting will be used which places docs without the
-         field first in an ascending sort and last in a descending sort.
-    -->    
-
-
-    <!-- numeric field types that store and index the text
-         value verbatim (and hence don't support range queries, since the
-         lexicographic ordering isn't equal to the numeric ordering) -->
-    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
-    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
-    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
-    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
-
-
-    <!-- Numeric field types that manipulate the value into
-         a string value that isn't human-readable in its internal form,
-         but with a lexicographic ordering the same as the numeric ordering,
-         so that range queries work correctly. -->
-    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
-
-
-    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
-         is a more restricted form of the canonical representation of dateTime
-         http://www.w3.org/TR/xmlschema-2/#dateTime    
-         The trailing "Z" designates UTC time and is mandatory.
-         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
-         All other components are mandatory.
-
-         Expressions can also be used to denote calculations that should be
-         performed relative to "NOW" to determine the value, ie...
-
-               NOW/HOUR
-                  ... Round to the start of the current hour
-               NOW-1DAY
-                  ... Exactly 1 day prior to now
-               NOW/DAY+6MONTHS+3DAYS
-                  ... 6 months and 3 days in the future from the start of
-                      the current day
-                      
-         Consult the DateField javadocs for more information.
-      -->
-    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- solr.TextField allows the specification of custom text analyzers
-         specified as a tokenizer and a list of token filters. Different
-         analyzers may be specified for indexing and querying.
-
-         The optional positionIncrementGap puts space between multiple fields of
-         this type on the same document, with the purpose of preventing false phrase
-         matching across fields.
-
-         For more info on customizing your analyzer chain, please see
-         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
-     -->
-
-    <!-- One can also specify an existing Analyzer class that has a
-         default constructor via the class attribute on the analyzer element
-    <fieldtype name="text_greek" class="solr.TextField">
-      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
-    </fieldType>
-    -->
-
-    <!-- A text field that only splits on whitespace for exact matching of words -->
-    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-      </analyzer>
-    </fieldtype>
-
-    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
-      <analyzer type="index">
-        <tokenizer class="solr.StandardTokenizerFactory"/>
-        <filter class="solr.StandardFilterFactory"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-      </analyzer>
-      <analyzer type="query">
-        <tokenizer class="solr.StandardTokenizerFactory"/>
-        <filter class="solr.StandardFilterFactory"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
-
-    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
-         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
-    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
-        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
- </types>
-
-
- <fields>
-   <!-- Valid attributes for fields:
-     name: mandatory - the name for the field
-     type: mandatory - the name of a previously defined type from the <types> section
-     indexed: true if this field should be indexed (searchable or sortable)
-     stored: true if this field should be retrievable
-     compressed: [false] if this field should be stored using gzip compression
-       (this will only apply if the field type is compressable; among
-       the standard field types, only TextField and StrField are)
-     multiValued: true if this field may contain multiple values per document
-     omitNorms: (expert) set to true to omit the norms associated with
-       this field (this disables length normalization and index-time
-       boosting for the field, and saves some memory).  Only full-text
-       fields or fields that need an index-time boost need norms.
-   -->
-
-   <field name="id" type="string" indexed="true" stored="true"/>
-
-   <!-- catchall field, containing all other searchable text fields (implemented
-        via copyField further on in this schema  -->
-   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
-
-   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
-        will be used if the name matches any of the patterns.
-        RESTRICTION: the glob-like pattern in the name attribute must have
-        a "*" only at the start or the end.
-        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
-        Longer patterns will be matched first.  if equal size patterns
-        both match, the first appearing in the schema will be used.  -->
-   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true" multiValued="true"/>
-   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true" multiValued="true"/>
- </fields>
-
- <!-- field to use to determine and enforce document uniqueness. -->
- <uniqueKey>id</uniqueKey>
-
- <!-- field for the QueryParser to use when an explicit fieldname is absent -->
- <defaultSearchField>text</defaultSearchField>
-
- <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
- <solrQueryParser defaultOperator="AND"/>
-
-  <!-- copyField commands copy one field to another at the time a document
-        is added to the index.  It's used either to index the same field differently,
-        or to add multiple fields to the same field for easier/faster searching.  -->
- <copyField source="*_text" dest="text"/>
-
- <!-- Similarity is the scoring routine for each document vs. a query.
-      A custom similarity may be specified here, but the default is fine
-      for most applications.  -->
- <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
-
-</schema>
diff --git a/client/ruby/solrb/solr/solr/conf/scripts.conf b/client/ruby/solrb/solr/solr/conf/scripts.conf
deleted file mode 100644
index e993bbf..0000000
--- a/client/ruby/solrb/solr/solr/conf/scripts.conf
+++ /dev/null
@@ -1,24 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-user=
-solr_hostname=localhost
-solr_port=8983
-rsyncd_port=18983
-data_dir=
-webapp_name=solr
-master_host=
-master_data_dir=
-master_status_dir=
diff --git a/client/ruby/solrb/solr/solr/conf/solrconfig.xml b/client/ruby/solrb/solr/solr/conf/solrconfig.xml
deleted file mode 100755
index a008b2d..0000000
--- a/client/ruby/solrb/solr/solr/conf/solrconfig.xml
+++ /dev/null
@@ -1,300 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<config>
-
-  <!-- Used to specify an alternate directory to hold all index data
-       other than the default ./data under the Solr home.
-       If replication is in use, this should match the replication configuration. -->
-  <dataDir>${solr.data.dir:./solr/data}</dataDir>
-
-  <indexDefaults>
-   <!-- Values here affect all index writers and act as a default unless overridden. -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-    <writeLockTimeout>1000</writeLockTimeout>
-    <commitLockTimeout>10000</commitLockTimeout>
-  </indexDefaults>
-
-  <mainIndex>
-    <!-- options specific to the main on-disk lucene index -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-
-    <!-- If true, unlock any held write or commit locks on startup. 
-         This defeats the locking mechanism that allows multiple
-         processes to safely access a lucene index, and should be
-         used with care. -->
-    <unlockOnStartup>false</unlockOnStartup>
-  </mainIndex>
-
-  <!-- the default high-performance update handler -->
-  <updateHandler class="solr.DirectUpdateHandler2">
-
-    <!-- A prefix of "solr." for class names is an alias that
-         causes solr to search appropriate packages, including
-         org.apache.solr.(search|update|request|core|analysis)
-     -->
-
-    <!-- autocommit pending docs if certain criteria are met 
-    <autoCommit> 
-      <maxDocs>10000</maxDocs>
-    </autoCommit>
-    -->
-
-    <!-- The RunExecutableListener executes an external command.
-         exe - the name of the executable to run
-         dir - dir to use as the current working directory. default="."
-         wait - the calling thread waits until the executable returns. default="true"
-         args - the arguments to pass to the program.  default=nothing
-         env - environment variables to set.  default=nothing
-      -->
-    <!-- A postCommit event is fired after every commit or optimize command
-    <listener event="postCommit" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
-      <arr name="env"> <str>MYVAR=val1</str> </arr>
-    </listener>
-    -->
-    <!-- A postOptimize event is fired only after every optimize command, useful
-         in conjunction with index distribution to only distribute optimized indicies 
-    <listener event="postOptimize" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-    </listener>
-    -->
-
-  </updateHandler>
-
-
-  <query>
-    <!-- Maximum number of clauses in a boolean query... can affect
-        range or prefix queries that expand to big boolean
-        queries.  An exception is thrown if exceeded.  -->
-    <maxBooleanClauses>1024</maxBooleanClauses>
-
-    
-    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
-         unordered sets of *all* documents that match a query.
-         When a new searcher is opened, its caches may be prepopulated
-         or "autowarmed" using data from caches in the old searcher.
-         autowarmCount is the number of items to prepopulate.  For LRUCache,
-         the autowarmed items will be the most recently accessed items.
-       Parameters:
-         class - the SolrCache implementation (currently only LRUCache)
-         size - the maximum number of entries in the cache
-         initialSize - the initial capacity (number of entries) of
-           the cache.  (seel java.util.HashMap)
-         autowarmCount - the number of entries to prepopulate from
-           and old cache.
-         -->
-    <filterCache
-      class="solr.LRUCache"
-      size="200000"
-      initialSize="100000"
-      autowarmCount="50000"/>
-
-   <!-- queryResultCache caches results of searches - ordered lists of
-         document ids (DocList) based on a query, a sort, and the range
-         of documents requested.  -->
-    <queryResultCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="256"/>
-
-  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
-       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
-    <documentCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="0"/>
-
-    <!-- If true, stored fields that are not requested will be loaded lazily.
-    -->
-    <enableLazyFieldLoading>false</enableLazyFieldLoading>
-
-    <!-- Example of a generic cache.  These caches may be accessed by name
-         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
-         The purpose is to enable easy caching of user/application level data.
-         The regenerator argument should be specified as an implementation
-         of solr.search.CacheRegenerator if autowarming is desired.  -->
-    <!--
-    <cache name="myUserCache"
-      class="solr.LRUCache"
-      size="4096"
-      initialSize="1024"
-      autowarmCount="1024"
-      regenerator="org.mycompany.mypackage.MyRegenerator"
-      />
-    -->
-
-   <!-- An optimization that attempts to use a filter to satisfy a search.
-         If the requested sort does not include score, then the filterCache
-         will be checked for a filter matching the query. If found, the filter
-         will be used as the source of document ids, and then the sort will be
-         applied to that.
-    <useFilterForSortedQuery>true</useFilterForSortedQuery>
-   -->
-
-   <!-- An optimization for use with the queryResultCache.  When a search
-         is requested, a superset of the requested number of document ids
-         are collected.  For example, if a search for a particular query
-         requests matching documents 10 through 19, and queryWindowSize is 50,
-         then documents 0 through 50 will be collected and cached.  Any further
-         requests in that range can be satisfied via the cache.  -->
-    <queryResultWindowSize>10</queryResultWindowSize>
-
-    <!-- This entry enables an int hash representation for filters (DocSets)
-         when the number of items in the set is less than maxSize.  For smaller
-         sets, this representation is more memory efficient, more efficient to
-         iterate over, and faster to take intersections.  -->
-    <HashDocSet maxSize="3000" loadFactor="0.75"/>
-
-
-    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
-         into cached filters if the number of docs selected by the clause exceeds
-         the threshold (represented as a fraction of the total index) -->
-    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
-
-
-    <!-- a newSearcher event is fired whenever a new searcher is being prepared
-         and there is a current searcher handling requests (aka registered). -->
-    <!-- QuerySenderListener takes an array of NamedList and executes a
-         local query request for each NamedList in sequence. -->
-    <!--
-    <listener event="newSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- a firstSearcher event is fired whenever a new searcher is being
-         prepared but there is no current registered searcher to handle
-         requests or to gain autowarming data from. -->
-    <!--
-    <listener event="firstSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- If a search request comes in and there is no current registered searcher,
-         then immediately register the still warming searcher and use it.  If
-         "false" then all requests will block until the first searcher is done
-         warming. -->
-    <useColdSearcher>false</useColdSearcher>
-
-  </query>
-
-
-  <!-- requestHandler plugins... incoming queries will be dispatched to the
-     correct handler based on the qt (query type) param matching the
-     name of registered handlers.
-     The "standard" request handler is the default and will be used if qt
-     is not specified in the request.
-  -->
-  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
-  <requestHandler name="standard" class="solr.StandardRequestHandler">
-    <!-- default values for query parameters -->
-     <lst name="defaults">
-       <str name="echoParams">explicit</str>
-       <!-- 
-       <int name="rows">10</int>
-       <str name="fl">*</str>
-       <str name="version">2.1</str>
-        -->
-     </lst>
-  </requestHandler>
-  
-  <!-- DisMaxRequestHandler allows easy searching across multiple fields
-       for simple user-entered phrases. 
-       see http://wiki.apache.org/solr/DisMaxRequestHandler
-   -->
-  <requestHandler name="dismax" class="solr.DisMaxRequestHandler" >
-    <lst name="defaults">
-     <str name="echoParams">explicit</str>
-     <float name="tie">0.01</float>
-     <str name="qf">
-        text^1.9
-     </str>
-     <str name="pf">
-        text^1.9
-     </str>
-     <str name="fl">
-        id, text
-     </str>
-     <str name="mm">
-        2&lt;-1 5&lt;-2 6&lt;90%
-     </str>
-     <int name="ps">100</int>
-    </lst>
-  </requestHandler>
-
-  <!-- queryResponseWriter plugins... query responses will be written using the
-    writer specified by the 'wt' request parameter matching the name of a registered
-    writer.
-    The "standard" writer is the default and will be used if 'wt' is not specified 
-    in the request. XMLResponseWriter will be used if nothing is specified here.
-    The json, python, and ruby writers are also available by default.
-
-    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
-    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
-    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
-    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
-
-    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
-  -->
-
-  <!-- XSLT response writer transforms the XML output by any xslt file found
-       in Solr's conf/xslt directory.  Changes to xslt files are checked for
-       every xsltCacheLifetimeSeconds.  
-   -->
-  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
-    <int name="xsltCacheLifetimeSeconds">5</int>
-  </queryResponseWriter> 
-    
-  <!-- config for the admin interface --> 
-  <admin>
-    <defaultQuery>solr</defaultQuery>
-    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
-    <!-- pingQuery should be "URLish" ...
-         &amp; separated key=val pairs ... but there shouldn't be any
-         URL escaping of the values -->
-    <pingQuery>
-     q=solr
-    </pingQuery>
-    <!-- configure a healthcheck file for servers behind a loadbalancer
-    <healthcheck type="file">server-enabled</healthcheck>
-    -->
-  </admin>
-
-</config>
diff --git a/client/ruby/solrb/solr/solr/conf/stopwords.txt b/client/ruby/solrb/solr/solr/conf/stopwords.txt
deleted file mode 100644
index 8433c83..0000000
--- a/client/ruby/solrb/solr/solr/conf/stopwords.txt
+++ /dev/null
@@ -1,57 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# a couple of test stopwords to test that the words are really being
-# configured from this file:
-stopworda
-stopwordb
-
-#Standard english stop words taken from Lucene's StopAnalyzer
-an
-and
-are
-as
-at
-be
-but
-by
-for
-if
-in
-into
-is
-it
-no
-not
-of
-on
-or
-s
-such
-t
-that
-the
-their
-then
-there
-these
-they
-this
-to
-was
-will
-with
-
diff --git a/client/ruby/solrb/solr/solr/conf/synonyms.txt b/client/ruby/solrb/solr/solr/conf/synonyms.txt
deleted file mode 100644
index b0e31cb..0000000
--- a/client/ruby/solrb/solr/solr/conf/synonyms.txt
+++ /dev/null
@@ -1,31 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-#some test synonym mappings unlikely to appear in real input text
-aaa => aaaa
-bbb => bbbb1 bbbb2
-ccc => cccc1,cccc2
-a\=>a => b\=>b
-a\,a => b\,b
-fooaaa,baraaa,bazaaa
-
-# Some synonym groups specific to this example
-GB,gib,gigabyte,gigabytes
-MB,mib,megabyte,megabytes
-Television, Televisions, TV, TVs
-#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
-#after us won't split it into two words.
-
-# Synonym mappings can be used for spelling correction too
-pixima => pixma
-
diff --git a/client/ruby/solrb/solr/solr/conf/xslt/example.xsl b/client/ruby/solrb/solr/solr/conf/xslt/example.xsl
deleted file mode 100644
index 75178f2..0000000
--- a/client/ruby/solrb/solr/solr/conf/xslt/example.xsl
+++ /dev/null
@@ -1,132 +0,0 @@
-<?xml version='1.0' encoding='UTF-8'?>
-
-<!-- 
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *     http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- -->
-
-<!-- 
-  Simple transform of Solr query results to HTML
- -->
-<xsl:stylesheet version='1.0'
-    xmlns:xsl='http://www.w3.org/1999/XSL/Transform'
->
-
-  <xsl:output media-type="text/html"/>
-  
-  <xsl:variable name="title" select="concat('Solr search results (',response/result/@numFound,' documents)')"/>
-  
-  <xsl:template match='/'>
-    <html>
-      <head>
-        <title><xsl:value-of select="$title"/></title>
-        <xsl:call-template name="css"/>
-      </head>
-      <body>
-        <h1><xsl:value-of select="$title"/></h1>
-        <div class="note">
-          This has been formatted by the sample "example.xsl" transform -
-          use your own XSLT to get a nicer page
-        </div>
-        <xsl:apply-templates select="response/result/doc"/>
-      </body>
-    </html>
-  </xsl:template>
-  
-  <xsl:template match="doc">
-    <xsl:variable name="pos" select="position()"/>
-    <div class="doc">
-      <table width="100%">
-        <xsl:apply-templates>
-          <xsl:with-param name="pos"><xsl:value-of select="$pos"/></xsl:with-param>
-        </xsl:apply-templates>
-      </table>
-    </div>
-  </xsl:template>
-
-  <xsl:template match="doc/*[@name='score']" priority="100">
-    <xsl:param name="pos"></xsl:param>
-    <tr>
-      <td class="name">
-        <xsl:value-of select="@name"/>
-      </td>
-      <td class="value">
-        <xsl:value-of select="."/>
-
-        <xsl:if test="boolean(//lst[@name='explain'])">
-          <xsl:element name="a">
-            <!-- can't allow whitespace here -->
-            <xsl:attribute name="href">javascript:toggle("<xsl:value-of select="concat('exp-',$pos)" />");</xsl:attribute>?</xsl:element>
-          <br/>
-          <xsl:element name="div">
-            <xsl:attribute name="class">exp</xsl:attribute>
-            <xsl:attribute name="id">
-              <xsl:value-of select="concat('exp-',$pos)" />
-            </xsl:attribute>
-            <xsl:value-of select="//lst[@name='explain']/str[position()=$pos]"/>
-          </xsl:element>
-        </xsl:if>
-      </td>
-    </tr>
-  </xsl:template>
-
-  <xsl:template match="doc/arr" priority="100">
-    <tr>
-      <td class="name">
-        <xsl:value-of select="@name"/>
-      </td>
-      <td class="value">
-        <ul>
-        <xsl:for-each select="*">
-          <li><xsl:value-of select="."/></li>
-        </xsl:for-each>
-        </ul>
-      </td>
-    </tr>
-  </xsl:template>
-
-
-  <xsl:template match="doc/*">
-    <tr>
-      <td class="name">
-        <xsl:value-of select="@name"/>
-      </td>
-      <td class="value">
-        <xsl:value-of select="."/>
-      </td>
-    </tr>
-  </xsl:template>
-
-  <xsl:template match="*"/>
-  
-  <xsl:template name="css">
-    <script>
-      function toggle(id) {
-        var obj = document.getElementById(id);
-        obj.style.display = (obj.style.display != 'block') ? 'block' : 'none';
-      }
-    </script>
-    <style type="text/css">
-      body { font-family: "Lucida Grande", sans-serif }
-      td.name { font-style: italic; font-size:80%; }
-      td { vertical-align: top; }
-      ul { margin: 0px; margin-left: 1em; padding: 0px; }
-      .note { font-size:80%; }
-      .doc { margin-top: 1em; border-top: solid grey 1px; }
-      .exp { display: none; font-family: monospace; white-space: pre; }
-    </style>
-  </xsl:template>
-
-</xsl:stylesheet>
diff --git a/client/ruby/solrb/solr/start.jar b/client/ruby/solrb/solr/start.jar
deleted file mode 100755
index 02d16d7..0000000
--- a/client/ruby/solrb/solr/start.jar
+++ /dev/null
@@ -1,2 +0,0 @@
-AnyObjectId[1145d205a370cefe48580deee1fb6920c3edf0ca] was removed in git history.
-Apache SVN contains full history.
\ No newline at end of file
diff --git a/client/ruby/solrb/solr/webapps/solr.war b/client/ruby/solrb/solr/webapps/solr.war
deleted file mode 100644
index 1494ce4..0000000
Binary files a/client/ruby/solrb/solr/webapps/solr.war and /dev/null differ
diff --git a/client/ruby/solrb/test/conf/admin-extra.html b/client/ruby/solrb/test/conf/admin-extra.html
deleted file mode 100644
index aa739da..0000000
--- a/client/ruby/solrb/test/conf/admin-extra.html
+++ /dev/null
@@ -1,31 +0,0 @@
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- The content of this page will be statically included into the top
-of the admin page.  Uncomment this as an example to see there the content
-will show up.
-
-<hr>
-<i>This line will appear before the first table</i>
-<tr>
-<td colspan="2">
-This row will be appended to the end of the first table
-</td>
-</tr>
-<hr>
-
--->
diff --git a/client/ruby/solrb/test/conf/protwords.txt b/client/ruby/solrb/test/conf/protwords.txt
deleted file mode 100644
index 1dfc0ab..0000000
--- a/client/ruby/solrb/test/conf/protwords.txt
+++ /dev/null
@@ -1,21 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# Use a protected word file to protect against the stemmer reducing two
-# unrelated words to the same base word.
-
-# Some non-words that normally won't be encountered,
-# just to test that they won't be stemmed.
-dontstems
-zwhacky
-
diff --git a/client/ruby/solrb/test/conf/schema.xml b/client/ruby/solrb/test/conf/schema.xml
deleted file mode 100755
index 9ebe4d3..0000000
--- a/client/ruby/solrb/test/conf/schema.xml
+++ /dev/null
@@ -1,236 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<!-- This is the Solr schema file. This file should be named "schema.xml" and
- should be in the conf directory under the solr home
- (i.e. ./solr/conf/schema.xml by default) 
- or located where the classloader for the Solr webapp can find it.
-
- For more information, on how to customize this file, please see
- http://wiki.apache.org/solr/SchemaXml
--->
-
-<schema name="flare" version="1.1">
-  <!-- attribute "name" is the name of this schema and is only used for display purposes.
-       Applications should change this to reflect the nature of the search collection.
-       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
-       not normally be changed by applications.
-       1.0: multiValued attribute did not exist, all fields are multiValued by nature
-       1.1: multiValued attribute introduced, false by default -->
-
-  <types>
-    <!-- field type definitions. The "name" attribute is
-       just a label to be used by field definitions.  The "class"
-       attribute and any other attributes determine the real
-       behavior of the fieldtype.
-         Class names starting with "solr" refer to java classes in the
-       org.apache.solr.analysis package.
-    -->
-
-    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
-       - StrField and TextField support an optional compressThreshold which
-       limits compression (if enabled in the derived fields) to values which
-       exceed a certain size (in characters).
-    -->
-    <fieldtype name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- boolean type: "true" or "false" -->
-    <fieldtype name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- The optional sortMissingLast and sortMissingFirst attributes are
-         currently supported on types that are sorted internally as strings.
-       - If sortMissingLast="true", then a sort on this field will cause documents
-         without the field to come after documents with the field,
-         regardless of the requested sort order (asc or desc).
-       - If sortMissingFirst="true", then a sort on this field will cause documents
-         without the field to come before documents with the field,
-         regardless of the requested sort order.
-       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
-         then default lucene sorting will be used which places docs without the
-         field first in an ascending sort and last in a descending sort.
-    -->    
-
-
-    <!-- numeric field types that store and index the text
-         value verbatim (and hence don't support range queries, since the
-         lexicographic ordering isn't equal to the numeric ordering) -->
-    <fieldtype name="integer" class="solr.IntField" omitNorms="true"/>
-    <fieldtype name="long" class="solr.LongField" omitNorms="true"/>
-    <fieldtype name="float" class="solr.FloatField" omitNorms="true"/>
-    <fieldtype name="double" class="solr.DoubleField" omitNorms="true"/>
-
-
-    <!-- Numeric field types that manipulate the value into
-         a string value that isn't human-readable in its internal form,
-         but with a lexicographic ordering the same as the numeric ordering,
-         so that range queries work correctly. -->
-    <fieldtype name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
-    <fieldtype name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>
-
-
-    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
-         is a more restricted form of the canonical representation of dateTime
-         http://www.w3.org/TR/xmlschema-2/#dateTime    
-         The trailing "Z" designates UTC time and is mandatory.
-         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
-         All other components are mandatory.
-
-         Expressions can also be used to denote calculations that should be
-         performed relative to "NOW" to determine the value, ie...
-
-               NOW/HOUR
-                  ... Round to the start of the current hour
-               NOW-1DAY
-                  ... Exactly 1 day prior to now
-               NOW/DAY+6MONTHS+3DAYS
-                  ... 6 months and 3 days in the future from the start of
-                      the current day
-                      
-         Consult the DateField javadocs for more information.
-      -->
-    <fieldtype name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>
-
-    <!-- solr.TextField allows the specification of custom text analyzers
-         specified as a tokenizer and a list of token filters. Different
-         analyzers may be specified for indexing and querying.
-
-         The optional positionIncrementGap puts space between multiple fields of
-         this type on the same document, with the purpose of preventing false phrase
-         matching across fields.
-
-         For more info on customizing your analyzer chain, please see
-         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
-     -->
-
-    <!-- One can also specify an existing Analyzer class that has a
-         default constructor via the class attribute on the analyzer element
-    <fieldtype name="text_greek" class="solr.TextField">
-      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
-    </fieldType>
-    -->
-
-    <!-- A text field that only splits on whitespace for exact matching of words -->
-    <fieldtype name="text_ws" class="solr.TextField" positionIncrementGap="100">
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-      </analyzer>
-    </fieldtype>
-
-    <!-- A text field that uses WordDelimiterFilter to enable splitting and matching of
-        words on case-change, alpha numeric boundaries, and non-alphanumeric chars,
-        so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".
-        Synonyms and stopwords are customized by external files, and stemming is enabled.
-        Duplicate tokens at the same position (which may result from Stemmed Synonyms or
-        WordDelim parts) are removed.
-        -->
-    <fieldtype name="text" class="solr.TextField" positionIncrementGap="100">
-      <analyzer type="index">
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <!-- in this example, we will only use synonyms at query time
-        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
-        -->
-        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-      <analyzer type="query">
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
-        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
-
-    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
-         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
-    <fieldtype name="textTight" class="solr.TextField" positionIncrementGap="100" >
-      <analyzer>
-        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
-        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
-        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
-        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
-        <filter class="solr.LowerCaseFilterFactory"/>
-        <filter class="solr.EnglishPorterFilterFactory" protected="protwords.txt"/>
-        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
-      </analyzer>
-    </fieldtype>
-
- </types>
-
-
- <fields>
-   <!-- Valid attributes for fields:
-     name: mandatory - the name for the field
-     type: mandatory - the name of a previously defined type from the <types> section
-     indexed: true if this field should be indexed (searchable or sortable)
-     stored: true if this field should be retrievable
-     compressed: [false] if this field should be stored using gzip compression
-       (this will only apply if the field type is compressable; among
-       the standard field types, only TextField and StrField are)
-     multiValued: true if this field may contain multiple values per document
-     omitNorms: (expert) set to true to omit the norms associated with
-       this field (this disables length normalization and index-time
-       boosting for the field, and saves some memory).  Only full-text
-       fields or fields that need an index-time boost need norms.
-   -->
-
-   <field name="id" type="string" indexed="true" stored="true"/>
-
-   <!-- catchall field, containing all other searchable text fields (implemented
-        via copyField further on in this schema  -->
-   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>
-
-   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
-        will be used if the name matches any of the patterns.
-        RESTRICTION: the glob-like pattern in the name attribute must have
-        a "*" only at the start or the end.
-        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
-        Longer patterns will be matched first.  if equal size patterns
-        both match, the first appearing in the schema will be used.  -->
-   <dynamicField name="*_facet"  type="string"  indexed="true"  stored="true"/>
-   <dynamicField name="*_text"   type="text"    indexed="true"  stored="true"/>
- </fields>
-
- <!-- field to use to determine and enforce document uniqueness. -->
- <uniqueKey>id</uniqueKey>
-
- <!-- field for the QueryParser to use when an explicit fieldname is absent -->
- <defaultSearchField>text</defaultSearchField>
-
- <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
- <solrQueryParser defaultOperator="AND"/>
-
-  <!-- copyField commands copy one field to another at the time a document
-        is added to the index.  It's used either to index the same field differently,
-        or to add multiple fields to the same field for easier/faster searching.  -->
- <copyField source="*_text" dest="text"/>
-
- <!-- Similarity is the scoring routine for each document vs. a query.
-      A custom similarity may be specified here, but the default is fine
-      for most applications.  -->
- <!-- <similarity class="org.apache.lucene.search.DefaultSimilarity"/> -->
-
-</schema>
diff --git a/client/ruby/solrb/test/conf/scripts.conf b/client/ruby/solrb/test/conf/scripts.conf
deleted file mode 100644
index e993bbf..0000000
--- a/client/ruby/solrb/test/conf/scripts.conf
+++ /dev/null
@@ -1,24 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-user=
-solr_hostname=localhost
-solr_port=8983
-rsyncd_port=18983
-data_dir=
-webapp_name=solr
-master_host=
-master_data_dir=
-master_status_dir=
diff --git a/client/ruby/solrb/test/conf/solrconfig.xml b/client/ruby/solrb/test/conf/solrconfig.xml
deleted file mode 100755
index 0e861a2..0000000
--- a/client/ruby/solrb/test/conf/solrconfig.xml
+++ /dev/null
@@ -1,302 +0,0 @@
-<?xml version="1.0" ?>
-<!--
- Licensed to the Apache Software Foundation (ASF) under one or more
- contributor license agreements.  See the NOTICE file distributed with
- this work for additional information regarding copyright ownership.
- The ASF licenses this file to You under the Apache License, Version 2.0
- (the "License"); you may not use this file except in compliance with
- the License.  You may obtain a copy of the License at
-
-     http://www.apache.org/licenses/LICENSE-2.0
-
- Unless required by applicable law or agreed to in writing, software
- distributed under the License is distributed on an "AS IS" BASIS,
- WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- See the License for the specific language governing permissions and
- limitations under the License.
--->
-
-<config>
-
-  <!-- Used to specify an alternate directory to hold all index data
-       other than the default ./data under the Solr home.
-       If replication is in use, this should match the replication configuration. -->
-  <!--
-  <dataDir>./solr/data</dataDir>
-  -->
-
-  <indexDefaults>
-   <!-- Values here affect all index writers and act as a default unless overridden. -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-    <writeLockTimeout>1000</writeLockTimeout>
-    <commitLockTimeout>10000</commitLockTimeout>
-  </indexDefaults>
-
-  <mainIndex>
-    <!-- options specific to the main on-disk lucene index -->
-    <useCompoundFile>false</useCompoundFile>
-    <mergeFactor>10</mergeFactor>
-    <maxBufferedDocs>1000</maxBufferedDocs>
-    <maxMergeDocs>2147483647</maxMergeDocs>
-    <maxFieldLength>10000</maxFieldLength>
-
-    <!-- If true, unlock any held write or commit locks on startup. 
-         This defeats the locking mechanism that allows multiple
-         processes to safely access a lucene index, and should be
-         used with care. -->
-    <unlockOnStartup>false</unlockOnStartup>
-  </mainIndex>
-
-  <!-- the default high-performance update handler -->
-  <updateHandler class="solr.DirectUpdateHandler2">
-
-    <!-- A prefix of "solr." for class names is an alias that
-         causes solr to search appropriate packages, including
-         org.apache.solr.(search|update|request|core|analysis)
-     -->
-
-    <!-- autocommit pending docs if certain criteria are met 
-    <autoCommit> 
-      <maxDocs>10000</maxDocs>
-    </autoCommit>
-    -->
-
-    <!-- The RunExecutableListener executes an external command.
-         exe - the name of the executable to run
-         dir - dir to use as the current working directory. default="."
-         wait - the calling thread waits until the executable returns. default="true"
-         args - the arguments to pass to the program.  default=nothing
-         env - environment variables to set.  default=nothing
-      -->
-    <!-- A postCommit event is fired after every commit or optimize command
-    <listener event="postCommit" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-      <arr name="args"> <str>arg1</str> <str>arg2</str> </arr>
-      <arr name="env"> <str>MYVAR=val1</str> </arr>
-    </listener>
-    -->
-    <!-- A postOptimize event is fired only after every optimize command, useful
-         in conjunction with index distribution to only distribute optimized indicies 
-    <listener event="postOptimize" class="solr.RunExecutableListener">
-      <str name="exe">snapshooter</str>
-      <str name="dir">solr/bin</str>
-      <bool name="wait">true</bool>
-    </listener>
-    -->
-
-  </updateHandler>
-
-
-  <query>
-    <!-- Maximum number of clauses in a boolean query... can affect
-        range or prefix queries that expand to big boolean
-        queries.  An exception is thrown if exceeded.  -->
-    <maxBooleanClauses>1024</maxBooleanClauses>
-
-    
-    <!-- Cache used by SolrIndexSearcher for filters (DocSets),
-         unordered sets of *all* documents that match a query.
-         When a new searcher is opened, its caches may be prepopulated
-         or "autowarmed" using data from caches in the old searcher.
-         autowarmCount is the number of items to prepopulate.  For LRUCache,
-         the autowarmed items will be the most recently accessed items.
-       Parameters:
-         class - the SolrCache implementation (currently only LRUCache)
-         size - the maximum number of entries in the cache
-         initialSize - the initial capacity (number of entries) of
-           the cache.  (seel java.util.HashMap)
-         autowarmCount - the number of entries to prepopulate from
-           and old cache.
-         -->
-    <filterCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="256"/>
-
-   <!-- queryResultCache caches results of searches - ordered lists of
-         document ids (DocList) based on a query, a sort, and the range
-         of documents requested.  -->
-    <queryResultCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="256"/>
-
-  <!-- documentCache caches Lucene Document objects (the stored fields for each document).
-       Since Lucene internal document ids are transient, this cache will not be autowarmed.  -->
-    <documentCache
-      class="solr.LRUCache"
-      size="512"
-      initialSize="512"
-      autowarmCount="0"/>
-
-    <!-- If true, stored fields that are not requested will be loaded lazily.
-    -->
-    <enableLazyFieldLoading>false</enableLazyFieldLoading>
-
-    <!-- Example of a generic cache.  These caches may be accessed by name
-         through SolrIndexSearcher.getCache(),cacheLookup(), and cacheInsert().
-         The purpose is to enable easy caching of user/application level data.
-         The regenerator argument should be specified as an implementation
-         of solr.search.CacheRegenerator if autowarming is desired.  -->
-    <!--
-    <cache name="myUserCache"
-      class="solr.LRUCache"
-      size="4096"
-      initialSize="1024"
-      autowarmCount="1024"
-      regenerator="org.mycompany.mypackage.MyRegenerator"
-      />
-    -->
-
-   <!-- An optimization that attempts to use a filter to satisfy a search.
-         If the requested sort does not include score, then the filterCache
-         will be checked for a filter matching the query. If found, the filter
-         will be used as the source of document ids, and then the sort will be
-         applied to that.
-    <useFilterForSortedQuery>true</useFilterForSortedQuery>
-   -->
-
-   <!-- An optimization for use with the queryResultCache.  When a search
-         is requested, a superset of the requested number of document ids
-         are collected.  For example, if a search for a particular query
-         requests matching documents 10 through 19, and queryWindowSize is 50,
-         then documents 0 through 50 will be collected and cached.  Any further
-         requests in that range can be satisfied via the cache.  -->
-    <queryResultWindowSize>10</queryResultWindowSize>
-
-    <!-- This entry enables an int hash representation for filters (DocSets)
-         when the number of items in the set is less than maxSize.  For smaller
-         sets, this representation is more memory efficient, more efficient to
-         iterate over, and faster to take intersections.  -->
-    <HashDocSet maxSize="3000" loadFactor="0.75"/>
-
-
-    <!-- boolToFilterOptimizer converts boolean clauses with zero boost
-         into cached filters if the number of docs selected by the clause exceeds
-         the threshold (represented as a fraction of the total index) -->
-    <boolTofilterOptimizer enabled="true" cacheSize="32" threshold=".05"/>
-
-
-    <!-- a newSearcher event is fired whenever a new searcher is being prepared
-         and there is a current searcher handling requests (aka registered). -->
-    <!-- QuerySenderListener takes an array of NamedList and executes a
-         local query request for each NamedList in sequence. -->
-    <!--
-    <listener event="newSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">solr</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-        <lst> <str name="q">rocks</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- a firstSearcher event is fired whenever a new searcher is being
-         prepared but there is no current registered searcher to handle
-         requests or to gain autowarming data from. -->
-    <!--
-    <listener event="firstSearcher" class="solr.QuerySenderListener">
-      <arr name="queries">
-        <lst> <str name="q">fast_warm</str> <str name="start">0</str> <str name="rows">10</str> </lst>
-      </arr>
-    </listener>
-    -->
-
-    <!-- If a search request comes in and there is no current registered searcher,
-         then immediately register the still warming searcher and use it.  If
-         "false" then all requests will block until the first searcher is done
-         warming. -->
-    <useColdSearcher>false</useColdSearcher>
-
-  </query>
-
-
-  <!-- requestHandler plugins... incoming queries will be dispatched to the
-     correct handler based on the qt (query type) param matching the
-     name of registered handlers.
-     The "standard" request handler is the default and will be used if qt
-     is not specified in the request.
-  -->
-  <requestHandler name="indexinfo" class="solr.IndexInfoRequestHandler"/>
-  <requestHandler name="standard" class="solr.StandardRequestHandler">
-    <!-- default values for query parameters -->
-     <lst name="defaults">
-       <str name="echoParams">explicit</str>
-       <!-- 
-       <int name="rows">10</int>
-       <str name="fl">*</str>
-       <str name="version">2.1</str>
-        -->
-     </lst>
-  </requestHandler>
-  
-  <!-- DisMaxRequestHandler allows easy searching across multiple fields
-       for simple user-entered phrases. 
-       see http://wiki.apache.org/solr/DisMaxRequestHandler
-   -->
-  <requestHandler name="dismax" class="solr.DisMaxRequestHandler" >
-    <lst name="defaults">
-     <str name="echoParams">explicit</str>
-     <float name="tie">0.01</float>
-     <str name="qf">
-        text^1.9
-     </str>
-     <str name="pf">
-        text^1.9
-     </str>
-     <str name="fl">
-        id, text
-     </str>
-     <str name="mm">
-        2&lt;-1 5&lt;-2 6&lt;90%
-     </str>
-     <int name="ps">100</int> -->
-    </lst>
-  </requestHandler>
-
-  <!-- queryResponseWriter plugins... query responses will be written using the
-    writer specified by the 'wt' request parameter matching the name of a registered
-    writer.
-    The "standard" writer is the default and will be used if 'wt' is not specified 
-    in the request. XMLResponseWriter will be used if nothing is specified here.
-    The json, python, and ruby writers are also available by default.
-
-    <queryResponseWriter name="standard" class="org.apache.solr.request.XMLResponseWriter"/>
-    <queryResponseWriter name="json" class="org.apache.solr.request.JSONResponseWriter"/>
-    <queryResponseWriter name="python" class="org.apache.solr.request.PythonResponseWriter"/>
-    <queryResponseWriter name="ruby" class="org.apache.solr.request.RubyResponseWriter"/>
-
-    <queryResponseWriter name="custom" class="com.example.MyResponseWriter"/>
-  -->
-
-  <!-- XSLT response writer transforms the XML output by any xslt file found
-       in Solr's conf/xslt directory.  Changes to xslt files are checked for
-       every xsltCacheLifetimeSeconds.  
-   -->
-  <queryResponseWriter name="xslt" class="org.apache.solr.request.XSLTResponseWriter">
-    <int name="xsltCacheLifetimeSeconds">5</int>
-  </queryResponseWriter> 
-    
-  <!-- config for the admin interface --> 
-  <admin>
-    <defaultQuery>solr</defaultQuery>
-    <gettableFiles>solrconfig.xml schema.xml admin-extra.html</gettableFiles>
-    <!-- pingQuery should be "URLish" ...
-         &amp; separated key=val pairs ... but there shouldn't be any
-         URL escaping of the values -->
-    <pingQuery>
-     q=solr
-    </pingQuery>
-    <!-- configure a healthcheck file for servers behind a loadbalancer
-    <healthcheck type="file">server-enabled</healthcheck>
-    -->
-  </admin>
-
-</config>
diff --git a/client/ruby/solrb/test/conf/stopwords.txt b/client/ruby/solrb/test/conf/stopwords.txt
deleted file mode 100644
index 8433c83..0000000
--- a/client/ruby/solrb/test/conf/stopwords.txt
+++ /dev/null
@@ -1,57 +0,0 @@
-# Licensed to the Apache Software Foundation (ASF) under one or more
-# contributor license agreements.  See the NOTICE file distributed with
-# this work for additional information regarding copyright ownership.
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-# a couple of test stopwords to test that the words are really being
-# configured from this file:
-stopworda
-stopwordb
-
-#Standard english stop words taken from Lucene's StopAnalyzer
-an
-and
-are
-as
-at
-be
-but
-by
-for
-if
-in
-into
-is
-it
-no
-not
-of
-on
-or
-s
-such
-t
-that
-the
-their
-then
-there
-these
-they
-this
-to
-was
-will
-with
-
diff --git a/client/ruby/solrb/test/conf/synonyms.txt b/client/ruby/solrb/test/conf/synonyms.txt
deleted file mode 100644
index b0e31cb..0000000
--- a/client/ruby/solrb/test/conf/synonyms.txt
+++ /dev/null
@@ -1,31 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-#-----------------------------------------------------------------------
-#some test synonym mappings unlikely to appear in real input text
-aaa => aaaa
-bbb => bbbb1 bbbb2
-ccc => cccc1,cccc2
-a\=>a => b\=>b
-a\,a => b\,b
-fooaaa,baraaa,bazaaa
-
-# Some synonym groups specific to this example
-GB,gib,gigabyte,gigabytes
-MB,mib,megabyte,megabytes
-Television, Televisions, TV, TVs
-#notice we use "gib" instead of "GiB" so any WordDelimiterFilter coming
-#after us won't split it into two words.
-
-# Synonym mappings can be used for spelling correction too
-pixima => pixma
-
diff --git a/client/ruby/solrb/test/functional/server_test.rb b/client/ruby/solrb/test/functional/server_test.rb
deleted file mode 100644
index 1485129..0000000
--- a/client/ruby/solrb/test/functional/server_test.rb
+++ /dev/null
@@ -1,203 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class BadRequest < Solr::Request::Standard
-  def response_format
-    :invalid
-  end
-end
-
-class ServerTest < Test::Unit::TestCase
-  include Solr
-
-  def setup
-    @connection = Connection.new("http://localhost:8888/solr", :autocommit => :on)
-    clean
-  end
- 
-  def test_full_lifecycle
-    # make sure autocommit is on
-    assert @connection.autocommit
-
-    # make sure this doc isn't there to begin with
-    @connection.delete(123456)
-
-    # add it
-    @connection.add(:id => 123456, :text => 'Borges')
-
-    # look for it
-    response = @connection.query('Borges')
-    assert_equal 1, response.total_hits
-    assert_equal '123456', response.hits[0]['id']
-    
-    # look for it via dismax
-    response = @connection.search('Borges')
-    assert_equal 1, response.total_hits
-    assert_equal '123456', response.hits[0]['id']
-
-    # delete it
-    @connection.delete(123456)
-
-    # make sure it's gone
-    response = @connection.query('Borges')
-    assert_equal 0, response.total_hits
-  end 
-
-  def test_i18n_full_lifecycle
-    # make sure autocommit is on
-    assert @connection.autocommit
-
-    # make sure this doc isn't there to begin with
-    @connection.delete(123456)
-
-    # add it
-    @connection.add(:id => 123456, :text => '?')
-
-    # look for it
-    response = @connection.query('?')
-    assert_equal 1, response.total_hits
-    assert_equal '123456', response.hits[0]['id']
-
-    # delete it
-    @connection.delete(123456)
-
-    # make sure it's gone
-    response = @connection.query('? ?')
-    assert_equal 0, response.total_hits
-  end
-  
-  def test_sorting
-    @connection.add(:id => 1, :text => 'aaa woot')
-    @connection.add(:id => 2, :text => 'bbb woot')
-    @connection.add(:id => 3, :text => 'ccc woot')
-    @connection.commit
-    
-    results = @connection.query('woot', :sort => [:id => :descending], :rows => 2)
-    assert_equal([3, 2], results.hits.map { |h| h['id'].to_i })
-    
-    results = @connection.search('woot', :sort => [:id => :descending], :rows => 2)
-    assert_equal([3, 2], results.hits.map { |h| h['id'].to_i })
-    
-    @connection.delete_by_query("id:1 OR id:2 OR id:3")
-  end
-
-  def test_bad_connection
-    conn = Solr::Connection.new 'http://127.0.0.1:9999/invalid'
-    begin
-      conn.send(Solr::Request::Ping.new)
-      flunk "Expected exception not raised"
-    rescue ::Exception
-      # expected
-      assert true
-    end
-  end
-  
-  def test_bad_url
-    conn = Solr::Connection.new 'http://localhost:8888/invalid'
-    assert_raise(Net::HTTPServerException) do
-      conn.send(Solr::Request::Ping.new)
-    end
-  end
-  
-  def test_commit
-    response = @connection.send(Solr::Request::Commit.new)
-    assert_equal "<result status=\"0\"></result>", response.raw_response
-  end
-  
-  def test_optimize
-    response = @connection.send(Solr::Request::Optimize.new)
-    assert_equal "<result status=\"0\"></result>", response.raw_response
-  end
-  
-  def test_ping
-    assert_equal true, @connection.ping
-  end
-
-  def test_delete_with_query
-    assert_equal true, @connection.delete_by_query('[* TO *]')
-  end
-
-  def test_ping_with_bad_server
-    conn = Solr::Connection.new 'http://localhost:8888/invalid'
-    assert_equal false, conn.ping
-  end
-  
-  def test_invalid_response_format
-    request = BadRequest.new(:query => "solr")
-    assert_raise(Solr::Exception) do
-      @connection.send(request)
-    end
-  end
-  
-  def test_escaping
-    doc = Solr::Document.new :id => 47, :ruby_text => 'puts "ouch!"'
-    @connection.add(doc)
-    @connection.commit
-    
-    request = Solr::Request::Standard.new :query => 'ouch'
-    result = @connection.send(request)
-    
-    assert_match /puts/, result.raw_response
-  end
-
-  def test_add_document
-    doc = {:id => 999, :text => 'hi there!'}
-    request = Solr::Request::AddDocument.new(doc)
-    response = @connection.send(request)
-    assert response.status_code == '0'
-  end
-
-  def test_update
-    @connection.update(:id => 999, :text => 'update test')
-  end
-
-  def test_no_such_field
-    doc = {:id => 999, :bogus => 'foo'}
-    request = Solr::Request::AddDocument.new(doc)
-    response = @connection.send(request)
-    assert_equal false, response.ok? 
-    assert_match "ERROR:unknown field 'bogus'", response.status_message
-  end
-  
-  def test_index_info
-    doc = {:id => 999, :test_index_facet => 'value'}
-    @connection.add(doc)
-    info = @connection.send(Solr::Request::IndexInfo.new)
-    assert info.field_names.include?("id") && info.field_names.include?("test_index_facet")
-    assert_equal 1, info.num_docs
-  end
-  
-  def test_highlighting
-    @connection.add(:id => 1, :title_text => "Apache Solr")
-    
-    request = Solr::Request::Standard.new(:query => 'solr',
-      :highlighting => {
-        :field_list => ['title_text'],
-        :max_snippets => 3,
-        :prefix => ">>",
-        :suffix => "<<"
-      }
-    )
-    
-    response = @connection.send(request)
-    assert_equal ["Apache >>Solr<<"], response.highlighted(1, :title_text)
-  end
-
-  # wipe the index clean
-  def clean
-    @connection.delete_by_query('[* TO *]')
-  end
-
-end
diff --git a/client/ruby/solrb/test/functional/test_solr_server.rb b/client/ruby/solrb/test/functional/test_solr_server.rb
deleted file mode 100644
index d57494f..0000000
--- a/client/ruby/solrb/test/functional/test_solr_server.rb
+++ /dev/null
@@ -1,91 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-# A singleton class for starting/stopping a Solr server for testing purposes
-# The behavior of TestSolrServer can be modified prior to start() by changing 
-# port, solr_home, and quiet properties.
-
-class TestSolrServer
-  require 'singleton'
-  include Singleton
-  attr_accessor :port, :solr_home, :quiet
-
-  # configure the singleton with some defaults
-  def initialize
-    @port = 8888
-    @quiet = true
-    root_dir = File.expand_path(File.dirname(__FILE__) + '/../..')
-    @solr_dir = "#{root_dir}/solr"
-    @solr_home = "#{root_dir}/test"
-    @pid = nil
-  end
-
-  def self.wrap(params = {})
-    error = false
-    solr_server = self.instance
-    solr_server.quiet = params[:quiet]
-    begin
-      puts "starting solr server on #{RUBY_PLATFORM}"
-      solr_server.start
-      sleep params[:startup_wait] || 5
-      yield
-    rescue
-      error = true
-    ensure
-      puts "stopping solr server"
-      solr_server.stop
-    end
-
-    return error
-  end
-  
-  if RUBY_PLATFORM =~ /mswin32/
-    require 'win32/process'
-
-    # start the solr server
-    def start
-      Dir.chdir(@solr_dir) do
-        @pid = Process.create(
-              :app_name         => "java -Djetty.port=#{@port} -Dsolr.solr.home=#{@solr_home} -jar start.jar",
-              :creation_flags   => Process::DETACHED_PROCESS,
-              :process_inherit  => false,
-              :thread_inherit   => true,
-              :cwd              => "#{@solr_dir}"
-           ).process_id
-      end
-    end
-
-    # stop a running solr server
-    def stop
-      Process.kill(1, @pid)
-      Process.wait
-    end
-  else # Not Windows
-    # start the solr server
-    def start
-      Dir.chdir(@solr_dir) do
-        @pid = fork do
-          STDERR.close if @quiet
-          exec "java -Djetty.port=#{@port} -Dsolr.solr.home=#{@solr_home} " +
-            "-jar start.jar"
-        end
-      end
-    end
-
-    # stop a running solr server
-    def stop
-      Process.kill('TERM', @pid)
-      Process.wait
-    end
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/add_document_test.rb b/client/ruby/solrb/test/unit/add_document_test.rb
deleted file mode 100644
index af43644..0000000
--- a/client/ruby/solrb/test/unit/add_document_test.rb
+++ /dev/null
@@ -1,40 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr_mock_base'
-
-class AddDocumentTest < SolrMockBaseTestCase
-
-  def test_add_document_response
-    conn = Solr::Connection.new('http://localhost:9999/solr')
-    set_post_return('<result status="0"></result>')
-    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
-    response = conn.send(Solr::Request::AddDocument.new(doc))
-    assert_equal true, response.ok?
-  end
-
-  def test_bad_add_document_response
-    conn = Solr::Connection.new('http://localhost:9999/solr')
-    set_post_return('<result status="400"></result>')
-    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
-    response = conn.send(Solr::Request::AddDocument.new(doc))
-    assert_equal false, response.ok?
-  end
-
-  def test_shorthand
-    conn = Solr::Connection.new('http://localhost:9999/solr')
-    set_post_return('<result status="0"></result>')
-    doc = {:id => '123', :text => 'Tlon, Uqbar, Orbis Tertius'}
-    assert_equal true, conn.add(:id => '123', :text => 'Tlon, Uqbar, Orbis Tetius')
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/commit_test.rb b/client/ruby/solrb/test/unit/commit_test.rb
deleted file mode 100644
index 7c304c5..0000000
--- a/client/ruby/solrb/test/unit/commit_test.rb
+++ /dev/null
@@ -1,41 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr_mock_base'
-
-class CommitTest < SolrMockBaseTestCase
-
-  def test_commit
-    xml = '<result status="0"></result>'
-    conn = Solr::Connection.new('http://localhost:9999/solr')
-    set_post_return(xml)
-    response = conn.send(Solr::Request::Commit.new)
-    assert_kind_of Solr::Response::Commit, response
-    assert true, response.ok?
-
-    # test shorthand
-    assert_equal true, conn.commit
-  end
-
-  def test_invalid_commit
-    xml = '<foo>bar</foo>'
-    conn = Solr::Connection.new('http://localhost:9999/solr')
-    set_post_return(xml)
-    response = conn.send(Solr::Request::Commit.new)
-    assert_kind_of Solr::Response::Commit, response
-    assert_equal false, response.ok?
-
-    # test shorthand
-    assert_equal false, conn.commit
-   end
-
-end
diff --git a/client/ruby/solrb/test/unit/connection_test.rb b/client/ruby/solrb/test/unit/connection_test.rb
deleted file mode 100755
index cba4f16..0000000
--- a/client/ruby/solrb/test/unit/connection_test.rb
+++ /dev/null
@@ -1,55 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-require 'solr_mock_base'
-
-class ConnectionTest < SolrMockBaseTestCase
-  def test_mock
-    connection = Connection.new("http://localhost:9999")
-    set_post_return("foo")
-    assert_equal "foo", connection.post(Solr::Request::AddDocument.new)
-  end
-  
-  def test_bad_url
-    assert_raise(RuntimeError) do
-      Connection.new("ftp://localhost:9999")
-    end
-  end
-
-  def test_connection_initialize
-    connection = Solr::Connection.new("http://localhost:8983/solr")
-    assert_equal 'localhost', connection.url.host
-    assert_equal 8983, connection.url.port
-    assert_equal '/solr', connection.url.path
-  end
-
-  def test_non_standard_context
-    connection = Solr::Connection.new("http://localhost:8983/index")
-    assert_equal '/index', connection.url.path
-  end
-
-  def test_xml_response
-    connection = Connection.new("http://localhost:9999")
-    set_post_return "<bogus/>"
-    response = connection.send(Solr::Request::Ping.new)
-    assert_equal "<bogus/>", response.raw_response
-  end
-
-  def test_ruby_response
-    connection = Connection.new("http://localhost:9999")
-    set_post_return "{'responseHeader' => {}, 'response' => {}}"
-    response = connection.send(Solr::Request::Standard.new(:query => 'foo'))
-    assert_equal({'responseHeader' => {}, 'response' => {}}, response.data)
-  end
-end
diff --git a/client/ruby/solrb/test/unit/delete_test.rb b/client/ruby/solrb/test/unit/delete_test.rb
deleted file mode 100644
index 7feb9e8..0000000
--- a/client/ruby/solrb/test/unit/delete_test.rb
+++ /dev/null
@@ -1,56 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr_mock_base'
-
-class DeleteTest <  SolrMockBaseTestCase
-
-  def test_delete_request
-    request = Solr::Request::Delete.new(:id => '123')
-    assert_match(/<delete>[\s]*<id>123<\/id>[\s]*<\/delete>/m, request.to_s)
-  end
-
-  def test_delete_by_query_request
-    request = Solr::Request::Delete.new(:query => 'name:summers')
-    assert_match(/<delete>[\s]*<query>name:summers<\/query>[\s]*<\/delete>/m, request.to_s)
-  end
-
-  def test_delete_response
-    conn = Solr::Connection.new 'http://localhost:9999/solr'
-    set_post_return('<result status="0"></result>')
-    response = conn.send(Solr::Request::Delete.new(:id => 123))
-    assert_equal true, response.ok? 
-  end
-  
-  def test_bad_delete_request
-    assert_raise(Solr::Exception) do
-      Solr::Request::Delete.new(:bogus => :param)
-    end
-
-    assert_raise(Solr::Exception) do
-      Solr::Request::Delete.new(:id => 529, :query => "id:529")
-    end
-  end
-
-  def test_bad_delete_response
-    conn = Solr::Connection.new 'http://localhost:9999/solr'
-    set_post_return('<result status="400">uhoh</result>')
-    response = conn.send(Solr::Request::Delete.new(:id => 123))
-    assert_equal false, response.ok? 
-  end
-
-  def test_delete_by_i18n_query_request
-    request = Solr::Request::Delete.new(:query => '')
-    assert_match(/<delete>[\s]*<query><\/query>[\s]*<\/delete>/m, request.to_s)
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/dismax_request_test.rb b/client/ruby/solrb/test/unit/dismax_request_test.rb
deleted file mode 100644
index 7141334..0000000
--- a/client/ruby/solrb/test/unit/dismax_request_test.rb
+++ /dev/null
@@ -1,26 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class DismaxRequestTest < Test::Unit::TestCase
-  
-  def test_basic_query
-    request = Solr::Request::Dismax.new(:query => 'query', :phrase_slop => '1000', :sort => [{:deedle => :descending}])
-    assert_match(/q=query/, request.to_s)
-    assert_match(/qt=dismax/, request.to_s)
-    assert_match(/ps=1000/, request.to_s)
-    assert_match(/sort=deedle%20desc/, request.to_s)
-  end
-  
-end
\ No newline at end of file
diff --git a/client/ruby/solrb/test/unit/document_test.rb b/client/ruby/solrb/test/unit/document_test.rb
deleted file mode 100644
index 09a7511..0000000
--- a/client/ruby/solrb/test/unit/document_test.rb
+++ /dev/null
@@ -1,59 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class DocumentTest < Test::Unit::TestCase
-
-  def test_xml
-    doc = Solr::Document.new
-    doc << Solr::Field.new(:creator => 'Erik Hatcher')
-    assert_kind_of Solr::XML::Element, doc.to_xml
-    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
-  end
-
-  def test_repeatable
-    doc = Solr::Document.new
-    doc << Solr::Field.new(:creator => 'Erik Hatcher')
-    doc << Solr::Field.new(:creator => 'Otis Gospodnetic')
-    assert_kind_of Solr::XML::Element, doc.to_xml
-    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<field name=['"]creator['"]>Otis Gospodnetic<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
-  end
-  
-  def test_repeatable_in_hash
-    doc = Solr::Document.new({:creator => ['Erik Hatcher', 'Otis Gospodnetic']})
-    assert_match(/<doc>[\s]*<field name=['"]creator['"]>Erik Hatcher<\/field>[\s]*<field name=['"]creator['"]>Otis Gospodnetic<\/field>[\s]*<\/doc>/m, doc.to_xml.to_s)
-  end
-  
-  def test_bad_doc
-    doc = Solr::Document.new
-    assert_raise(RuntimeError) do
-      doc << "invalid"
-    end
-  end
-
-  def test_hash_shorthand
-    doc = Solr::Document.new :creator => 'Erik Hatcher', :title => 'Lucene in Action'
-    assert_equal 'Erik Hatcher', doc[:creator]
-    assert_equal 'Lucene in Action', doc[:title]
-    assert_equal nil, doc[:foo]
-    
-    doc = Solr::Document.new
-    doc << {:creator => 'Erik Hatcher', :title => 'Lucene in Action'}
-    doc[:subject] = 'Search'
-    assert_equal 'Erik Hatcher', doc[:creator]
-    assert_equal 'Lucene in Action', doc[:title]
-    assert_equal 'Search', doc[:subject]
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/field_test.rb b/client/ruby/solrb/test/unit/field_test.rb
deleted file mode 100644
index ca8d363..0000000
--- a/client/ruby/solrb/test/unit/field_test.rb
+++ /dev/null
@@ -1,42 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class FieldTest < Test::Unit::TestCase
-  
-  def test_xml
-    field = Solr::Field.new :creator => 'Erik Hatcher'
-    assert_kind_of Solr::XML::Element, field.to_xml
-    assert_match(/<field name=["']creator["']>Erik Hatcher<\/field>/, field.to_xml.to_s)
-  end
-  
-  def test_escaped_xml
-    field = Solr::Field.new :creator => 'Erik Hatcher & His Amazing Leaping Ability'
-    assert_kind_of Solr::XML::Element, field.to_xml
-    assert_match(/<field name=["']creator["']>Erik Hatcher &amp; His Amazing Leaping Ability<\/field>/, field.to_xml.to_s)
-  end
-  
-  def test_xml_date
-    field = Solr::Field.new :time => Time.now
-    assert_kind_of Solr::XML::Element, field.to_xml
-    assert_match(/<field name=["']time["']>[\d]{4}-[\d]{2}-[\d]{2}T[\d]{2}:[\d]{2}:[\d]{2}Z<\/field>/, field.to_xml.to_s)
-  end
-  
-  def test_i18n_xml
-    field = Solr::Field.new :i18nstring => '? ?'
-    assert_kind_of Solr::XML::Element, field.to_xml
-    assert_match(/<field name=["']i18nstring["']>? ?<\/field>/m, field.to_xml.to_s)
-  end
-  
-end
diff --git a/client/ruby/solrb/test/unit/ping_test.rb b/client/ruby/solrb/test/unit/ping_test.rb
deleted file mode 100644
index 7d4dd30..0000000
--- a/client/ruby/solrb/test/unit/ping_test.rb
+++ /dev/null
@@ -1,51 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr_mock_base'
-
-class PingTest < SolrMockBaseTestCase 
-
-  def test_ping_response
-    xml = 
-<<PING_RESPONSE
-
-<?xml-stylesheet type="text/xsl" href="ping.xsl"?>
-
-<solr>
-  <ping>
-
-  </ping>
-</solr>
-PING_RESPONSE
-    conn = Solr::Connection.new('http://localhost:9999')
-    set_post_return(xml)
-    response = conn.send(Solr::Request::Ping.new)
-    assert_kind_of Solr::Response::Ping, response
-    assert_equal true, response.ok? 
-
-    # test shorthand
-    assert true, conn.ping
-  end
-
-  def test_bad_ping_response
-    xml = "<foo>bar</foo>"
-    conn = Solr::Connection.new('http://localhost:9999')
-    set_post_return(xml)
-    response = conn.send(Solr::Request::Ping.new)
-    assert_kind_of Solr::Response::Ping, response
-    assert_equal false, response.ok?
-
-    # test shorthand
-    assert_equal false, conn.ping
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/request_test.rb b/client/ruby/solrb/test/unit/request_test.rb
deleted file mode 100755
index e99fa6d..0000000
--- a/client/ruby/solrb/test/unit/request_test.rb
+++ /dev/null
@@ -1,61 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class BadRequest < Solr::Request::Base
-end
-
-class RequestTest < Test::Unit::TestCase
-
-  def test_commit_request
-    request = Solr::Request::Commit.new
-    assert_equal :xml, request.response_format
-    assert_equal 'update', request.handler
-    assert_equal '<commit/>', request.to_s
-  end
-  
-  def test_add_doc_request
-    request = Solr::Request::AddDocument.new(:title => "title")
-    assert_match(/<add>[\s]*<doc>[\s]*<field name=["']title["']>title<\/field>[\s]*<\/doc>[\s]*<\/add>/m, request.to_s)
-    assert_equal :xml, request.response_format
-    assert_equal 'update', request.handler
-    
-    assert_raise(RuntimeError) do
-      Solr::Request::AddDocument.new("invalid")
-    end
-  end
-  
-  def test_add_multidoc_request
-    request = Solr::Request::AddDocument.new([{:title => "title1"}, {:title => "title2"}])
-    assert_match(/<add>[\s]*<doc>[\s]*<field name=["']title["']>title1<\/field>[\s]*<\/doc>[\s]*<doc>[\s]*<field name=["']title["']>title2<\/field>[\s]*<\/doc>[\s]*<\/add>/m, request.to_s)
-    assert_equal :xml, request.response_format
-    assert_equal 'update', request.handler
-  end
-  
-  def test_ping_request
-    request = Solr::Request::Ping.new
-    assert_equal :xml, request.response_format
-  end
-
-  def test_bad_request_class
-    assert_raise(RuntimeError) do
-      BadRequest.new.response_format
-    end
-    
-    assert_raise(RuntimeError) do
-      BadRequest.new.handler
-    end
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/response_test.rb b/client/ruby/solrb/test/unit/response_test.rb
deleted file mode 100644
index 846510c..0000000
--- a/client/ruby/solrb/test/unit/response_test.rb
+++ /dev/null
@@ -1,42 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-require 'solr_mock_base'
-
-
-class ResponseTest < SolrMockBaseTestCase
-
-  def test_response_xml_error
-    begin
-      Solr::Response::Xml.new("<broken>invalid xml&")
-      flunk("failed to get Solr::Exception as expected") 
-    rescue Exception => exception
-      assert_kind_of Solr::Exception, exception
-      assert_match 'invalid response xml', exception.to_s
-    end
-  end
-  
-  def test_invalid_ruby
-    assert_raise(Solr::Exception) do
-      Solr::Response::Ruby.new(' {...')
-    end
-  end
-  
-  def test_bogus_request_handling
-    assert_raise(Solr::Exception) do
-      Solr::Response::Base.make_response(Solr::Request::Select.new, "response data")
-    end
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/solr_mock_base.rb b/client/ruby/solrb/test/unit/solr_mock_base.rb
deleted file mode 100755
index 86e676a..0000000
--- a/client/ruby/solrb/test/unit/solr_mock_base.rb
+++ /dev/null
@@ -1,40 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-# TODO: Maybe replace this with flexmock
-class SolrMockBaseTestCase < Test::Unit::TestCase
-  include Solr
-  
-  def setup
-    Connection.send(:alias_method, :orig_post, :post)
-  end
-  
-  def teardown
-    Connection.send(:alias_method, :post, :orig_post)
-  end
-    
-  def set_post_return(value)
-    Connection.class_eval %{
-      def post(request)
-        %q{#{value}}
-      end
-    }
-  end
-  
-  def test_dummy
-    # So Test::Unit is happy running this class
-  end
-    
-end
diff --git a/client/ruby/solrb/test/unit/standard_request_test.rb b/client/ruby/solrb/test/unit/standard_request_test.rb
deleted file mode 100755
index 85dc782..0000000
--- a/client/ruby/solrb/test/unit/standard_request_test.rb
+++ /dev/null
@@ -1,108 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'test/unit'
-require 'solr'
-
-class StandardRequestTest < Test::Unit::TestCase
-
-  def test_basic_query
-    request = Solr::Request::Standard.new(:query => 'query')
-    assert_equal :ruby, request.response_format
-    assert_equal 'select', request.handler
-    assert_equal 'query', request.to_hash[:q]
-    assert_match /q=query/, request.to_s
-  end
-  
-  def test_bad_params
-    assert_raise(RuntimeError) do
-      Solr::Request::Standard.new(:foo => "invalid")
-    end
-    
-    assert_raise(RuntimeError) do
-      Solr::Request::Standard.new(:query => "valid", :foo => "invalid")
-    end
-    
-    assert_raise(RuntimeError) do
-      Solr::Request::Standard.new(:query => "valid", :operator => :bogus)
-    end
-  end
-  
-  def test_common_params
-    request = Solr::Request::Standard.new(:query => 'query', :start => 10, :rows => 50,
-           :filter_queries => ['fq1', 'fq2'], :field_list => ['id','title','score'], :operator => :and)
-    assert_equal 10, request.to_hash[:start]
-    assert_equal 50, request.to_hash[:rows]
-    assert_equal ['fq1','fq2'], request.to_hash[:fq]
-    assert_equal "id,title,score", request.to_hash[:fl]
-    assert_equal "AND", request.to_hash["q.op"]
-  end
-    
-  def test_missing_params
-    request = Solr::Request::Standard.new(:query => 'query', :debug_query => false, :facets => {:fields =>[:category_facet]})
-    assert_nil request.to_hash[:rows]
-    assert_no_match /rows/, request.to_s
-    assert_no_match /facet\.sort/, request.to_s
-    assert_match /debugQuery/, request.to_s
-  end
-  
-  def test_facet_params_all
-    request = Solr::Request::Standard.new(:query => 'query',
-       :facets => {
-         :fields => [:genre,           
-                     # field that overrides the global facet parameters
-                     {:year => {:limit => 50, :mincount => 0, :missing => false, :sort => :term, :prefix=>"199"}}], 
-         :queries => ["q1", "q2"],
-         :prefix => "cat",
-         :limit => 5, :zeros => true, :mincount => 20, :sort => :count  # global facet parameters
-        }
-    )
-    
-    hash = request.to_hash
-    assert_equal true, hash[:facet]
-    assert_equal [:genre, :year], hash["facet.field"]
-    assert_equal ["q1", "q2"], hash["facet.query"]
-    assert_equal 5, hash["facet.limit"]
-    assert_equal 20, hash["facet.mincount"]
-    assert_equal true, hash["facet.sort"]
-    assert_equal "cat", hash["facet.prefix"]
-    assert_equal 50, hash["f.year.facet.limit"]
-    assert_equal 0, hash["f.year.facet.mincount"]
-    assert_equal false, hash["f.year.facet.sort"]
-    assert_equal "199", hash["f.year.facet.prefix"]
-  end
-
-  def test_basic_sort
-    request = Solr::Request::Standard.new(:query => 'query', :sort => [{:title => :descending}])
-    assert_equal 'query;title desc', request.to_hash[:q]
-  end
-  
-  def test_highlighting
-    request = Solr::Request::Standard.new(:query => 'query',
-      :highlighting => {
-        :field_list => ['title', 'author'],
-        :max_snippets => 3,
-        :require_field_match => true,
-        :prefix => "<blink>",
-        :suffix => "</blink>"
-      }
-    )
-    
-    hash = request.to_hash
-    assert_equal true, hash[:hl]
-    assert_equal "title,author", hash["hl.fl"]
-    assert_equal true, hash["hl.requireFieldMatch"]
-    assert_equal "<blink>", hash["hl.simple.pre"]
-    assert_equal "</blink>", hash["hl.simple.post"]
-  end
-
-end
diff --git a/client/ruby/solrb/test/unit/standard_response_test.rb b/client/ruby/solrb/test/unit/standard_response_test.rb
deleted file mode 100644
index 81175d9..0000000
--- a/client/ruby/solrb/test/unit/standard_response_test.rb
+++ /dev/null
@@ -1,174 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-require 'solr_mock_base'
-
-class StandardResponseTest <  SolrMockBaseTestCase
-
-  def test_basic
-    ruby_code = 
-<<RUBY_CODE
-{
-     'responseHeader'=>{
-      'status'=>0,
-      'QTime'=>1,
-      'params'=>{
-      'wt'=>'ruby',
-      'rows'=>'10',
-      'explainOther'=>'',
-      'start'=>'0',
-      'hl.fl'=>'',
-      'indent'=>'on',
-      'q'=>'guido',
-      'fl'=>'*,score',
-      'qt'=>'standard',
-      'version'=>'2.2'}},
-     'response'=>{'numFound'=>1,'start'=>0,'maxScore'=>0.67833745,'docs'=>[
-      {
-       'name'=>'guido von rossum',
-       'id'=>'123',
-       'timestamp'=>'2007-01-16T09:55:30.589Z',
-       'score'=>0.67833745}]
-     }}
-RUBY_CODE
-    conn = Solr::Connection.new 'http://localhost:9999'
-    set_post_return(ruby_code)
-    response = conn.send(Solr::Request::Standard.new(:query => 'foo'))
-    assert_equal true, response.ok?
-    assert response.query_time
-    assert_equal 1, response.total_hits
-    assert_equal 0, response.start
-    assert_equal 0.67833745, response.max_score
-    assert_equal 1, response.hits.length
-  end
-
-  def test_iteration
-    ruby_code = 
-<<RUBY_CODE
-{
-     'responseHeader'=>{
-      'status'=>0,
-      'QTime'=>0,
-      'params'=>{
-      'wt'=>'ruby',
-      'rows'=>'10',
-      'explainOther'=>'',
-      'start'=>'0',
-      'hl.fl'=>'',
-      'indent'=>'on',
-      'q'=>'guido',
-      'fl'=>'*,score',
-      'qt'=>'standard',
-      'version'=>'2.2'}},
-     'response'=>{'numFound'=>22,'start'=>0,'maxScore'=>0.53799295,'docs'=>[
-      {
-       'name'=>'guido von rossum the 0',
-       'id'=>'0',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 1',
-       'id'=>'1',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 2',
-       'id'=>'2',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 3',
-       'id'=>'3',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 4',
-       'id'=>'4',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 5',
-       'id'=>'5',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 6',
-       'id'=>'6',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 7',
-       'id'=>'7',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 8',
-       'id'=>'8',
-       'score'=>0.53799295},
-      {
-       'name'=>'guido von rossum the 9',
-       'id'=>'9',
-       'score'=>0.53799295}]
-     }}
-RUBY_CODE
-    conn = Solr::Connection.new 'http://localhost:9999'
-    set_post_return(ruby_code)
-
-    count = 0
-    conn.query('foo') do |hit|
-      assert_equal "guido von rossum the #{count}", hit['name']
-      count += 1
-    end
-
-    assert_equal 10, count
-  end
-  
-  def test_facets
-    ruby_code =
-    <<RUBY_CODE
-    {
-     'responseHeader'=>{
-      'status'=>0,
-      'QTime'=>1897,
-      'params'=>{
-    	'facet.limit'=>'20',
-    	'wt'=>'ruby',
-    	'rows'=>'0',
-    	'facet'=>'true',
-    	'facet.mincount'=>'1',
-    	'facet.field'=>[
-    	 'subject_genre_facet',
-    	 'subject_geographic_facet',
-    	 'subject_format_facet',
-    	 'subject_era_facet',
-    	 'subject_topic_facet'],
-    	'indent'=>'true',
-    	'fl'=>'*,score',
-    	'q'=>'[* TO *]',
-    	'qt'=>'standard',
-    	'facet.sort'=>'true'}},
-     'response'=>{'numFound'=>49999,'start'=>0,'maxScore'=>1.0,'docs'=>[]
-     },
-     'facet_counts'=>{
-      'facet_queries'=>{},
-      'facet_fields'=>{
-    	'subject_genre_facet'=>[
-    	  'Biography.',2605,
-    	 'Congresses.',1837,
-    	 'Bibliography.',672,
-    	 'Exhibitions.',642,
-    	 'Periodicals.',615,
-    	 'Sources.',485]}}
-  	 }
-RUBY_CODE
-    set_post_return(ruby_code)
-    conn = Solr::Connection.new "http://localhost:9999"
-    response = conn.query('foo')
-    facets = response.field_facets('subject_genre_facet')
-    assert_equal 2605, facets[0].value
-    assert_equal 485, facets[5].value
-  end
-
-end
-
diff --git a/client/ruby/solrb/test/unit/suite.rb b/client/ruby/solrb/test/unit/suite.rb
deleted file mode 100755
index 4403c51..0000000
--- a/client/ruby/solrb/test/unit/suite.rb
+++ /dev/null
@@ -1,25 +0,0 @@
-# The ASF licenses this file to You under the Apache License, Version 2.0
-# (the "License"); you may not use this file except in compliance with
-# the License.  You may obtain a copy of the License at
-#
-#     http://www.apache.org/licenses/LICENSE-2.0
-#
-# Unless required by applicable law or agreed to in writing, software
-# distributed under the License is distributed on an "AS IS" BASIS,
-# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
-# See the License for the specific language governing permissions and
-# limitations under the License.
-
-# TODO dynamically require all *_test files
-
-require 'add_document_test'
-require 'commit_test'
-require 'connection_test'
-require 'delete_test'
-require 'document_test'
-require 'field_test'
-require 'ping_test'
-require 'request_test'
-require 'response_test'
-require 'standard_request_test'
-require 'standard_response_test'
\ No newline at end of file

